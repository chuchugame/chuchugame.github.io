window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e){var o,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(t){o=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}})();var l,p=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?p=l.concat(p):h=-1,p.length&&f())}function f(){if(!u){var t=s(d);u=!0;for(var e=p.length;e;){for(l=p,p=[];++h<e;)l&&l[h].run();h=-1,e=p.length}l=null,u=!1,c(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];p.push(new g(t,e)),1!==p.length||u||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],AdornBrick:[function(t,e,o){"use strict";cc._RF.push(e,"e465fFiYChENbTsld58816g","AdornBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manager/BrickManager"),s=t("../Brick"),c=t("../Define"),l=t("./TopHallOfFameBrick"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.collider.enabled=!1,this.node.x+=.5*c.default.brickWidth,this.initTopHallOfFame()},e.prototype.initTopHallOfFame=function(){var t=this;cc.loader.loadRes("prefabs/others/topHallOfFameBrick",cc.Prefab,function(e,o){if(e)console.log("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25 prefabs/others/topHallOfFameBrick");else{var n=cc.instantiate(o);if(n.getComponent(l.default).initBrick(a.brickInfo[a.BRICKTYPE.SHAREBRICK],new a.MapData(-9999,-9999,a.BRICKTYPE.SHAREBRICK,0,"",null,0)),null!=t.node.parent){t.node.parent.addChild(n);var i=t.node.position;i.x+=0,i.y+=280,n.position=i}}})},e.prototype.setCollisionStatus=function(){},e.prototype.changeStyle=function(){},r([u],e)}(s.default));o.default=h,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Brick":"Brick","../Define":"Define","./TopHallOfFameBrick":"TopHallOfFameBrick"}],AnimationFrame:[function(t,e,o){"use strict";cc._RF.push(e,"ac8255zv89EGY5mdL+l8G1n","AnimationFrame");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isPlay=!1,e.prefix="",e.minFrame=0,e.maxFrame=0,e.curFrame=0,e.speed=10,e.totalTime=0,e.atlas=null,e.curSprite=null,e.loopCount=-1,e.totalLoop=0,e.finishCallBack=null,e.isPlayFinish=!1,e.isPuase=!1,e}return i(e,t),e.prototype.update=function(t){this.isPlay&&(this.node.name,this.totalTime=this.totalTime+this.speed*t,this.totalTime>=1&&(this.totalTime=1-this.totalTime,this.nextFrame()))},e.prototype.play=function(t,e){void 0===e&&(e=-1),this.curFrame=this.minFrame,this.totalLoop=0,this.speed=t,this.isPlay=!0,this.loopCount=e,this.isPlayFinish=!1,this.showFrame()},e.prototype.initAnimation=function(t,e,o,n){this.resetAnimation(t,e,n),this.atlas=o,this.prefix=n,this.curSprite=this.node.getComponent(cc.Sprite),null!=this.curSprite?this.showFrame():console.log("\u521b\u5efa\u52a8\u4f5c\u9519\u8bef\uff01")},e.prototype.resetAnimation=function(t,e,o){void 0===o&&(o=this.prefix),this.minFrame=t,this.maxFrame=e,this.curFrame=t,this.prefix=o,this.totalTime=0,this.totalLoop=0,this.isPlayFinish=!1,this.isPuase=!1},e.prototype.showFrame=function(){this.curSprite.spriteFrame=this.atlas.getSpriteFrame(this.prefix+this.curFrame.toString())},e.prototype.nextFrame=function(){if(this.isPlayFinish,this.curFrame++,this.curFrame>this.maxFrame&&(this.curFrame=this.minFrame,this.totalLoop++,this.loopCount>0&&this.totalLoop==this.loopCount))return null!=this.finishCallBack&&this.finishCallBack(),void(this.isPlayFinish=!0);this.showFrame()},e.prototype.setFinishCallBack=function(t){this.finishCallBack=t},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],App:[function(t,e){"use strict";cc._RF.push(e,"0b516ZiKChPYJ4b9e4XVysd","App");var o=function(){function t(){this.isDev=!1,this.cfgs={},this.isInTournament=!1,this.intervalHander=null,this.lastContextId=null}return t.prototype.init=function(){if(this.isDev=window.DEV,this.user=new User(this),this.platformMgr=new PlatfromMgr(this),this.pageMgr=new PageMgr(this),this.soundMgr=new SoundMgr,this.isDev&&(this.showDebugConsole(),cc.debug.setDisplayStats(!0)),(this.platformMgr.isWX||this.platformMgr.isFB)&&!this.isDev)try{console.log=function(){}}catch(t){}cc.director.getCollisionManager().enabled=!0},t.prototype.startContextTick=function(){var t=this;this.stopContextTick(),this.lastContextId=app.platformMgr.getContextID(),this.intervalHander=setInterval(function(){t.lastContextId!=app.platformMgr.getContextID()&&(t.stopContextTick(),app.platformMgr.logEvent("feed_share"))},16)},t.prototype.stopContextTick=function(){this.intervalHander&&(clearInterval(this.intervalHander),this.intervalHander=null)},t.prototype.showDebugConsole=function(){if(console.log("showDebugConsole"),window.document&&cc.sys.isMobile){var t=document.createElement("script");t.async=!0,t.src="vconsole.min.js",t.addEventListener("load",function(){new window.VConsole},!1),document.body.appendChild(t)}},t}();window.App=o,cc._RF.pop()},{}],AvatarBrick:[function(t,e,o){"use strict";cc._RF.push(e,"e2b4chKsENM6Lt1ohBed+B8","AvatarBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./SpecialBrick"),s=t("../Global"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e}return i(e,t),e.prototype.initAtatarBrick=function(t,e,o){var n=this;s.default.getNodeRootByIndex(0).addChild(this.node),this.node.y=s.default.getBirckPos(t,e).y-.38*this.node.height,this.node.x=.5*cc.winSize.width,this.node.active=!0,this.node.scale=.9,this.row=t,null!=o?o.photo&&cc.loader.load(o.photo,function(t,e){t||(n.avatar.spriteFrame=new cc.SpriteFrame(e))}):this.node.active=!1},r([p(cc.Sprite)],e.prototype,"avatar",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Global":"Global","./SpecialBrick":"SpecialBrick"}],BackgroundAdapter:[function(t,e,o){"use strict";cc._RF.push(e,"341ee9aPslC2ruNgoAEu92R","BackgroundAdapter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.Fit=0]="Fit",t[t.ScaleY=1]="ScaleY",t[t.ScaleYAndHeight=2]="ScaleYAndHeight",t[t.FitAndHeight=3]="FitAndHeight",t[t.Height=4]="Height",t[t.ScaleX=5]="ScaleX",t[t.Width=6]="Width"})(a||(a={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scaleType=a.Fit,e}return i(e,t),e.prototype.onLoad=function(){var t=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),e=this.node.width*t,o=this.node.height*t,n=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/o);if(this.scaleType==a.Fit)this.node.scale=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/o);else if(this.scaleType==a.ScaleY)console.log("scale = "+n+"this.node.name = "+this.node.name),this.node.setScale(1,n);else if(this.scaleType==a.FitAndHeight)this.node.scale=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/o),this.node.height=this.node.scale*this.node.height;else if(this.scaleType==a.Height){var i=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/o);this.node.height=i*this.node.height}else if(this.scaleType==a.Width){var r=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/o);this.node.width=r*this.node.width,console.log("this.node.width  = "+this.node.width+"scale = "+r)}else this.scaleType==a.ScaleX&&this.node.setScale(n,1)},r([l({type:cc.Enum(a),serializable:!0,displayName:"\u7f29\u653e\u7c7b\u578b"})],e.prototype,"scaleType",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],BaseDialog:[function(t,e){"use strict";cc._RF.push(e,"9e9eeQhN4dA2JM3IHzORydS","BaseDialog");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onUpdateData=function(){},e.prototype.getMaskOpacity=function(){return 200},e.prototype.getMaskColor=function(){return cc.Color.BLACK},e.prototype.runShowActions=function(t){this.onShow(),t&&t()},e.prototype.runHideActions=function(t){this.onHide(),t&&t()},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e}(cc.Component);window.BaseDialog=i,cc._RF.pop()},{}],BasePage:[function(t,e){"use strict";cc._RF.push(e,"4f091mkwX5MJI/+C6mbm/nO","BasePage");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onUpdateData=function(){},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e}(cc.Component);window.BasePage=i,cc._RF.pop()},{}],BaseShare:[function(t,e){"use strict";cc._RF.push(e,"7744dJrMz1HmY42K1bUYslM","BaseShare");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e}return n(e,t),e.prototype.initShare=function(){},e.prototype.initRT=function(){var t=this.node.getComponent(cc.Camera);t||(t=this.addComponent(cc.Camera)),t.enabled=!1,t.depth=-3,t.cullingMask=4294967295,t.clearFlags=0;var e=new cc.RenderTexture,o=cc.game._renderContext,n=Math.floor(this.node.width),i=Math.floor(this.node.height);t.targetTexture=e,e.initWithSize(n,i,o.STENCIL_INDEX8),this.camera=t},e.prototype.getBase64Data2=function(){var t=this.camera;cc.director.getScene().addChild(this.node),t.render(this.node),cc.director.getScene().removeChild(this.node);var e=t.targetTexture.readPixels(),o=t.targetTexture.width,n=t.targetTexture.height,i=document.createElement("canvas"),r=i.getContext("2d");i.width=o,i.height=n;for(var a=4*o,s=0;s<n;s++){for(var c=n-1-s,l=r.createImageData(o,1),p=c*o*4,u=0;u<a;u++)l.data[u]=e[p+u];r.putImageData(l,0,s)}return i.toDataURL("image/webp")},e.prototype.getBase64Data=function(t){var e=this;this.initRT(),this.scheduleOnce(function(){t(e.getBase64Data2())})},e.prototype.getImageDataAsync=function(){var t=this;return new Promise(function(e){t.getBase64Data(e)})},i([a],e)}(cc.Component));window.BaseShare=s,cc._RF.pop()},{}],BehaviorHelper:[function(t,e,o){"use strict";cc._RF.push(e,"38e24Ay9OVNYa+RWhFQmwn+","BehaviorHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Define"),s=t("../../common/EventMgr"),c=t("./elements/MovingBrick"),l=t("./elements/LifterBrick"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftCollisions=[],e.rightCollisons=[],e.headCollisions=[],e.footCollisions=[],e.bodyCollisions=[],e.bodyPosY=0,e.bodyPosX=0,e.bodyLastPosY=0,e.bodyLastPosX=0,e.maxY=a.default.invalidValue,e.lastCollisionCol=a.default.invalidValue,e.headNode=null,e.footNode=null,e.minY=a.default.invalidValue,e.moveBrick=null,e.lifterBrick=null,e}return i(e,t),e.prototype.addCollision=function(t,e){this.isExist(t,e)||e.push(t)},e.prototype.removeCollision=function(t,e){for(var o=0;o<e.length;o++)if(t.name==e[o].name)return null!=this.headNode&&t.name==this.headNode.name&&(this.maxY=a.default.invalidValue,0==this.headCollisions.length?this.headNode=null:this.headNode=this.headCollisions[0]),null!=this.moveBrick&&t.name==this.moveBrick.node.name&&(this.moveBrick.setFollowNode(null,!1),this.moveBrick=null,this.minY=a.default.invalidValue),this.footNode==t&&(this.footNode=null),null!=this.lifterBrick&&t.name==this.lifterBrick.node.name&&(this.lifterBrick.setFollowNode(null,!1),this.minY=a.default.invalidValue,this.lifterBrick=null),e.splice(o,1),!0;return!1},e.prototype.isExist=function(t,e){for(var o=0;o<e.length;o++)if(e[o].name==t.name)return!0;return!1},e.prototype.addLeft=function(t){this.addCollision(t,this.leftCollisions);var e=t.getComponent(l.default);null!=e&&(this.lifterBrick=e,this.lifterBrick.setFollowNode(this.node,!1))},e.prototype.addRight=function(t){this.addCollision(t,this.rightCollisons);var e=t.getComponent(l.default);null!=e&&(this.lifterBrick=e,this.lifterBrick.setFollowNode(this.node,!1))},e.prototype.addHead=function(t){this.headNode=t,this.addCollision(t,this.headCollisions)},e.prototype.addFoot=function(t){this.footNode=t,this.addCollision(t,this.footCollisions);var e=t.getComponent(c.default);null!=e&&this.moveBrick==e&&this.moveBrick.setFollowNode(this.node,!0);var o=this.footNode.getComponent(l.default);null!=o&&(this.lifterBrick=o,this.lifterBrick.setFollowNode(this.node,!0))},e.prototype.addBody=function(t){this.addCollision(t,this.bodyCollisions);var e=t.getComponent(c.default);null==this.moveBrick&&null!=e&&(this.moveBrick=e,this.moveBrick.setFollowNode(this.node))},e.prototype.removeAllCollision=function(t){this.removeCollision(t,this.leftCollisions),this.removeCollision(t,this.rightCollisons),this.removeCollision(t,this.headCollisions),this.removeCollision(t,this.footCollisions),this.removeCollision(t,this.bodyCollisions)},e.prototype.resetBodyPosY=function(t){this.bodyCollisions.length>0?this.bodyPosY=this.bodyCollisions[0].y+.5*this.bodyCollisions[0].height+.5*t.height:this.bodyPosY=0,this.bodyLastPosY=this.bodyPosY},e.prototype.clearAll=function(){this.leftCollisions=[],this.rightCollisons=[],this.headCollisions=[],this.footCollisions=[],this.bodyCollisions=[],this.headNode=null,this.footNode=null,this.bodyLastPosY=a.default.invalidValue,this.bodyPosY=a.default.invalidValue,this.bodyLastPosX=a.default.invalidValue,this.bodyPosX=a.default.invalidValue,this.minY=a.default.invalidValue,this.maxY=a.default.invalidValue},e.prototype.isDieCreviceUpDown=function(){if(this.footCollisions.length>0&&this.headCollisions.length>0){for(var t=0,e=0;e<this.footCollisions.length;e++)t=Math.max(this.footCollisions[e].y+.5*this.footCollisions[e].height,t);var o=9999;for(e=0;e<this.headCollisions.length;e++)o=Math.min(this.headCollisions[e].y-.5*this.headCollisions[e].height,o);return o-t<=this.node.height-1}return!1},e.prototype.isDieCreviceLeftRight=function(){if(this.leftCollisions.length>0&&this.rightCollisons.length>0){for(var t=0,e=0;e<this.leftCollisions.length;e++)t=Math.max(this.leftCollisions[e].x+.5*this.leftCollisions[e].width,t);var o=9999;for(e=0;e<this.rightCollisons.length;e++)o=Math.min(this.rightCollisons[e].x-.5*this.rightCollisons[e].width,o);return o-t<=this.node.width-1}return!1},e.prototype.checckCreviceDie=function(){this.isDieCreviceUpDown()?s.EVT.emit("GameCtrlRoleDead"):this.isDieCreviceLeftRight()&&s.EVT.emit("GameCtrlRoleDead")},e.prototype.updateLifterX=function(t,e){var o=[];o=-1==t?this.leftCollisions:this.rightCollisons;for(var n=0;n<o.length;n++){var i=o[n].getComponent(l.default);if(null!=i)return i.updatePosX(.3*e,this.node),.3}return 1},r([u],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","./Define":"Define","./elements/LifterBrick":"LifterBrick","./elements/MovingBrick":"MovingBrick"}],Behavior:[function(t,e,o){"use strict";cc._RF.push(e,"9015c+PrSlJa4yiPLT2GG5S","Behavior");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ROLEACTION=o.WALKDIR=void 0;var a,s=t("./Brick"),c=t("./Define"),l=t("../manager/BrickManager"),p=t("./BehaviorHelper"),u=t("./Global"),h=cc._decorator,d=h.ccclass;h.property,function(t){t[t.RIGHT=1]="RIGHT",t[t.LEFT=-1]="LEFT"}(o.WALKDIR||(o.WALKDIR={})),function(t){t[t.NONE=0]="NONE",t[t.WALKING=1]="WALKING",t[t.JUMPING=2]="JUMPING",t[t.DROPING=3]="DROPING",t[t.GLIDEDROPING=4]="GLIDEDROPING",t[t.POPUP=5]="POPUP",t[t.VERTICAL_DROPING=6]="VERTICAL_DROPING",t[t.LIFTER=7]="LIFTER"}(a=o.ROLEACTION||(o.ROLEACTION={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=cc.v2(0,0),e.maxSpeed=cc.v2(260,800),e.gravity=-1500,e.jumpSpeed=800,e._lastSpeedY=0,e.collisionX=1,e.collisionY=0,e.jumping=!0,e.jumpCount=2,e.touchingNumber=0,e.curAction=a.NONE,e.lastAction=a.NONE,e.helper=null,e.collisionCallBack=null,e.actionCallBack=null,e.changeDirCallBack=null,e.isPauseTag=!1,e.tempNode=null,e.lastTempNode=null,e.time=0,e.tempDt=.02,e}return i(e,t),e.prototype.onEnable=function(){},e.prototype.onLoad=function(){this.collisionX=1,this.collisionY=0,this.jumping=!0,this.touchingNumber=0,this.helper=this.node.addComponent(p.default),this.setCurAction(a.DROPING)},e.prototype.onCollisionEnter=function(t,e){this.node.color=cc.Color.RED,this.touchingNumber++;var o=t.world.aabb,n=t.world.preAabb.clone(),i=e.world.aabb,r=e.world.preAabb.clone();r.x=i.x,n.x=o.x;var c=t.node.getComponent(s.default);if(null!=c)if(this.helper.addBody(t.node),c.getTypeId()==l.BRICKTYPE.MOVEBRICK&&(this.lastTempNode=this.tempNode,this.tempNode=t.node),c.isCanCollect()||c.isEventBrick()||c.isPopupBrick())this.collisionCallBack(2,t.node);else{if(cc.Intersection.rectRect(r,n)){if(this.curAction==a.WALKING&&(i.yMax>o.yMax?Math.abs(i.yMin-o.yMax):Math.abs(o.yMin-i.yMax))<5)return this.helper.addFoot(t.node),this.collisionCallBack(0,t.node),this.jumping=!1,void(r.xMax>n.xMax?this.node.x=n.xMax-this.node.parent.x:this.node.x=n.xMin-r.width-this.node.parent.x);if(c.isCanAcrossLeftRight())return;return r.xMax>n.xMax?(c.isCanLeftMove()||(this.node.x=n.xMax-this.node.parent.x,this.collisionX=1),this.helper.addLeft(t.node)):r.xMin<n.xMin&&(c.isCanLeftMove()||(this.node.x=n.xMin-r.width-this.node.parent.x,this.collisionX=-1),this.helper.addRight(t.node)),this.collisionCallBack(2,t.node),0!=this.speed.y&&(c.isCanAcrossDown()||(this.setCurAction(a.GLIDEDROPING),this.jumpCount=2)),null!=this.changeDirCallBack&&this.changeDirCallBack(-1*this.collisionX),this.curAction==a.POPUP?void this.setCurAction(a.DROPING):void 0}if(r.y=i.y,n.y=o.y,cc.Intersection.rectRect(r,n)){if(this.curAction==a.GLIDEDROPING||this.curAction==a.VERTICAL_DROPING||null!=this.helper.moveBrick&&!c.isCanAcrossDown())if(i.xMax<o.xMax){if(Math.abs(o.xMin-i.xMax)<5)if(c.isCanStampDeath())this.collisionCallBack(0,t.node),this.helper.addFoot(t.node);else if(null==l.default.getInstance().getBrickByRowCol(c.getRow(),c.getCol()-1))return this.node.x=n.xMin-r.width-this.node.parent.x,this.helper.addRight(t.node),this.collisionCallBack(2,t.node),this.collisionX=-1,null!=this.changeDirCallBack&&this.changeDirCallBack(-1*this.collisionX),void(this.curAction==a.VERTICAL_DROPING&&this.setCurAction(a.GLIDEDROPING))}else if(Math.abs(i.xMin-o.xMax)<5)if(c.isCanStampDeath())this.collisionCallBack(0,t.node),this.helper.addFoot(t.node);else if(null==l.default.getInstance().getBrickByRowCol(c.getRow(),c.getCol()+1))return this.node.x=n.xMax-this.node.parent.x,this.helper.addLeft(t.node),this.collisionCallBack(2,t.node),this.collisionX=1,null!=this.changeDirCallBack&&this.changeDirCallBack(-1*this.collisionX),void(this.curAction==a.VERTICAL_DROPING&&this.setCurAction(a.GLIDEDROPING));if(r.yMax>n.yMax){this.collisionCallBack(0,t.node),this.node.y=n.yMax-this.node.parent.y;var p=l.default.getInstance().getBrickByRowCol(c.getRow()+c.getOccupyRow(),c.getCol(),u.default.isInHouse);if(null!=p&&p.getTypeId()==c.getTypeId())return;this.helper.addFoot(t.node),this.jumpCount=2,this.collisionY=-1,this.setCurAction(a.WALKING),c.isCanStampDeath()||(this.jumping=!1,this.speed.y=0)}else if(r.yMin<n.yMin){if(this.collisionCallBack(1,t.node),this.node.y=n.yMin-r.height-this.node.parent.y,c.isCanAcrossDown())return;this.helper.addHead(t.node),c.getTypeId()!=l.BRICKTYPE.MOVEBRICK&&(this.speed.y=0),this.collisionY=1}if(this.curAction==a.POPUP)return void this.setCurAction(a.DROPING);this._lastSpeedY=0}}},e.prototype.onCollisionStay=function(t){var e=t.node.getComponent("MovingBrick");e&&(this.node.y+=e.offsetPos.y,e.isUnderRole||(this.node.x+=e.offsetPos.x))},e.prototype.onCollisionExit=function(t){this.touchingNumber--,this.helper.removeAllCollision(t.node),0===this.touchingNumber?(this.node.color=cc.Color.WHITE,this.jumping=!0,this.curAction==a.GLIDEDROPING&&(this.setCurAction(a.VERTICAL_DROPING),this.speed.y=0)):0==this.helper.footCollisions.length&&(this.jumping=!0,this.speed.y)},e.prototype.update=function(){if(!this.isPauseTag&&this.curAction!=a.NONE&&this.curAction!=a.POPUP){this.jumping&&(this.speed.y+=this.gravity*this.tempDt,Math.abs(this.speed.y)>this.maxSpeed.y&&(this.speed.y=this.speed.y>0?this.maxSpeed.y:-this.maxSpeed.y),this.curAction!=a.GLIDEDROPING&&this.curAction!=a.VERTICAL_DROPING&&(this.speed.y>0?this.setCurAction(a.JUMPING):this.setCurAction(a.DROPING)));var t=this.curAction==a.GLIDEDROPING?.2:1,e=this.node.y+(this._lastSpeedY+this.speed.y)*this.tempDt*.6*t;if(this.speed.y>0){if(null!=this.helper.headNode){var o=this.helper.headNode.parent.convertToWorldSpaceAR(this.helper.headNode.position);this.helper.maxY=o.y-.5*this.helper.headNode.height-this.node.height,this.helper.maxY<=0&&(console.log("\u5904\u7406\u590d\u6d3bcheckPoint \u73a9\u5bb6\u8dd1\u51fa\u5c4f\u5e55"),this.helper.maxY=c.default.invalidValue)}this.helper.maxY!=c.default.invalidValue&&(e=Math.min(e,this.helper.maxY))>=this.helper.maxY&&(this.speed.y=-1)}if(null!=this.helper.footNode&&(this.helper.minY=this.helper.footNode.y+.5*this.helper.footNode.height-this.node.height,this.helper.minY!=c.default.invalidValue&&(e=Math.max(e,this.helper.minY))),this._lastSpeedY=this.speed.y,this.node.y=e,this.curAction!=a.GLIDEDROPING&&this.curAction!=a.VERTICAL_DROPING&&this.curAction!=a.LIFTER){this.speed.x=this.collisionX;var n=this.speed.x*this.tempDt*this.maxSpeed.x,i=this.helper.updateLifterX(this.speed.x,n);this.node.x+=n*i}}},e.prototype.jump=function(){return 0!=this.jumpCount&&(this.setCurAction(a.JUMPING),this.jumpCount--,this.jumping=!0,this.speed.y=this.jumpSpeed>this.maxSpeed.y?this.maxSpeed.y:this.jumpSpeed,this._lastSpeedY=this.jumpSpeed>this.maxSpeed.y?this.maxSpeed.y:this.jumpSpeed,app.soundMgr.play(c.default.soundJump),!0)},e.prototype.minJump=function(){this.setCurAction(a.JUMPING),this.jumping=!0,this.speed.y=this.jumpSpeed>this.maxSpeed.y?this.maxSpeed.y:this.jumpSpeed,this.speed.y=.6*this.speed.y,this._lastSpeedY=.6*this.speed.y},e.prototype.getJumpCount=function(){return this.jumpCount},e.prototype.getCurAction=function(){return this.curAction},e.prototype.getLastAction=function(){return this.lastAction},e.prototype.getMoveDir=function(){return this.speed.x},e.prototype.setCurAction=function(t){if(this.curAction!=t){switch(t){case a.WALKING:case a.JUMPING:case a.DROPING:case a.GLIDEDROPING:}this.lastAction=this.curAction,this.curAction=t,null!=this.actionCallBack&&this.actionCallBack(this.curAction)}},e.prototype.setCollisionStatus=function(t){for(var e=this.node.getComponents(cc.BoxCollider),o=0;o<e.length;o++)e[o].enabled=t},e.prototype.clearAll=function(){this.helper.clearAll(),this.jumping=!0,this.speed.y=-1,null!=this.changeDirCallBack&&this.changeDirCallBack(-1*this.collisionX)},e.prototype.pause=function(t){t!=this.isPauseTag&&(this.isPauseTag=t,this.isPauseTag?(this.lastAction=this.curAction,this.setCurAction(a.NONE)):this.setCurAction(this.lastAction))},e.prototype.setMoveDir=function(t){this.collisionX=t},e.prototype.setMoveSpeed=function(t){this.maxSpeed.x=t},e.prototype.setGravity=function(t){this.gravity=t},e.prototype.checckCreviceDie=function(){return this.helper.checckCreviceDie()},e.prototype.lifterAction=function(){return this.curAction!=a.JUMPING&&(this.setCurAction(a.LIFTER),!0)},e.prototype.changeDir=function(){this.collisionX=-1*this.collisionX,null!=this.changeDirCallBack&&this.changeDirCallBack(-1*this.collisionX)},r([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","./BehaviorHelper":"BehaviorHelper","./Brick":"Brick","./Define":"Define","./Global":"Global"}],BoxBrick:[function(t,e,o){"use strict";cc._RF.push(e,"1f38fhenTBDnLyJ9kFIshFY","BoxBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BOXOPENTYPE=o.BOXTYPE=void 0;var a,s,c=t("../Brick"),l=t("../../../common/EventMgr"),p=t("../Define"),u=t("../Global"),h=cc._decorator,d=h.ccclass,f=h.property;(function(t){t[t.PASSLEVEL=1]="PASSLEVEL",t[t.REWARD_GOLD=2]="REWARD_GOLD"})(a=o.BOXTYPE||(o.BOXTYPE={})),function(t){t[t.COIN=1]="COIN",t[t.VIDEO=2]="VIDEO"}(s=o.BOXOPENTYPE||(o.BOXOPENTYPE={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opened=!1,e.boxType=a.PASSLEVEL,e.node_light=null,e.node_dark=null,e.node_fruit=null,e.node_video=null,e.text_count=null,e.node_archivedTag=null,e.boxFrames=[],e.boxOpenType=s.COIN,e.isBlackStatus=!1,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.isBlackStatus=!1,this.node_archivedTag.active=!1,this.boxOpenType=this.mapData.subType,this.opened=!1,this.resetBox(!0)},e.prototype.openBox=function(){this.opened||(this.boxOpenType==s.COIN?app.user.getCoinNum()>=p.default.openBoxSpendCoinCount&&!this.isBlackStatus?(app.user.addCoinNum(-1*p.default.openBoxSpendCoinCount,!0,!0),l.EVT.emit("GameMainPageUISubGoldEffect"),this.opened=!0,l.EVT.emit("GameCtrlBoxOpen",this),this.resetBox(!1),this.node_archivedTag.active=!0,app.platformMgr.logEvent("OpenBox",{type:"coin"})):u.default.shakeAction(this.icon.node,1):this.boxOpenType==s.VIDEO&&(app.platformMgr.isVideoLoad()&&!this.isBlackStatus?app.platformMgr.logEvent("OpenBox",{type:"video"}):u.default.shakeAction(this.icon.node,1)))},e.prototype.changeBoxToUnOpen=function(){this.opened=!1,this.node_archivedTag.active=!1,this.resetBox(!0)},e.prototype.getBoxType=function(){return this.boxType},e.prototype.changeStyle=function(){},e.prototype.resetBox=function(t){this.node_fruit.active=!1,this.node_video.active=!1,this.node_dark.active=!1,this.node_light.active=!1,this.icon.spriteFrame=this.boxFrames[0],this.isBlackStatus=!1,this.node.stopAllActions(),t&&(this.node.y=this.node.y-35),this.boxOpenType==s.COIN?(this.node_fruit.active=!0,this.text_count.string=p.default.openBoxSpendCoinCount.toString(),app.user.isCoinEnough(p.default.openBoxSpendCoinCount)?this.node_light.active=!0:(this.node_dark.active=!0,this.icon.spriteFrame=this.boxFrames[2])):this.boxOpenType==s.VIDEO&&(this.node_video.active=!0,app.platformMgr.isVideoLoad()?this.node_light.active=!0:(this.node_dark.active=!0,this.icon.spriteFrame=this.boxFrames[2])),this.opened&&(this.icon.spriteFrame=t?this.boxFrames[2]:this.boxFrames[1],this.node_dark.active=!0,this.node_light.active=!1)},e.prototype.changeToBlack=function(){this.isBlackStatus=!0,this.node_dark.active=!0,this.node_light.active=!1,this.icon.spriteFrame=this.boxFrames[2]},r([f(cc.Node)],e.prototype,"node_light",void 0),r([f(cc.Node)],e.prototype,"node_dark",void 0),r([f(cc.Node)],e.prototype,"node_fruit",void 0),r([f(cc.Node)],e.prototype,"node_video",void 0),r([f(cc.Label)],e.prototype,"text_count",void 0),r([f(cc.Node)],e.prototype,"node_archivedTag",void 0),r([f(cc.SpriteFrame)],e.prototype,"boxFrames",void 0),r([d],e)}(c.default);o.default=g,cc._RF.pop()},{"../../../common/EventMgr":"EventMgr","../Brick":"Brick","../Define":"Define","../Global":"Global"}],Breath:[function(t,e,o){"use strict";cc._RF.push(e,"80bf9qd7xtESKNT6zb2XB3B","Breath");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever())},e.prototype.stopBreath=function(){this.node.stopAllActions(),this.node.scale=1},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],BrickCollisionGroupHelper:[function(t,e,o){"use strict";cc._RF.push(e,"94b09TT8TpEn6mIg/8bGSyD","BrickCollisionGroupHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BrickCollisionGroup"),i=t("../manager/BrickManager"),r=t("./Global"),a=t("./Define"),s=t("./Brick"),c=function(){function t(){this.poolArr=new Map,this.leftGroups=[],this.rightGroups=[],this.horizontalGroups=new Map,this.bricks=null}return t.prototype.initPool=function(){for(var t=0;t<50;t++)this.putPool(i.BRICKTYPE.WALL,cc.instantiate(i.default.getInstance().brickMapDataHelper.getCachePrefabByRes("wallBrick")));for(t=0;t<20;t++)this.putPool(i.BRICKTYPE.CLOUDBRICK,cc.instantiate(i.default.getInstance().brickMapDataHelper.getCachePrefabByRes("cloudBrick")))},t.prototype.updateCollisionGroup=function(t){for(var e=0;e<this.leftGroups.length;e++)this.leftGroups[e].node.active=!1;for(e=0;e<this.rightGroups.length;e++)this.rightGroups[e].node.active=!1;this.bricks=t;var o=i.default.getInstance().getShowMinRow(),n=i.default.getInstance().getShowMaxRow();this.handerGroupByCol(0,o,n,this.leftGroups,0),this.handerGroupByCol(13,o,n,this.rightGroups,0),this.handerGroupHorizontal()},t.prototype.handerGroupByCol=function(t,e,o,n,r){for(var a=e;a<=o;a++){if(null==this.bricks[a]){this.createVerticalGroup(e,a,t,n,r),e!=a&&r++,this.handerGroupByCol(t,a+1,o,n,r);break}if(null==this.bricks[a][t]){this.createVerticalGroup(e,a,t,n,r),e!=a&&r++,this.handerGroupByCol(t,a+1,o,n,r);break}if(this.bricks[a][t].getTypeId()!=i.BRICKTYPE.WALL){this.createVerticalGroup(e,a,t,n,r),e!=a&&r++,this.handerGroupByCol(t,a+1,o,n,r);break}}},t.prototype.createVerticalGroup=function(t,e,o,s,c){if(t!=e){var l=0;(e-t)%2==0&&(l=.5*a.default.brickHeight);var p=s[c],u=null,h=Math.floor(.5*(e-t)),d=r.default.getBirckPos(h+t,o).add(cc.v2(0,-l));null==p?(u=this.createCollisionNode(i.BRICKTYPE.WALL),s.push(u.getComponent(n.default))):u=p.node,u.width=a.default.brickWidth,u.height=(e-t)*a.default.brickHeight,u.position=d,u.active=!0,u.getComponent(cc.BoxCollider).size=u.getContentSize(),u.getComponent(cc.BoxCollider).enabled=!0,u.name=t.toString()+","+o.toString();for(var f=t;f<e;f++)this.bricks[f][o].setCollisionStatus(!1)}},t.prototype.handerGroupHorizontal=function(){for(var t=i.default.getInstance().getShowMinRow(),e=i.default.getInstance().getShowMaxRow(),o=t;o<e;o++)if(null!=this.bricks[o]){for(var n=!0,r=1;r<a.default.brickCol;r++){var s=this.bricks[o][r];if(null==s||s.getTypeId()!=i.BRICKTYPE.CLOUDBRICK){n=!1;break}}n&&this.createHorizontalGroup(o,12,i.BRICKTYPE.CLOUDBRICK)}},t.prototype.createHorizontalGroup=function(t,e,o){if(!this.horizontalGroups.has(t.toString())){var i=this.createCollisionNode(o),s=r.default.getBirckPos(t,7).add(cc.v2(.5*-a.default.brickWidth,0));i.width=a.default.brickWidth*e,i.height=a.default.brickHeight,i.position=s,i.active=!0,i.getComponent(cc.BoxCollider).size=i.getContentSize();var c=i.getComponent(n.default);this.horizontalGroups.set(t.toString(),c),c.setBelongInfo(t),i.getComponent(cc.BoxCollider).enabled=!0,i.name=t.toString()+",1";for(var l=1;l<=12;l++)this.bricks[t][l].setCollisionStatus(!1)}},t.prototype.removeHorizontalGroupByRow=function(t){this.horizontalGroups.has(t.toString())&&(this.putPool(i.BRICKTYPE.CLOUDBRICK,this.horizontalGroups.get(t.toString()).node),this.horizontalGroups.get(t.toString()).node.removeFromParent(),this.horizontalGroups.delete(t.toString()))},t.prototype.createCollisionNode=function(t){var e=this.getPool(t);return e.getComponent(s.default).initBrick(i.brickInfo[t],new i.MapData(0,0,t,0,"",null,0)),i.default.getInstance().getMysteryHouseRoot().addChild(e),e.addComponent(n.default).isInitTag=!0,e.addComponent(cc.Sprite).spriteFrame=r.default.brickAtlas.getSpriteFrame("brick_1_10"),t==i.BRICKTYPE.WALL&&(e.group="wall"),e.opacity=180,e.color=cc.Color.BLACK,e},t.prototype.printInfo=function(){console.log("\u78b0\u649e\u7ec4\u7684\u6570\u91cf \u6a2a\u5411 size  = "+this.horizontalGroups.size);for(var t=0,e=0;e<this.leftGroups.length;e++)this.leftGroups[e].node.active&&t++;var o=0;for(e=0;e<this.rightGroups.length;e++)this.rightGroups[e].node.active&&o++;console.log("\u78b0\u649e\u7ec4\u7684\u6570\u91cf \u7eb5\u5411\u5de6\u4fa7 size = "+t.toString()),console.log("\u78b0\u649e\u7ec4\u7684\u6570\u91cf \u7eb5\u5411\u53f3\u4fa7 size = "+o.toString())},t.prototype.putPool=function(t,e,o){void 0===o&&(o=-1);var n=i.brickInfo[t].res;if(-1!=o&&(n+=o.toString()),this.poolArr.has(n))(r=this.poolArr.get(n)).put(e);else{var r=new cc.NodePool;this.poolArr.set(n,r),r.put(e)}},t.prototype.getPool=function(t,e){void 0===e&&(e=-1);var o=i.brickInfo[t].res;if(-1!=e&&(o+=e.toString()),this.poolArr.has(o)){var n=this.poolArr.get(o);if(n.size()>0)return console.log("\u4f7f\u7528\u7f13\u5b58\u8d44\u6e90\u521b\u5efa"),n.get()}return cc.instantiate(i.default.getInstance().brickMapDataHelper.getCachePrefabByRes(o))},t}();o.default=c,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","./Brick":"Brick","./BrickCollisionGroup":"BrickCollisionGroup","./Define":"Define","./Global":"Global"}],BrickCollisionGroup:[function(t,e,o){"use strict";cc._RF.push(e,"81054wrMhxL1II9EC9axTSE","BrickCollisionGroup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Global"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.isInitTag=!1,e.belongInfo={},e}return i(e,t),e.prototype.updateCollisionGroupByCol=function(t){a.default.getBirckPos(0,t)},e.prototype.setBelongInfo=function(t){this.belongInfo=t},r([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./Global":"Global"}],BrickHurtHelper:[function(t,e,o){"use strict";cc._RF.push(e,"70f80mcNaxGoZsn1MUXPzrT","BrickHurtHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manager/BrickManager"),s=t("./elements/HurtBrick"),c=t("./Define"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hurtNodeRoot=null,e}return i(e,t),e.prototype.removeAllHurts=function(){for(var t=0;t<this.hurtNodeRoot.childrenCount;t++)this.hurtNodeRoot.children[t].getComponent(s.default).removeBrickSelf()},e.prototype.initHurts=function(t){this.hurtNodeRoot=this.node.children[0],this.removeAllHurts();for(var e=t.split(","),o=0;o<e.length;o++){var n=Number(e[o]),i=this.getHurtPosArr(n);this.initHurtsByPosArr(i,n)}},e.prototype.initHurtsByPosArr=function(t,e){for(var o=0;o<t.length;o++){var n=a.default.getInstance().getPool(a.BRICKTYPE.HURTBRICK);this.hurtNodeRoot.addChild(n);var i=this.getHurtData(e);n.getComponent(s.default).initBrick(a.brickInfo[a.BRICKTYPE.HURTBRICK],i),n.getComponent(cc.BoxCollider).enabled=!0,n.position=t[o]}},e.prototype.getHurtPosArr=function(t){var e=[];if(t==c.DIR.UP||t==c.DIR.DOWN){var o=t==c.DIR.UP?1:-1,n=t==c.DIR.UP?15:-15;this.node.width>2*c.default.brickWidth?(e.push(cc.v2(-50,n+o*this.node.height*.5)),e.push(cc.v2(0,n+o*this.node.height*.5)),e.push(cc.v2(50,n+o*this.node.height*.5))):(e.push(cc.v2(-25,n+o*this.node.height*.5)),e.push(cc.v2(25,n+o*this.node.height*.5)))}else if(t==c.DIR.LEFT||t==c.DIR.RIGHT){o=t==c.DIR.LEFT?-1:1;var i=t==c.DIR.LEFT?-15:15;this.node.height>2*c.default.brickHeight?(e.push(cc.v2(i+o*this.node.width*.5,-50)),e.push(cc.v2(i+o*this.node.width*.5,0)),e.push(cc.v2(i+o*this.node.width*.5,50))):(e.push(cc.v2(i+o*this.node.width*.5,-25)),e.push(cc.v2(i+o*this.node.width*.5,25)))}return e},e.prototype.getHurtData=function(t){var e=0;switch(t){case c.DIR.UP:e=84;break;case c.DIR.DOWN:e=70;break;case c.DIR.LEFT:e=113;break;case c.DIR.RIGHT:e=128}return{col:0,row:0,gid:e,type:6,res:"hurtBrick",extraInfo:{dir:t}}},r([p],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","./Define":"Define","./elements/HurtBrick":"HurtBrick"}],BrickManager:[function(t,e,o){"use strict";cc._RF.push(e,"13228Qie3dL0ZfPH8TXB2SF","BrickManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MapData=o.brickInfo=o.BRICKTYPE=void 0;var a,s=t("../logic/Brick"),c=t("../logic/Global"),l=t("../../common/EventMgr"),p=t("../logic/BrickMapDataHelper"),u=t("./MysteryHouseManager"),h=t("../logic/Define"),d=t("./BulletManager"),f=t("../logic/monsters/MonsterBehaviorMove"),g=t("../logic/BrickCollisionGroupHelper"),y=t("../logic/monsters/Monster"),m=t("./CheckPointManager");(function(t){t[t.NONE=0]="NONE",t[t.WALL=1]="WALL",t[t.MOVEBRICK=2]="MOVEBRICK",t[t.PROPBRICK=3]="PROPBRICK",t[t.CLOUDBRICK=4]="CLOUDBRICK",t[t.BOXBRICK=5]="BOXBRICK",t[t.HURTBRICK=6]="HURTBRICK",t[t.MONSTER_TYPE1=7]="MONSTER_TYPE1",t[t.MONSTER_TYPE2=8]="MONSTER_TYPE2",t[t.MONSTER_TYPE3=9]="MONSTER_TYPE3",t[t.EVENTBRICK=10]="EVENTBRICK",t[t.DOORBRICK=11]="DOORBRICK",t[t.POPUPBRICK=12]="POPUPBRICK",t[t.BROKENBRICK=13]="BROKENBRICK",t[t.ADORNBRICK=14]="ADORNBRICK",t[t.ROTASIONBRICK=15]="ROTASIONBRICK",t[t.LIFTERBRICK=16]="LIFTERBRICK",t[t.RANDOMDIR_MOVEBRICK=17]="RANDOMDIR_MOVEBRICK",t[t.MOVE_HURT_BRICK=18]="MOVE_HURT_BRICK",t[t.TURNTABLEBRICK=19]="TURNTABLEBRICK",t[t.FROZENBRICK=20]="FROZENBRICK",t[t.SWITCHBRICK=21]="SWITCHBRICK",t[t.SHAREBRICK=22]="SHAREBRICK",t[t.BROKENPOWERBRICK=23]="BROKENPOWERBRICK",t[t.HALLOFFAMEBRICK=24]="HALLOFFAMEBRICK",t[t.MOVIEBRICK=25]="MOVIEBRICK",t[t.NEONLIGHTBRICK=26]="NEONLIGHTBRICK"})(a=o.BRICKTYPE||(o.BRICKTYPE={})),o.brickInfo={1:{res:"wallBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},2:{res:"moveBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},3:{res:"collectBrick",isAcrossDown:!0,isCloud:!1,isCollect:!0,isHurt:!1},4:{res:"cloudBrick",isAcrossDown:!0,isCloud:!0,isCollect:!1,isHurt:!1},5:{res:"boxBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},6:{res:"hurtBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!0},7:{res:"monster",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!0},8:{res:"monster",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!0,stampDeath:!0},9:{res:"monster",isAcrossDown:!1,isCloud:!1,isCollect:!1},10:{res:"eventBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isEventBrick:!0},11:{res:"doorBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},12:{res:"popupBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1,isPopup:!0},13:{res:"brokenBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},14:{res:"adornBrick"},15:{res:"rotasionBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},16:{res:"lifterBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},17:{res:"randomDirMoveBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},18:{res:"moveHurtBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!0},19:{res:"turntableBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},20:{res:"frozenBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},21:{res:"switch",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},22:{res:"share",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},23:{res:"brokenPowerBrick",isAcrossDown:!1,isCloud:!1,isCollect:!1,isHurt:!1},24:{res:"hallOfFameBrick"},25:{res:"movieBrick"},26:{res:"neonLightBrick"}};var v=function(t,e,o,n,i,r,a){this.row=0,this.col=0,this.gid=0,this.type=0,this.subType=0,this.res="",this.extraInfo=null,this.row=t,this.col=e,this.type=o,this.subType=a,this.gid=n,this.res=i,this.extraInfo=r};o.MapData=v;var _=cc._decorator.ccclass,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brickRoot=null,e.mysteryHouseRoot=null,e.bricks=new Array,e.mapDataList=new Array,e.isInitPrefab=!0,e.isLoadMapDataTag=!1,e.wallNodePool=new cc.NodePool,e.brickMapDataHelper=new p.default(h.default.mapMaxRow,0,0),e.rightDoorBrick=null,e.leftDoorBrick=null,e.doorOpenInfo=new Map,e.poolArr=new Map,e.curGroupIndex=-1,e.groupMaxIndex=0,e.groupMinIndex=0,e.lastRow=-100,e.offsetRow=45,e.collectPropInfo=new Array,e.behaviorBirck=[],e.deadMonsterInfos=new Array,e.collisionGroupHelper=new g.default,e.isShowMonsterTag=!0,e.levelInfo=[],e.curLevel=1,e.maxLevel=31,e.showMaxRow=0,e.showMinRow=0,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.getInstance=function(){return this.instance},e.prototype.preLoadJsonData=function(t,e){var o=this;this.brickMapDataHelper.cacheTurnTablePrefab(),this.brickMapDataHelper.preLoadBrickPrefabsByDir(c.default.getBricksDir(),function(){o.brickMapDataHelper.preLoadPropertiesData(c.default.getLevelJsonDir(t),function(){if(m.default.getInstance().cacheCheckPoint(),0==o.wallNodePool.size()){for(var t=0;t<450;t++)o.putPool(a.WALL,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("wallBrick")));for(t=0;t<150;t++)o.putPool(a.CLOUDBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("cloudBrick")));for(t=0;t<150;t++)o.putPool(a.PROPBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("collectBrick")));for(t=0;t<2;t++)o.putPool(a.DOORBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("doorBrick")));for(t=0;t<24;t++)o.putPool(a.EVENTBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("eventBrick")));for(t=0;t<15;t++)o.putPool(a.BROKENBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("brokenBrick")));for(t=0;t<30;t++)o.putPool(a.HURTBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("hurtBrick")));for(t=0;t<8;t++)o.putPool(a.MOVEBRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("moveBrick")));for(t=0;t<5;t++)o.putPool(a.MOVE_HURT_BRICK,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("moveHurtBrick")));for(t=0;t<15;t++)o.putPool(a.MONSTER_TYPE3,cc.instantiate(o.brickMapDataHelper.getCachePrefabByRes("monster4")),4)}e()})})},e.prototype.initBrickRoot=function(t,e){this.brickRoot=t,this.mysteryHouseRoot=e,console.log("\u6e38\u620f\u6570\u636e\u52a0\u8f7d\u5b8c\u6210\u8fdb\u5165\u6e38\u620f this.curLevel = "+this.curLevel),c.default.lastLevel=app.user.getLastLevel(),console.log("Global.lastLevel = "+c.default.lastLevel),this.curLevel=Math.max(c.default.lastLevel,1),this.loadMapDataByLevel(this.curLevel)},e.prototype.getMysteryHouseRoot=function(){return this.brickRoot},e.prototype.loadMapDataByLevel=function(t){this.isLoadMapDataTag||(console.log("\u52a0\u8f7d\u5173\u5361\u6570\u636e"),this.isLoadMapDataTag=!0,this.brickMapDataHelper.loadMapDataByLevel(t,this.onLoadFinish.bind(this)),l.EVT.emit("GameCtrlShowDesc","\u52a0\u8f7d\u5173\u5361\u6570\u636e"))},e.prototype.onLoadFinish=function(){this.isLoadMapDataTag=!1,this.isInitPrefab&&(this.isInitPrefab=!1,this.mapDataList=this.brickMapDataHelper.getMapDatas(),this.updateGroupIndexByPosY(0,!1),l.EVT.emit("GameCtrlBrickInitFinished"),u.default.getInstance().preLoadMysteryHouseData())},e.prototype.createBrickByData=function(t,e){if(!this.isCanCreate(t.row,t.col))return null;if(null==this.brickMapDataHelper.getCachePrefabByRes(t.res))return console.log("createBrickByData \u8d44\u6e90\u9519\u8bef ",t.res),null;var n=null;n=p.default.isMonsterType(t.type)?this.getPool(t.type,t.extraInfo.monsterId):this.getPool(t.type),t.type==a.LIFTERBRICK||t.type==a.POPUPBRICK||t.type==a.DOORBRICK?c.default.getNodeRootMaxLayer().addChild(n):this.getBirckRootNodeByType(t.type).addChild(n),n.position=c.default.getBirckPos(t.row,t.col),n.opacity=255;var i=n.getComponent(s.default);return e?i.show():i.hide(),i.initBrick(o.brickInfo[t.type],t),null==this.bricks[t.row]&&(this.bricks[t.row]=[]),this.bricks[t.row][t.col]=i,null!=i.getComponent(f.default)&&this.addBehaviorMonsters(i),n},e.prototype.getBirckRootNodeByType=function(t){return t==a.CLOUDBRICK?c.default.getNodeRootByIndex(2):t==a.MOVEBRICK?c.default.getNodeRootByIndex(3):t==a.PROPBRICK||t==a.HALLOFFAMEBRICK||t==a.BROKENPOWERBRICK?c.default.getNodeRootByIndex(0):c.default.getNodeRootByIndex(1)},e.prototype.getBrickByRowCol=function(t,e,o){return void 0===o&&(o=!1),o?u.default.getInstance().getBrickByRowCol(t,e):t>=this.bricks.length?null:null==this.bricks[t]?null:e>=this.bricks[t].length?null:this.bricks[t][e]},e.prototype.getBlicksByRow=function(t){var e=[];if(t>=this.bricks.length)return e;if(null==this.bricks[t])return e;for(var o=0;o<this.bricks[t].length;o++)null!=this.bricks[t][o]&&e.push(this.bricks[t][o]);return e},e.prototype.removeBrickByRowCol=function(t,e){null!=this.bricks[t]&&null!=this.bricks[t][e]&&(this.removeBehaviorMonsters(t,e),this.bricks[t][e].removeBrickSelf(),this.bricks[t][e]=null)},e.prototype.recordPassLevelInfo=function(t,e){var o=this,n=t.toString()+"_"+e.toString();this.doorOpenInfo.forEach(function(t,e){e==n&&o.doorOpenInfo.set(e,2)})},e.prototype.openDoor=function(t){this.handlerOpenDoor(t,!0,this.rightDoorBrick),this.handlerOpenDoor(t,!1,this.leftDoorBrick)},e.prototype.closeDoor=function(t){if(t){if(null!=this.rightDoorBrick){this.rightDoorBrick.closeDoor();var e=this.rightDoorBrick.getRow()+"_"+this.rightDoorBrick.getCol();this.doorOpenInfo.set(e,2),this.rightDoorBrick=null}}else null!=this.leftDoorBrick&&(this.leftDoorBrick.closeDoor(),e=this.leftDoorBrick.getRow()+"_"+this.leftDoorBrick.getCol(),this.doorOpenInfo.set(e,2),this.leftDoorBrick=null)},e.prototype.clearDoorInfo=function(){var t=this;this.doorOpenInfo.forEach(function(e,o){2!=e&&t.doorOpenInfo.set(o,0)}),this.rightDoorBrick=null,this.leftDoorBrick=null},e.prototype.clearDoorBrick=function(t,e){null!=this.rightDoorBrick&&this.rightDoorBrick.getRow()==t&&this.rightDoorBrick.getCol()==e&&(this.rightDoorBrick=null),null!=this.leftDoorBrick&&this.leftDoorBrick.getRow()==t&&this.leftDoorBrick.getCol()==e&&(this.leftDoorBrick=null)},e.prototype.handlerOpenDoor=function(t,e,o){var n=e?13:0,i=this.getBrickByRowCol(t+3,n);if(null!=i){var r=i.getRow().toString()+"_"+i.getCol().toString();if(1!=this.doorOpenInfo.get(r)&&2!=this.doorOpenInfo.get(r)){this.doorOpenInfo.set(r,1);var s=!1;null==o?s=!0:null!=o&&o.getDoorTag()!=r&&(s=!0),s&&(this.doorOpenInfo.set(r,1),null!=i&&i.getTypeId()==a.DOORBRICK&&((o=i).openDoor(),o.setDoorTag(r))),e?this.rightDoorBrick=o:this.leftDoorBrick=o}}},e.prototype.printCount=function(){for(var t=0,e=5e4,o=0,n=0;n<this.bricks.length;n++){var i=this.getBlicksByRow(n);o+=i.length,i.length>0&&(t=Math.max(i[0].getRow(),t),e=Math.min(i[0].getRow(),e))}console.log("   minRow  = "+e+" maxRow = "+t+" totalCount = "+o+"\u4e2d\u95f4\u7d2f\u8ba1\u884c = "+(t-e).toString()),console.log("   showMinRow  = "+this.showMinRow+" showMaxRow = "+this.showMaxRow+" totalCount = "+o+"\u4e2d\u95f4\u7d2f\u8ba1\u884c = "+(t-e).toString())},e.prototype.getGroupIndexByRow=function(t){if(t<0)return 0;for(var e=0;e<this.brickMapDataHelper.groupInfo.length;e++)if(t<=this.brickMapDataHelper.groupInfo[e])return e;return console.log("getGroupIndexByRow \u6570\u636e\u9519\u8bef...."),0},e.prototype.getGroupIndexMinRowByGroupIndex=function(t){return t>=this.brickMapDataHelper.groupInfo.length?(console.log("getGroupIndexMinRowByGroupIndex \u6570\u636e\u9519\u8bef"),-1):this.brickMapDataHelper.groupInfo[t-1]},e.prototype.updateGroupIndexByPosY=function(t,e){void 0===e&&(e=!0);var o=Math.floor(t/h.default.brickHeight),n=this.getGroupIndexByRow(o);if(this.curGroupIndex!=n&&Math.abs(this.lastRow-o)>10){var i=this.getGroupIndexByRow(o+this.offsetRow),r=this.getGroupIndexByRow(o-this.offsetRow),a=this.brickMapDataHelper.groupInfo[r],s=this.brickMapDataHelper.groupInfo[i];this.showMaxRow=s,this.showMinRow=a;var c=0;this.unscheduleAllCallbacks();for(var l=a;l<s;l++)null==this.bricks[l]&&(e&&o>this.lastRow?((l+8)%h.default.mapMaxRow==0&&this.createBricksByRow(l+8),this.scheduleOnce(this.createBricksByRow.bind(this,l),.05*c),c++):this.createBricksByRow(l));if(n>this.curGroupIndex){if(this.groupMinIndex!=r)for(a=this.brickMapDataHelper.groupInfo[this.groupMinIndex],s=this.brickMapDataHelper.groupInfo[r],l=a;l<s;l++)this.removeBricksByRow(l);this.preLoadNextMapData()}else if(this.groupMaxIndex!=i)for(a=this.brickMapDataHelper.groupInfo[i],s=this.brickMapDataHelper.groupInfo[this.groupMaxIndex],l=a;l<s;l++)this.removeBricksByRow(l);this.groupMaxIndex=i,this.groupMinIndex=r,this.curGroupIndex=n,this.lastRow=o}},e.prototype.createBricksByRow=function(t){for(var e=0;e<this.mapDataList[t].length;e++){var o=this.mapDataList[t][e];p.default.isMonsterType(o.type)?n.getInstance().createBrickByData(o,this.isShowMonsterTag):n.getInstance().createBrickByData(o,!0)}t%h.default.mapMaxRow==0&&t>0&&(0==c.default.lastLevel?m.default.getInstance().createCheckPoint(t,Math.floor(t/h.default.mapMaxRow)+c.default.lastLevel):m.default.getInstance().createCheckPoint(t,Math.floor(t/h.default.mapMaxRow)+c.default.lastLevel-1)),this.showMaxRow-1==t&&this.changeBrickToWorking()},e.prototype.changeBrickToWorking=function(){for(var t=0;t<this.bricks.length;t++)if(null!=this.bricks[t]){var e=this.getBlicksByRow(t);if(e.length>0&&e[0].getStatus()==s.BRICKSTUTAS.NONE)for(var o=0;o<e.length;o++)e[o].changeToWork()}},e.prototype.isCanCreate=function(t,e){for(var o=0;o<this.collectPropInfo.length;o++)if(this.collectPropInfo[o].row==t&&this.collectPropInfo[o].col==e)return!1;return!0},e.prototype.removeBricksByRow=function(t){d.default.getInstance().removeBulletByGroupIndex(t);for(var e=this.getBlicksByRow(t),o=0;o<e.length;o++)this.clearDoorBrick(t,e[o].getCol()),this.removeBrickByRowCol(t,e[o].getCol());this.bricks[t]=null,-1!=this.brickMapDataHelper.getLevelByRow(t)&&m.default.getInstance().removeCheckPointByRow(t)},e.prototype.getNearBrickByRowColDir=function(t,e,o,n){void 0===n&&(n=[]);var i=0,r=0;switch(o){case h.DIR.UP:i=1;break;case h.DIR.DOWN:i=-1;break;case h.DIR.LEFT:r=-1;break;case h.DIR.RIGHT:r=1}var a=i,s=r,c=null;if(null==this.bricks[t+a])return null;for(c=this.bricks[t+a][e+s];null==c;){var l=e+(s+=r),p=t+(a+=i);if(null==this.bricks[t+a])return null;if(null!=(c=this.bricks[t+a][l]))for(var u=0;u<n.length;u++)if(n[u]==c.getTypeId()){c=null;break}if(l>=14||l<0||p>this.showMaxRow||p<this.showMinRow)return null}return c},e.prototype.preLoadNextMapData=function(){this.mapDataList.length>0&&this.mapDataList.length-this.showMaxRow<=60&&(this.curLevel++,this.curLevel>this.maxLevel&&(this.curLevel=this.maxLevel),this.loadMapDataByLevel(this.curLevel))},e.prototype.putPool=function(t,e,n){void 0===n&&(n=-1);var i=o.brickInfo[t].res;if(-1!=n&&(i+=n.toString()),this.poolArr.has(i))(r=this.poolArr.get(i)).put(e);else{var r=new cc.NodePool;this.poolArr.set(i,r),r.put(e)}},e.prototype.getPool=function(t,e){void 0===e&&(e=-1);var n=o.brickInfo[t].res;if(-1!=e&&(n+=e.toString()),this.poolArr.has(n)){var i=this.poolArr.get(n);if(i.size()>0)return i.get()}return console.log("\u6ca1\u6709\u4f7f\u7528\u7f13\u5b58\u521b\u5efa res = "+n),cc.instantiate(this.brickMapDataHelper.getCachePrefabByRes(n))},e.prototype.pushCollectPropInfo=function(t,e){this.collectPropInfo.push({row:t,col:e})},e.prototype.reStartGame=function(t){void 0===t&&(t=!0),this.clearDoorInfo(t);for(var e=0;e<this.bricks.length;e++)if(null!=this.bricks[e])for(var o=this.getBlicksByRow(e),n=0;n<o.length;n++)o[n].resetBrick();this.updateCollisionStatus()},e.prototype.updateCollisionStatus=function(){for(var t=this.getNearBrickByRange(c.default.curRoleNode,7,!1),e=0;e<this.behaviorBirck.length;e++)for(var o=this.getNearBrickByRange(this.behaviorBirck[e].node,6,!0),n=0;n<o.length;n++)t.push(o[n]);var i=d.default.getInstance().getBehaviorBullets();for(e=0;e<i.length;e++)for(o=this.getNearBrickByRange(i[e].node,6,!0),n=0;n<o.length;n++)t.push(o[n]);for(var r=this.showMinRow;r<=this.showMaxRow;r++)if(null!=this.bricks[r]){var a=this.getBlicksByRow(r);for(e=0;e<a.length;e++)a[e].setCollisionStatus(this.isExistRowCol(a[e].getRow(),a[e].getCol(),t))}},e.prototype.isExistRowCol=function(t,e,o){for(var n=0;n<o.length;n++)if(o[n].row==t&&o[n].col==e)return!0;return!1},e.prototype.getNearBrickByRange=function(t,e,o){void 0===o&&(o=!1);for(var n=c.default.getRowColByPos(t.position),i=[],r=Math.max(n.col-e,0),s=Math.min(n.col+e,13),l=Math.min(n.row+e,this.showMaxRow),p=Math.max(n.row-e,this.showMinRow);p<l;p++)for(var u=r;u<=s;u++)null!=this.bricks[p]&&null!=this.bricks[p][u]&&(o&&this.bricks[p][u].getTypeId()==a.PROPBRICK||i.push({row:p,col:u}));return i},e.prototype.getShowMaxRow=function(){return this.showMaxRow},e.prototype.getShowMinRow=function(){return this.showMinRow},e.prototype.getBricksByGroupIndex=function(t,e){for(var o=this.brickMapDataHelper.groupInfo[t],n=this.brickMapDataHelper.groupInfo[t+1],i=[],r=o;r<=n+1;r++)for(var a=this.getBlicksByRow(r),s=0;s<a.length;s++)this.isSomeType(e,a[s].getTypeId())&&i.push(a[s]);return i},e.prototype.isSomeType=function(t,e){for(var o=0;o<t.length;o++)if(t[o]==e)return!0;return!1},e.prototype.addBehaviorMonsters=function(t){this.behaviorBirck.push(t),this.updateCollisionStatus()},e.prototype.removeBehaviorMonsters=function(t,e){for(var o=0;o<this.behaviorBirck.length;o++)if(this.behaviorBirck[o].getRow()==t&&this.behaviorBirck[o].getCol()==e){this.behaviorBirck.slice(o,1);break}},e.prototype.reviveMonsters=function(){var t=this.showMinRow,e=this.showMaxRow;this.unscheduleAllCallbacks();for(var o=t;o<e;o++)for(var n=0;n<this.mapDataList[o].length;n++){var i=this.mapDataList[o][n];null!=this.bricks[o]&&null==this.bricks[o][i.col]&&(p.default.isMonsterType(i.type)?this.createBrickByData(i,this.isShowMonsterTag):this.createBrickByData(i,!0))}},e.prototype.pause=function(t){for(var e=this.showMinRow;e<this.bricks.length;e++)for(var o=this.getBlicksByRow(e),n=0;n<o.length;n++)o[n].pause(t)},e.prototype.hideAllMonster=function(){this.isShowMonsterTag=!1;for(var t=this.showMinRow;t<this.showMaxRow;t++)for(var e=this.getBlicksByRow(t),o=0;o<e.length;o++)p.default.isMonsterType(e[o].getTypeId())&&e[o].getComponent(y.default).hideMonster()},e.prototype.showAllMonster=function(){this.isShowMonsterTag=!0;for(var t=this.showMinRow;t<this.showMaxRow;t++)for(var e=this.getBlicksByRow(t),o=0;o<e.length;o++)p.default.isMonsterType(e[o].getTypeId())&&e[o].getComponent(y.default).showMonster()},e.prototype.isDisplayedOnScreenByRow=function(t){var e=c.default.getRowColByPos(c.default.curRoleNode.position).row;return t>e-20&&t<e+20},e.prototype.getLimitCol=function(t,e,o){var i=e;i=o?i-1:i+1;for(var r=n.getInstance().getBrickByRowCol(t,i);null==r&&i!=h.default.brickCol&&i>=0;)i=o?i-1:i+1,r=n.getInstance().getBrickByRowCol(t,i);return i},e.prototype.getLimitRow=function(t,e,o){var i=t;i=o?i+1:i-1;for(var r=n.getInstance().getBrickByRowCol(i,e);null==r&&i<this.showMaxRow;)i=o?i+1:i-1,r=n.getInstance().getBrickByRowCol(i,e);return i},e.prototype.getBrokenBricksByRow=function(t,e){for(var o=[],n=t;n<=t+e;n++)for(var i=this.getBlicksByRow(n),r=0;r<i.length;r++)i[r].getTypeId()==a.BROKENBRICK&&o.push(i[r]);return o},e.prototype.createCollectBrickByRowCol=function(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=null);var r=new v(t,e,a.PROPBRICK,0,o.brickInfo[a.PROPBRICK].res,null,n),s=this.createBrickByData(r,!0);null!=s&&(s.scale=0,null!=i?s.runAction(cc.sequence(cc.scaleTo(.25,1,1),cc.callFunc(i))):s.runAction(cc.scaleTo(.25,1,1)))},e.prototype.getNoneBrickInfo=function(t,e){for(var o=[],n=t;n<=e;n++)for(var i=this.getBlicksByRow(n),r=0;r<=h.default.brickCol;r++)this.isExist(i,n,r)||o.push({row:n,col:r});return o},e.prototype.isExist=function(t,e,o){for(var n=0;n<t.length;n++)if(t[n].getCol()==o&&t[n].getRow()==e)return!0;return!1},e.prototype.initOther=function(){for(var t=0;t<this.bricks.length;t++)if(null!=this.bricks[t])for(var e=this.getBlicksByRow(t),o=0;o<e.length;o++)e[o].initOther()},e.instance=new n,n=r([_],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../logic/Brick":"Brick","../logic/BrickCollisionGroupHelper":"BrickCollisionGroupHelper","../logic/BrickMapDataHelper":"BrickMapDataHelper","../logic/Define":"Define","../logic/Global":"Global","../logic/monsters/Monster":"Monster","../logic/monsters/MonsterBehaviorMove":"MonsterBehaviorMove","./BulletManager":"BulletManager","./CheckPointManager":"CheckPointManager","./MysteryHouseManager":"MysteryHouseManager"}],BrickMapDataHelper:[function(t,e,o){"use strict";cc._RF.push(e,"da34fW5YhlGEbVhG5IHMhTp","BrickMapDataHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/BrickManager"),i=t("./Define"),r=t("../../common/EventMgr"),a=function(){function t(t,e,o){this.mapDataList=new Array,this.mapMaxRow=0,this.totalRow=0,this.offsetRow=0,this.offsetCol=0,this.groupIndex=0,this.groupInfo=[],this.isFirstTag=!0,this.levelInfo=new Map,this.totalLevel=1,this.levelAllData=null,this.mapMaxRow=t,this.offsetRow=e,this.offsetCol=o}return t.prototype.resetOffsetRowCol=function(t,e){this.offsetRow=t,this.offsetCol=e},t.prototype.preLoadPropertiesData=function(e,o){var n=this;cc.loader.loadRes("maps/tileResStyle_1",cc.JsonAsset,function(e,i){e?console.log("\u52a0\u8f7d\u9519\u8bef maps/tileResStyle_1"):(t.dataProperties=i.json.tiles,t.cacheLoadJsonData.set("maps/tileResStyle_1",i),n.preLoadAllMapData(o))})},t.prototype.preLoadBrickPrefabsByDir=function(e,o){cc.loader.loadResDir(e,function(e,n){for(var i=0;i<n.length;i++)t.cachePrefabArr.set(n[i].name,n[i]);o()})},t.prototype.preLoadMapDataByRes=function(e,o){cc.loader.loadRes(e,cc.JsonAsset,function(n,i){n?console.log("\u52a0\u8f7d\u6570\u636e\u9519\u8bef",e):(t.cacheLoadJsonData.set(e,i),o())})},t.prototype.preLoadAllMapData=function(t){var e=this,o="maps/mapDataStyle"+app.user.getMapStyleIndex();cc.loader.loadRes(o,cc.JsonAsset,function(n,i){n?console.log("\u52a0\u8f7d\u6570\u636e\u9519\u8bef",o):(e.levelAllData=i,t())})},t.prototype.loadMapDataByRes=function(e,o){var n=this,i=t.cacheLoadJsonData.get(e);null==i?cc.loader.loadRes(e,cc.JsonAsset,function(i,r){if(i)return console.log("\u52a0\u8f7d\u5173\u5361\u6570\u636e\u9519\u8bef",e),void app.platformMgr.logEvent("levelLoadError",{url:e});t.cacheLoadJsonData.set(e,r),n.initMapDatas(r,o,!1)}):this.initMapDatas(i,o,!1)},t.prototype.loadMapDataByLevel=function(t,e){var o=this.levelAllData.json[t.toString()];null==o?console.log("\u6570\u636e\u9519\u8bef"):this.initMapDatas(o,e,!0)},t.prototype.preLoadBrickPrefabs=function(e){var o=[];if(t.loadPrefabResArr.forEach(function(e,n){t.cachePrefabArr.has(n)||o.push("prefabs/bricks/"+n)}),0!=o.length){var n=Date.now();console.log(" \u52a0\u8f7dprefabs \u5f00\u59cb"+Date.now()),r.EVT.emit("preLoadBrickPrefabs \u52a0\u8f7d prefabs"),cc.loader.loadResArray(o,cc.Prefab,function(o,i){if(o)cc.error(o);else{for(var r=0;r<i.length;r++)t.cachePrefabArr.set(i[r].name,i[r]);console.log("\u52a0\u8f7dprefabs "+Date.now()),console.log("\u52a0\u8f7dprefabs  \u95f4\u9694\u65f6\u95f4 "+(Date.now()-n)),null!=e&&e()}}.bind(this)),t.loadPrefabResArr.clear()}else null!=e&&e()},t.prototype.initLevelAllPrefab=function(e){for(var o=e.json.layers[0].data,i=this.changeTwoArray(o),r=0;r<i.length;r++)for(var a=0;a<i[r].length;a++){var s=i[r][a];if(0!=s){var c=this.getBrickInfoByGid(s-1,"type");if(t.isMonsterType(c)){var l=this.getBrickInfoByGid(s-1,"monsterId");t.loadPrefabResArr.set(n.brickInfo[c].res+l.toString(),1)}else t.loadPrefabResArr.set(n.brickInfo[c].res,1)}}},t.prototype.changeTwoArray=function(t){var e=[],o=[];return t.forEach(function(t){14==o.length&&(o=[]),0==o.length&&e.push(o),o.push(t)}),e},t.prototype.getBrickInfoByGid=function(e,o){for(var n=null,i=0;i<t.dataProperties.length;i++)if(t.dataProperties[i].id==e){n=t.dataProperties[i];break}if(null==n)return console.log("getBrickInfoByGid  gid \u9519\u8bef"),null;for(i=0;i<n.properties.length;i++)if(n.properties[i].name==o)return n.properties[i].value;return null},t.isMonsterType=function(t){return t==n.BRICKTYPE.MONSTER_TYPE1||t==n.BRICKTYPE.MONSTER_TYPE2||t==n.BRICKTYPE.MONSTER_TYPE3},t.prototype.turnRow=function(t){return Math.abs(t-this.mapMaxRow+1)+this.totalRow},t.prototype.initMapDatas=function(e,o,i){var r=Date.now();console.log("initMapDatas \u521d\u59cb\u5316\u5f00\u59cb"+r);var a,s=null;null!=(a=i?e:e.json).layers[1]&&(s=a.layers[1].objects);var c=a.layers[0].data,l=this.changeTwoArray(c);this.isFirstTag&&(this.isCloud(l,l.length-1)||this.groupInfo.push(0),this.isFirstTag=!1);for(var p=l.length-1;p>=0;p--){var u=this.turnRow(p);this.mapDataList[u]=new Array;for(var h=!0,d=0;d<l[p].length;d++){var f=l[p][d];if(0!=f){var g=this.getBrickInfoByGid(f-1,"type"),y=this.getBrickInfoByGid(f-1,"subType"),m=this.getMovePathInfo(g,s,d.toString()+","+p.toString());if(this.isCloud(l,p)&&h&&(this.groupIndex=this.groupIndex+1,h=!1,this.groupInfo.push(u)),t.isMonsterType(g)){var v=this.getBrickInfoByGid(f-1,"monsterId");if(null==m&&(m={}),g==n.BRICKTYPE.MONSTER_TYPE3){var _=this.getBrickInfoByGid(f-1,"dir"),b=this.getBrickInfoByGid(f-1,"interval"),R=this.getObjectValue(s,d.toString()+","+p.toString(),"interval");null!=R&&(b=R),m.dir=_,m.interval=b}m.monsterId=v,this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res+v.toString(),m,y))}else if(g==n.BRICKTYPE.POPUPBRICK){var C={popupInfo:this.getPopupBrickExtraInfo(s,d.toString()+","+p.toString()),pointInfo:m};this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,C,y))}else if(g==n.BRICKTYPE.HURTBRICK){var I={dir:_=this.getBrickInfoByGid(f-1,"dir")};this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,I,y))}else if(g==n.BRICKTYPE.PROPBRICK){var B=this.getCollectBrickExtraInfo(s,d.toString()+","+p.toString());this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,B,y))}else if(g==n.BRICKTYPE.ROTASIONBRICK){var w=this.getRotasionBrickExtraInfo(s,d.toString()+","+p.toString());this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,w,y))}else if(g==n.BRICKTYPE.DOORBRICK){var k=this.getDoorBrickExtraInfo(s,d.toString()+","+p.toString());this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,k,y))}else g==n.BRICKTYPE.BROKENPOWERBRICK?(C=this.getBrokenPowerBrickExtraInfo(s,d.toString()+","+p.toString()),this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,C,y))):this.mapDataList[u].push(new n.MapData(u+this.offsetRow,d+this.offsetCol,g,f,n.brickInfo[g].res,m,y));g==n.BRICKTYPE.EVENTBRICK&&(this.levelInfo.has(u)||(this.levelInfo.set(u,this.totalLevel),this.totalLevel++))}}}console.log("initMapDatas \u521d\u59cb\u5316\u7ed3\u675f \u95f4\u9694\u65f6\u95f4 tempTime ="+(Date.now()-r)),this.totalRow=this.totalRow+this.mapMaxRow,o()},t.prototype.isCloud=function(t,e){this.turnRow(e);for(var o=0,i=0;i<t[e].length;i++){var r=t[e][i];0!=r&&this.getBrickInfoByGid(r-1,"type")==n.BRICKTYPE.CLOUDBRICK&&o++}return 12==o},t.prototype.getObjectValue=function(t,e,o){var n=this.getObjectInfo(t,e);return null==n?null:null!=this.getObjectInfo(n.properties,o)?this.getObjectInfo(n.properties,o).value:null},t.prototype.getMovePathInfo=function(t,e,o){if(t!=n.BRICKTYPE.WALL){var i=this.getObjectInfo(e,o);if(null==i)return null;var r=this.getMoveingBirckPoints(i),a=0,s=0,c=0,l="",p=0,u="";return null!=i.properties&&r.length>0?(null!=this.getObjectInfo(i.properties,"speed")&&(a=this.getObjectInfo(i.properties,"speed").value),null!=this.getObjectInfo(i.properties,"delayTime")&&(s=this.getObjectInfo(i.properties,"delayTime").value),null!=this.getObjectInfo(i.properties,"easeAction")&&(c=this.getObjectInfo(i.properties,"easeAction").value),null!=this.getObjectInfo(i.properties,"hurtInfo")&&(l=this.getObjectInfo(i.properties,"hurtInfo").value),null!=this.getObjectInfo(i.properties,"moveType")&&(p=this.getObjectInfo(i.properties,"moveType").value),null!=this.getObjectInfo(i.properties,"numInfo")&&(u=this.getObjectInfo(i.properties,"numInfo").value),{points:r,speed:a,delayTime:s,easeAction:c,hurtInfo:l,moveType:p,numInfo:u}):null}},t.prototype.getObjectInfo=function(t,e){if(null==t)return null;for(var o=0;o<t.length;o++){var n=t[o];if(n.name==e)return n}return null},t.prototype.getObjectInfoValue=function(t,e,o){var n=this.getObjectInfo(t,e);return null==n?o:n.value},t.prototype.getMoveingBirckPoints=function(t){var e=[],o=null;if(null!=t.polyline?o=t.polyline:null!=t.polygon&&(o=t.polygon),null==o)return e;for(var n=0;n<o.length;n++){var r=(i.default.mapMaxRow+this.totalRow)*i.default.brickHeight,a=Math.abs(t.y-r)+-1*o[n].y-2,s=t.x+o[n].x;e.push(cc.v2(s,a))}return e},t.prototype.getMapDatas=function(){return this.mapDataList},t.prototype.getCachePrefabByRes=function(e){return t.cachePrefabArr.get(e)},t.prototype.getPopupBrickExtraInfo=function(t,e){var o=this.getObjectInfo(t,e);return null!=o?{angle:this.getObjectInfoValue(o.properties,"angle",0),speed:this.getObjectInfoValue(o.properties,"fireSpeed",1200),time:this.getObjectInfoValue(o.properties,"time",1e3),rotationSpeed:this.getObjectInfoValue(o.properties,"rotationSpeed",0),offsetX:this.getObjectInfoValue(o.properties,"offsetX",0)}:{angle:0,speed:1200,time:1e3,rotationSpeed:0,offsetX:0}},t.prototype.getCollectBrickExtraInfo=function(t,e){var o=this.getObjectInfo(t,e);if(null!=o)return{num:this.getObjectInfo(o.properties,"num").value}},t.prototype.getRotasionBrickExtraInfo=function(t,e){var o=this.getObjectInfo(t,e);if(null!=o){var n=this.getObjectInfo(o.properties,"dir").value,i=this.getObjectInfo(o.properties,"delayTime").value;return{hurtInfo:this.getObjectInfo(o.properties,"hurtInfo").value,delayTime:i,dir:n}}return{}},t.prototype.getDoorBrickExtraInfo=function(t,e){var o=this.getObjectInfo(t,e);return null!=o?{type:this.getObjectInfoValue(o.properties,"type",1),subType:this.getObjectInfoValue(o.properties,"subType",1),nextType:this.getObjectInfoValue(o.properties,"nextType",i.default.invalidValue),nextSubType:this.getObjectInfoValue(o.properties,"nextSubType",i.default.invalidValue)}:{type:1,subType:1,nextType:i.default.invalidValue,nextSubType:i.default.invalidValue}},t.prototype.getBrokenPowerBrickExtraInfo=function(t,e){var o=this.getObjectInfo(t,e);return null!=o?{upRow:this.getObjectInfoValue(o.properties,"upRow",8),money:this.getObjectInfoValue(o.properties,"money",1)}:{upRow:8,money:1}},t.prototype.getLevelByRow=function(t){return this.levelInfo.has(t)?this.levelInfo.get(t):-1},t.prototype.getCurLevelByRow=function(t){var e=1;return this.levelInfo.forEach(function(o,n){n<=t&&(e=o+1)}),e},t.prototype.cacheTurnTablePrefab=function(){cc.loader.loadRes("prefabs/others/turntableBrick",cc.Prefab,function(e,o){e?console.log("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25 prefabs/others/turntableBrick"):t.cachePrefabArr.set("turntableBrick",o)}),cc.loader.loadRes("prefabs/others/frozenBrick",cc.Prefab,function(e,o){e?console.log("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25 prefabs/others/frozenBrick"):t.cachePrefabArr.set("frozenBrick",o)})},t.cacheShareTropBrick=function(e,o){if(!t.cacheLoadStates.has(e)){t.cacheLoadStates.set(e,1);var n=i.default.shareBrickResArr[o];null==t.cachePrefabArr.get(n)&&cc.loader.loadRes("prefabs/others/"+n,cc.Prefab,function(e,o){e?console.log("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25 prefabs/others/"+n):t.cachePrefabArr.set(n,o)})}},t.loadPrefabResArr=new Map,t.cachePrefabArr=new Map,t.cacheLoadJsonData=new Map,t.dataProperties=null,t.cacheLoadStates=new Map,t}();o.default=a,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../manager/BrickManager":"BrickManager","./Define":"Define"}],Brick:[function(t,e,o){"use strict";cc._RF.push(e,"72f45GjsBRJsJaSwqXh9RFB","Brick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BRICKSTUTAS=void 0;var a,s=t("./Global"),c=t("../manager/BrickManager"),l=cc._decorator,p=l.ccclass,u=l.property;(function(t){t[t.NONE=0]="NONE",t[t.WORK=1]="WORK",t[t.REMOVE=2]="REMOVE"})(a=o.BRICKSTUTAS||(o.BRICKSTUTAS={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.isAcrossDown=!1,e.isCloudType=!1,e.isCollect=!1,e.brickInfo=null,e.extraInfo=null,e.curStutas=a.NONE,e.isbulletTag=!1,e.mapData=null,e.collider=null,e.isPauseTag=!1,e.tempText=null,e.row=0,e.col=0,e.type=0,e.showTag=!0,e}return i(e,t),e.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.BoxCollider)},e.prototype.initBrick=function(t,e){this.brickInfo=t,this.isAcrossDown=this.brickInfo.isAcrossDown,this.isCloudType=this.brickInfo.isCloud,this.isCollect=this.brickInfo.isCollect,this.mapData=e,this.isPauseTag=!1,this.node.name=this.mapData.row.toString()+","+this.mapData.col.toString(),this.curStutas=a.NONE,this.row=this.mapData.row,this.col=this.mapData.col,this.type=this.mapData.type,s.default.isLoading||this.initOther(),this.changeStyle()},e.prototype.isCanAcrossUp=function(){return!!(this.isCollect||this.brickInfo.isEventBrick||this.brickInfo.isPopup)},e.prototype.isCanAcrossDown=function(){return!!(this.isCloudType||this.isCollect||this.brickInfo.isEventBrick||this.brickInfo.isPopup)},e.prototype.isCanAcrossLeftRight=function(){return!!(this.isCloudType||this.isCollect||this.brickInfo.isEventBrick||this.brickInfo.isPopup)},e.prototype.isCanCollect=function(){return this.isCollect},e.prototype.isCloud=function(){return this.isCloudType},e.prototype.getStatus=function(){return this.curStutas},e.prototype.changeToWork=function(){this.curStutas=a.WORK},e.prototype.isWorking=function(){this.curStutas,a.WORK},e.prototype.removeBrickSelf=function(){var t=this;this.curStutas=a.REMOVE,this.scheduleOnce(function(){c.default.getInstance().putPool(t.getTypeId(),t.node),t.node.removeFromParent(),t.mapData=null})},e.prototype.isRremoveStatus=function(){return this.curStutas==a.REMOVE},e.prototype.getTypeId=function(){return this.mapData.type},e.prototype.getRow=function(){return null==this.mapData?-9999:this.mapData.row},e.prototype.getCol=function(){return null==this.mapData?-9999:this.mapData.col},e.prototype.getStutas=function(){return this.curStutas},e.prototype.isHurt=function(){return this.brickInfo.isHurt},e.prototype.isCanStampDeath=function(){return this.brickInfo.stampDeath},e.prototype.changeStyle=function(){var t="brick_1_"+this.mapData.gid;null!=this.icon&&(this.icon.getComponent(cc.Sprite).spriteFrame=s.default.brickAtlas.getSpriteFrame(t))},e.prototype.isEventBrick=function(){return this.brickInfo.isEventBrick},e.prototype.isPopupBrick=function(){return this.brickInfo.isPopup},e.prototype.setCollisionStatus=function(t){null!=this.collider&&(this.collider.enabled=t)},e.prototype.getGroupIndex=function(){return this.mapData.groupIndex},e.prototype.show=function(){this.node.active=!0,this.showTag=!0},e.prototype.hide=function(){this.node.active=!1,this.showTag=!1},e.prototype.isShow=function(){return this.showTag},e.prototype.isBullet=function(){return this.isbulletTag},e.prototype.resetBrick=function(){},e.prototype.updateCollisionStatusByOtherNode=function(t){this.node.position.sub(t.position).mag()<=200?this.setCollisionStatus(!0):this.setCollisionStatus(!1)},e.prototype.pause=function(t){this.isPauseTag!=t&&(this.isPauseTag=t)},e.prototype.isCanLeftMove=function(){return!1},e.prototype.isCanRightMove=function(){return!1},e.prototype.getOccupyCol=function(){return 1},e.prototype.getOccupyRow=function(){return 1},e.prototype.getMapData=function(){return this.mapData},e.prototype.initOther=function(){},r([u(cc.Sprite)],e.prototype,"icon",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","./Global":"Global"}],BrokenBrickEffect:[function(t,e,o){"use strict";cc._RF.push(e,"36197SMHvNC7qLHv+zPcT4I","BrokenBrickEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),s=t("./DragonBoneEffect"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var e=a.default.changeMapStyle(app.user.getMapStyleIndex());1==e?this.animaName="newAnimation":2==e?this.animaName="green":3==e?this.animaName="ice":4==e?this.animaName="red":5==e&&(this.animaName="red1"),t.prototype.onLoad.call(this)},r([l],e)}(s.default));o.default=p,cc._RF.pop()},{"../Global":"Global","./DragonBoneEffect":"DragonBoneEffect"}],BrokenBrick:[function(t,e,o){"use strict";cc._RF.push(e,"d2f1fssU99Hfrcsx2YZf73I","BrokenBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BROKENTYPE=void 0;var a,s=t("../Brick"),c=t("../../manager/EffectManager"),l=t("../Define"),p=t("../Global"),u=cc._decorator,h=u.ccclass;u.property,function(t){t[t.HEAD=0]="HEAD",t[t.FOOT=1]="FOOT",t[t.BODY=2]="BODY"}(a=o.BROKENTYPE||(o.BROKENTYPE={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brokenType=a.HEAD,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),25==o.gid&&(this.brokenType=a.HEAD)},e.prototype.brcokenEffect=function(){c.default.getInstance().showEffect(l.default.effectBrokenBirck,this.node.position,1,1,null,p.default.getNodeRootByIndex(0)),c.default.getInstance().showEffect(l.default.effectBroken1Birck,this.node.position)},e.prototype.getBrokenType=function(){return this.brokenType},r([h],e)}(s.default);o.default=d,cc._RF.pop()},{"../../manager/EffectManager":"EffectManager","../Brick":"Brick","../Define":"Define","../Global":"Global"}],BrokenPowerBrick:[function(t,e,o){"use strict";cc._RF.push(e,"51bad0Na39AQrbniz7fLZjT","BrokenPowerBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../../manager/BrickManager"),c=t("../Global"),l=t("../Define"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.swichNode=null,e.sp_avatar=null,e.state=-1,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.swichNode.position=cc.v2(0,-50),this.node.x+=.5*l.default.brickWidth,this.state=-1,this.node.y+=10},e.prototype.changeState=function(){-1==this.state&&(this.state=0,this.swichNode.y=-50,this.swichNode.runAction(cc.moveTo(.1,cc.v2(0,-70))))},e.prototype.power=function(){var t=this;1!=this.state&&-1!=this.state&&(app.platformMgr.logEvent("headCamera",{from:"brokenPower"}),this.state=1,this.swichNode.runAction(cc.sequence(cc.moveTo(.1,cc.v2(0,-50)),cc.callFunc(function(){for(var e=s.default.getInstance().getNoneBrickInfo(t.getRow()+2,t.getRow()+7),o=s.default.getInstance().getBrokenBricksByRow(t.getRow(),t.mapData.extraInfo.upRow),n=0,i=0,r=function(t){var e=o[t];i=.5*Math.random(),n=Math.max(i,n),e.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){e.brcokenEffect(),e.getRow(),e.getCol(),s.default.getInstance().removeBrickByRowCol(e.getRow(),e.getCol())})))},a=0;a<o.length;a++)r(a);t.scheduleOnce(function(){for(var o=0,n=function(n){t.scheduleOnce(function(){if(1==t.mapData.extraInfo.money){var i,r=c.default.getRandom(0,100);i=r<=10?4:r<=55?1:2,s.default.getInstance().createCollectBrickByRowCol(e[n].row,e[n].col,i,function(){++o==e.length&&t.shareScreen()})}},.5*Math.random())},i=0;i<e.length;i++)n(i)},n)}))))},e.prototype.shareScreen=function(){app.soundMgr.play(l.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){c.default.isCanJump=!0})},e.prototype.initOther=function(){cc.loader.loadRes("prefabs/share/ShareHeart",function(){})},r([h(cc.Node)],e.prototype,"swichNode",void 0),r([h(cc.Sprite)],e.prototype,"sp_avatar",void 0),r([u],e)}(a.default);o.default=d,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Brick":"Brick","../Define":"Define","../Global":"Global"}],BulletBehaviorMove:[function(t,e,o){"use strict";cc._RF.push(e,"1f07dYALCxAI68C0iC2UTn3","BulletBehaviorMove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Bullet"),s=t("../manager/BrickManager"),c=t("./Brick"),l=t("./Behavior"),p=t("./Define"),u=t("../manager/BulletManager"),h=cc._decorator,d=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.behavior=null,e.lastPos=cc.Vec2.ZERO,e.rotationSpeed=-200,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),null==this.behavior&&(this.behavior=this.node.getComponent(l.default),this.behavior.collisionCallBack=this.collisionCalllBack.bind(this),this.behavior.actionCallBack=this.actionCallBack.bind(this),this.behavior.changeDirCallBack=this.changeDirCallBack.bind(this))},e.prototype.setCollisionStatus=function(){},e.prototype.fire=function(t,e){this.dir=t,this.speed=e,this.behavior.clearAll(),this.behavior.setMoveSpeed(200),this.behavior.setCurAction(l.ROLEACTION.DROPING),this.behavior.setGravity(-1500),t==p.DIR.LEFT?(this.behavior.setMoveDir(-1),this.node.x=this.node.x-this.node.width,this.node.y=this.node.y-.5*this.node.height):t==p.DIR.RIGHT&&(this.behavior.setMoveDir(1),this.node.x=this.node.x-this.node.width,this.node.y=this.node.y-.5*this.node.height),this.curStutas=c.BRICKSTUTAS.WORK,this.collider.enabled=!0,this.armature.playAnimation("fireball",0),this.lastPos=this.node.position},e.prototype.update=function(t){if(this.curStutas==c.BRICKSTUTAS.REMOVE)return this.behavior.setCurAction(l.ROLEACTION.NONE),void(this.node.children[0].angle=0);this.node.position.sub(this.lastPos).mag()>=50&&(this.lastPos=this.node.position,s.default.getInstance().updateCollisionStatus()),this.node.children[0].angle+=this.behavior.getMoveDir()*this.rotationSpeed*t},e.prototype.actionCallBack=function(){},e.prototype.collisionCalllBack=function(t,e){var o=e.getComponent(c.default);null!=o&&o.isHurt()&&(this.behavior.setCollisionStatus(!1),this.behavior.setCurAction(l.ROLEACTION.NONE),u.default.getInstance().removeBullet(this,!0))},e.prototype.changeDirCallBack=function(){},r([d],e)}(a.default));o.default=f,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","../manager/BulletManager":"BulletManager","./Behavior":"Behavior","./Brick":"Brick","./Bullet":"Bullet","./Define":"Define"}],BulletManager:[function(t,e,o){"use strict";cc._RF.push(e,"8cb69CzPW5HCaJBo0Ytmhsu","BulletManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../logic/Bullet"),r=t("./BrickManager"),a=t("../logic/Define"),s=t("../logic/Global"),c=cc._decorator,l=c.ccclass,p=(c.property,function(){function t(){this.bullets=new Map,this.totalCount=0,this.bulletPool=new Map}var e;return e=t,t.getInstance=function(){return this.instance},t.prototype.fireBullet=function(t,e,o,n){var s=this.getPool(t.data.name);null==s&&(s=cc.instantiate(t)),s.setParent(n.node.parent),s.setSiblingIndex(0);var c=s.getComponent(i.default);if(c.initBrick(r.brickInfo[c.getBulletType()],{row:0,col:0,gid:0,type:c.getBulletType()}),s.position=o,c.belongBrick=n,c.setOnlyIndex(this.totalCount),this.bullets.set(this.totalCount,c),this.totalCount++,c.fire(e,600),c.getMoveType()==a.BULLETMOVETYPE.NORMAL){var l=r.default.getInstance().getGroupIndexByRow(n.getRow()),p=r.default.getInstance().getBricksByGroupIndex(l-1,[r.BRICKTYPE.WALL,r.BRICKTYPE.CLOUDBRICK,r.BRICKTYPE.BROKENBRICK,r.BRICKTYPE.MONSTER_TYPE3]);c.setCollisionOther(p)}else c.getMoveType()==a.BULLETMOVETYPE.BEHAVIOR&&r.default.getInstance().updateCollisionStatus()},t.prototype.removeBullet=function(t,e){return!!this.bullets.has(t.getOnlyIndex())&&(e?t.removeBrickSelf():t.immediatelyRemove(),this.bullets.delete(t.getOnlyIndex()),!0)},t.prototype.removeBulletByGroupIndex=function(t){var e=this;this.bullets.forEach(function(o){o.belongBrick.getRow()==t&&e.removeBullet(o,!1)})},t.prototype.putPool=function(t){if(this.bulletPool.has(t.name))(e=this.bulletPool.get(t.name)).put(t);else{var e=new cc.NodePool;this.bulletPool.set(t.name,e),e.put(t)}},t.prototype.getPool=function(t){if(this.bulletPool.has(t)){var e=this.bulletPool.get(t);if(e.size()>0)return e.get()}return null},t.prototype.updateCollisionStatus=function(t){this.bullets.forEach(function(e){e.getMoveType()==a.BULLETMOVETYPE.NORMAL&&e.updateCollisionStatusByOtherNode(t)})},t.prototype.getBulletLimitPos=function(t,e,o,n){return o==a.DIR.UP?null==n?s.default.getBirckPos(r.default.getInstance().getShowMaxRow(),e):cc.v2(0,n.node.y-.5*n.node.height):o==a.DIR.DOWN?null==n?s.default.getBirckPos(r.default.getInstance().getShowMinRow(),e):cc.v2(0,n.node.y+.5*n.node.height):o==a.DIR.LEFT?null==n?s.default.getBirckPos(0,t):cc.v2(n.node.x+.5*n.node.width,0):o==a.DIR.RIGHT?null==n?s.default.getBirckPos(13,t):cc.v2(n.node.x-.5*n.node.width,0):void 0},t.prototype.pause=function(t){this.bullets.forEach(function(e){e.pause(t)})},t.prototype.removeAllBullet=function(){var t=this;this.bullets.forEach(function(e){t.removeBullet(e,!1)}),this.bullets.clear()},t.prototype.getBehaviorBullets=function(){var t=[];return this.bullets.forEach(function(e){e.getMoveType()==a.BULLETMOVETYPE.BEHAVIOR&&t.push(e)}),t},t.instance=new e,n([l],t)}());o.default=p,cc._RF.pop()},{"../logic/Bullet":"Bullet","../logic/Define":"Define","../logic/Global":"Global","./BrickManager":"BrickManager"}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"bed32zr83pBJqOh7pw2J99r","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Brick"),s=t("../manager/BulletManager"),c=t("./Define"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletType=0,e.moveType=c.BULLETMOVETYPE.NORMAL,e.effect1="",e.effect2="",e.effectLayerIndex=0,e.isFire=!1,e.belongBrick=null,e.speed=0,e.dir=c.DIR.UP,e.onlyIndex=0,e.nameStr="",e.collisionBircks=[],e.armature=null,e}return i(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.armature=this.node.children[0].getComponent(dragonBones.ArmatureDisplay),null!=this.armature&&this.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(t){t.type==dragonBones.EventObject.COMPLETE&&e.curStutas==a.BRICKSTUTAS.REMOVE&&e.immediatelyRemove()})},e.prototype.initBrick=function(e,o){this.nameStr=this.node.name,t.prototype.initBrick.call(this,e,o),this.node.name=this.nameStr,this.isbulletTag=!0,this.node.getComponent(cc.BoxCollider).enabled=!0},e.prototype.changeStyle=function(){},e.prototype.getBulletType=function(){return this.bulletType},e.prototype.fire=function(t,e){this.dir=t,this.speed=e,this.node.children[0].scale=1,this.node.children[0].angle=0,this.node.children[0].x=-35,this.dir==c.DIR.LEFT?this.node.children[0].scaleX=-1:this.dir==c.DIR.RIGHT?(this.node.children[0].scaleX=1,this.node.children[0].x=35):this.dir==c.DIR.UP?this.node.children[0].angle=90:this.dir==c.DIR.DOWN&&(this.node.children[0].angle=-90),this.curStutas=a.BRICKSTUTAS.WORK,this.collider.enabled=!0,this.armature.playAnimation("fireball",0)},e.prototype.update=function(t){if(this.moveType!=c.BULLETMOVETYPE.BEHAVIOR&&this.curStutas!=a.BRICKSTUTAS.REMOVE&&!this.isPauseTag){this.dir==c.DIR.UP?this.node.y+=t*this.speed:this.dir==c.DIR.DOWN?this.node.y-=t*this.speed:this.dir==c.DIR.LEFT?this.node.x-=t*this.speed:this.dir==c.DIR.RIGHT&&(this.node.x+=t*this.speed);for(var e=0;e<this.collisionBircks.length;e++)this.node.getBoundingBox().intersects(this.collisionBircks[e].node.getBoundingBox())&&s.default.getInstance().removeBullet(this,!0)}},e.prototype.removeBrickSelf=function(){var t=this;this.curStutas=a.BRICKSTUTAS.REMOVE,this.scheduleOnce(function(){t.collider.enabled=!1}),this.armature.playAnimation("boom",1)},e.prototype.immediatelyRemove=function(){var t=this;this.curStutas=a.BRICKSTUTAS.REMOVE,this.scheduleOnce(function(){t.collider.enabled=!1,s.default.getInstance().putPool(t.node),t.node.removeFromParent(),t.mapData=null})},e.prototype.showBombEffect=function(){},e.prototype.setOnlyIndex=function(t){this.onlyIndex=t},e.prototype.getOnlyIndex=function(){return this.onlyIndex},e.prototype.setCollisionOther=function(t){this.collisionBircks=t;for(var e=0;e<this.collisionBircks.length;e++)if(this.collisionBircks[e]==this.belongBrick){this.collisionBircks.splice(e,1);break}},e.prototype.getMoveDir=function(){return this.dir},e.prototype.getMoveType=function(){return this.moveType},r([u({displayName:"\u5b50\u5f39\u7684\u7c7b\u578b"})],e.prototype,"bulletType",void 0),r([u({displayName:"\u5b50\u5f39\u7684\u79fb\u52a8\u7c7b\u578b",type:c.BULLETMOVETYPE})],e.prototype,"moveType",void 0),r([u({displayName:"\u5b50\u5f39\u7206\u70b8\u7279\u65481"})],e.prototype,"effect1",void 0),r([u({displayName:"\u5b50\u5f39\u7206\u70b8\u7279\u65482"})],e.prototype,"effect2",void 0),r([u({displayName:"\u5b50\u5f39\u7206\u7279\u6548\u5c42\u7ea7"})],e.prototype,"effectLayerIndex",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../manager/BulletManager":"BulletManager","./Brick":"Brick","./Define":"Define"}],CameraMove:[function(t,e,o){"use strict";cc._RF.push(e,"a721ftoJIJAUoGqXMFE83ag","CameraMove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Define"),s=t("./Global"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.followNode=null,e.distanceY=0,e.totalMaxPosY=0,e.lastMaxPosY=0,e.followSpeed=5,e.lastY=0,e.isFastFollow=!1,e}return i(e,t),e.prototype.updateTime=function(t){this.distanceY=this.followNode.y-this.node.y-.4*cc.winSize.height,this.isFastFollow?this.node.y=Math.max(this.node.y+this.distanceY,0):this.node.y=Math.max(this.node.y+this.distanceY*t*this.followSpeed,0),this.lastMaxPosY=Math.max(this.lastMaxPosY,this.node.y),s.default.cutScreenCamera.y=this.node.y,s.default.cutScreenCamera.x=this.node.x},e.prototype.setFollowNode=function(t){this.followNode=t},e.prototype.moveToInitPos=function(){},e.prototype.horizontalMove=function(t,e){var o=this,n=a.default.cameraOffsetX;t||(n=-1*a.default.cameraOffsetX);var i=this.node.x+n;this.node.runAction(cc.sequence(cc.moveTo(.3,cc.v2(this.node.x+n,this.node.y)),cc.callFunc(function(){o.node.x=i,e()})))},e.prototype.initCameraPos=function(t,e){this.lastY=t.y-.4*cc.winSize.height,this.node.position=cc.v2(0,this.lastY),this.lastMaxPosY=this.lastY,this.totalMaxPosY=e},e.prototype.setFastFollow=function(t){this.isFastFollow=t},r([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./Define":"Define","./Global":"Global"}],CheckBrickCollider:[function(t,e,o){"use strict";cc._RF.push(e,"adf772wJuBNApUSZGlAQXZ3","CheckBrickCollider");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],CheckCollision:[function(t,e,o){"use strict";cc._RF.push(e,"78a9cpGykdP054irP7pToIQ","CheckCollision");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setCollisionCallBack=function(t){this.collisionCallBack=t},e.prototype.onCollisionEnter=function(t){null!=this.collisionCallBack&&this.collisionCallBack(1,t.node)},e.prototype.onCollisionExit=function(t){null!=this.collisionCallBack&&this.collisionCallBack(0,t.node)},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],CheckPointFlagEffect:[function(t,e,o){"use strict";cc._RF.push(e,"dc1c0qyFS9BHbYu0YOm4NvT","CheckPointFlagEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animasions=[],e.curAnimaName="",e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.animasions[0].addEventListener(dragonBones.EventObject.COMPLETE,function(){"sheng"==t.curAnimaName&&(t.curAnimaName="piao",t.play(t.curAnimaName,-1))})},e.prototype.play=function(t,e){this.curAnimaName=t;for(var o=0;o<this.animasions.length;o++)this.animasions[o].playAnimation(t,e)},r([c(dragonBones.ArmatureDisplay)],e.prototype,"animasions",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],CheckPointManager:[function(t,e,o){"use strict";cc._RF.push(e,"1fc03jYiUtFP4kkpDs/59cP","CheckPointManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../logic/NodePoolHelper"),r=t("../logic/Global"),a=t("../logic/CheckPoint"),s=t("../logic/Define"),c=t("./SpecialBrickManager"),l=function(t,e){this.row=0,this.state=0,this.row=t,this.state=e},p=cc._decorator,u=p.ccclass,h=(p.property,function(){function t(){this.nodeRoot=null,this.checkPoints=new Map,this.checkPointsStatus=[]}var e;return e=t,t.getInstance=function(){return this.instance},t.prototype.initNodeRoot=function(t){this.nodeRoot=t},t.prototype.createCheckPoint=function(t,e){var o=this,n=this.getPool("checkPoint");null==n?cc.loader.loadRes("prefabs/others/checkPoint",cc.Prefab,function(n,i){if(!n){var r=cc.instantiate(i);o.initCheckPoint(r,t,e)}}):(console.log("\u4f7f\u7528\u7f13\u5b58\u521b\u5efa"),this.initCheckPoint(n,t,e))},t.prototype.initCheckPoint=function(t,e,o){if(!this.checkPoints.has(e)){this.nodeRoot.addChild(t),t.position=r.default.getBirckPos(e-13,6).add(cc.v2(.5*s.default.brickWidth,-.2*s.default.brickHeight));var n=t.getComponent(a.default);n.initCheckPoint(e,o),this.checkPoints.set(e,n),c.default.getInstance().createAvatarBrick(e,o)}},t.prototype.resetCheckPoint=function(){this.checkPoints.forEach(function(t){t.resetCheckPoint()})},t.prototype.hanlderOpenCheckkPoint=function(t){this.checkPoints.forEach(function(e,o){o==t&&e.openState()})},t.prototype.removeCheckPointByRow=function(t){var e=this;this.checkPoints.forEach(function(o,n){n==t&&(o.remove(),e.checkPoints.delete(n),e.putPool(o.node),o.node.removeFromParent(),c.default.getInstance().removeAvatarBrick(t+7))})},t.prototype.getPool=function(t){return e.nodePoolHelper.getPool(t)},t.prototype.putPool=function(t){e.nodePoolHelper.putPool(t)},t.prototype.removeAllCheckPoint=function(){var t=this;this.checkPoints.forEach(function(e,o){e.remove(),t.checkPoints.delete(o),t.putPool(e.node),e.node.removeFromParent()})},t.prototype.cacheCheckPoint=function(){var t=this;cc.loader.loadRes("prefabs/others/checkPoint",cc.Prefab,function(e,o){for(var n=0;n<3;n++){var i=cc.instantiate(o);t.putPool(i)}})},t.prototype.setCheckPointStatus=function(t,e){this.checkPointsStatus.push(new l(t,e))},t.prototype.getCheckPointStatus=function(t,e){for(var o=0;o<this.checkPointsStatus.length;o++)if(this.checkPointsStatus[o].row==t)return this.checkPointsStatus[o].state;if(0==r.default.lastLevel)return 0;var n=app.user.getLastLevel(),i=app.user.getLastLevelInfo();return n>0&&e==i.level?i.state:0},t.instance=new e,t.nodePoolHelper=new i.default,e=n([u],t)}());o.default=h,cc._RF.pop()},{"../logic/CheckPoint":"CheckPoint","../logic/Define":"Define","../logic/Global":"Global","../logic/NodePoolHelper":"NodePoolHelper","./SpecialBrickManager":"SpecialBrickManager"}],CheckPoint:[function(t,e,o){"use strict";cc._RF.push(e,"d81c51DWdtNG6ox9348uueU","CheckPoint");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./elements/WallBrick"),s=t("../manager/BrickManager"),c=t("./elements/SwitchBrick"),l=t("./Define"),p=t("../../common/EventMgr"),u=t("../manager/CheckPointManager"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.armatureDisplay=null,e.nodeCollisionLeft=null,e.nodeCollisionRight=null,e.nodeCollisionBody=null,e.nodeCollisionUp=null,e.row=0,e.curAnimaName="",e.saveTag=!1,e.isCanHeadTag=!1,e.isCanSave=!1,e.level=0,e.nodeWalls=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.nodeCollisionBody.addComponent(a.default).initBrick(s.brickInfo[s.BRICKTYPE.WALL],new s.MapData(-9999,-9999,s.BRICKTYPE.WALL,0,"",null,0)),this.nodeCollisionUp.addComponent(a.default).initBrick(s.brickInfo[s.BRICKTYPE.WALL],new s.MapData(-9999,-9999,s.BRICKTYPE.WALL,0,"",null,0));var e=this.nodeCollisionLeft.addComponent(c.default);e.initBrick(s.brickInfo[s.BRICKTYPE.SWITCHBRICK],new s.MapData(-9999,-9999,s.BRICKTYPE.SWITCHBRICK,0,"",null,1)),e.setCheckPoint(this);var o=this.nodeCollisionRight.addComponent(c.default);o.setCheckPoint(this),o.initBrick(s.brickInfo[s.BRICKTYPE.SWITCHBRICK],new s.MapData(-9999,-9999,s.BRICKTYPE.SWITCHBRICK,0,"",null,2)),this.armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,function(e){e.type==dragonBones.EventObject.COMPLETE&&("left"==t.curAnimaName?t.playAnima("save-over-left",0):"right"==t.curAnimaName?t.playAnima("save-over-right",0):"standby_1"==t.curAnimaName&&t.playAnima("standby",0))})},e.prototype.showFinishEffect=function(){},e.prototype.getCheckPointRow=function(){return this.row},e.prototype.initCheckPoint=function(t,e){this.row=t,this.level=e,this.setStage(e);var o=u.default.getInstance().getCheckPointStatus(t,this.level);0==o?(this.playAnima("standby_1",0),this.armatureDisplay.timeScale=0,this.saveTag=!1,this.isCanHeadTag=!1,this.isCanSave=!1,this.showWalls()):(this.saveTag=!0,this.isCanHeadTag=!0,1==o?this.playAnima("save-over-left",0):2==o&&this.playAnima("save-over-right",0))},e.prototype.createBrick=function(t,e,o){var n={};n.row=t,n.col=e,n.type=1,n.gid=o,n.res="wallBrick",this.nodeWalls.push(s.default.getInstance().createBrickByData(n,!0))},e.prototype.showWalls=function(){var t=this.row-11;this.createBrick(t,1,41),this.createBrick(t,2,42),this.createBrick(t,11,41),this.createBrick(t,12,42)},e.prototype.hideWalls=function(){for(var t=this,e=0,o=0;o<this.nodeWalls.length;o++){var n=this.nodeWalls[o];null!=n&&n.runAction(cc.sequence(cc.fadeTo(.5,0),cc.callFunc(function(){if(4==(e+=1)){var o=t.row-11;s.default.getInstance().removeBrickByRowCol(o,1),s.default.getInstance().removeBrickByRowCol(o,2),s.default.getInstance().removeBrickByRowCol(o,11),s.default.getInstance().removeBrickByRowCol(o,12)}})))}},e.prototype.resetCheckPoint=function(){this.initCheckPoint(this.row,this.level)},e.prototype.openState=function(){var t=this;this.isCanHeadTag||(this.isCanHeadTag=!0,this.armatureDisplay.timeScale=1,this.curAnimaName="",this.playAnima("standby_1",1),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.isCanSave=!0},.2))},e.prototype.remove=function(){},e.prototype.gameSave=function(t){!this.saveTag&&this.isCanSave&&(1==t?(this.saveTag=!0,app.platformMgr.logEvent("checkPoint",{type:"coin"}),this.playAnima("left",1),app.soundMgr.play(l.default.soundCheckPoint),u.default.getInstance().setCheckPointStatus(this.row,1),p.EVT.emit("GameCtrlSaveCheckPoint",this.row-7),app.user.updatePassedLevel(this.level,t)):2==t&&(this.saveTag=!0,app.platformMgr.logEvent("checkPoint",{type:"diamond"}),this.playAnima("right",1),app.soundMgr.play(l.default.soundCheckPoint),u.default.getInstance().setCheckPointStatus(this.row,2),p.EVT.emit("GameCtrlSaveCheckPoint",this.row-7),app.user.updatePassedLevel(this.level,t)),app.pageMgr.showDialog("LevelCompleteDialog",{level:this.level,score:this.level,type:t,hideCallBack:this.hideWalls.bind(this)}))},e.prototype.setStage=function(t){void 0===t&&(t=0);var e=String(t);1==e.length?(this.setShowNumber("0","left1",""),this.setShowNumber(e[0],"righnt1","right")):(this.setShowNumber(e[0],"left1",""),this.setShowNumber(e[1],"righnt1","right"))},e.prototype.setShowNumber=function(t,e,o){var n=this.armatureDisplay.armature().getSlot(e);dragonBones.CCFactory.getInstance().replaceSlotDisplay(this.armatureDisplay.getArmatureKey(),"Armature",e,o+t,n)},e.prototype.playAnima=function(t,e){this.curAnimaName!=t&&(this.curAnimaName=t,this.armatureDisplay.playAnimation(t,e))},r([f(dragonBones.ArmatureDisplay)],e.prototype,"armatureDisplay",void 0),r([f(cc.Node)],e.prototype,"nodeCollisionLeft",void 0),r([f(cc.Node)],e.prototype,"nodeCollisionRight",void 0),r([f(cc.Node)],e.prototype,"nodeCollisionBody",void 0),r([f(cc.Node)],e.prototype,"nodeCollisionUp",void 0),r([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../manager/BrickManager":"BrickManager","../manager/CheckPointManager":"CheckPointManager","./Define":"Define","./elements/SwitchBrick":"SwitchBrick","./elements/WallBrick":"WallBrick"}],CloudBrick:[function(t,e,o){"use strict";cc._RF.push(e,"8117fVKOH5OBL7LS4V+ZgQ0","CloudBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Global"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leaf=null,e}return i(e,t),e.prototype.initBrick=function(e,o){this.leaf.active=!1,t.prototype.initBrick.call(this,e,o),this.node.y+=17},e.prototype.changeStyle=function(){var t=this.mapData.gid;159==t&&(t=6,this.leaf.active=!0);var e="brick_1_"+t;null!=this.icon&&(this.icon.getComponent(cc.Sprite).spriteFrame=s.default.brickAtlas.getSpriteFrame(e))},r([p(cc.Node)],e.prototype,"leaf",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Brick":"Brick","../Global":"Global"}],CollectBrick:[function(t,e,o){"use strict";cc._RF.push(e,"cbe41tEp5hNAJOrolrxc+4V","CollectBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Global"),c=t("../../../pages/widget/AnimationFrame"),l=cc._decorator,p=l.ccclass,u=(l.property,{1:"peach-",2:"banana-",3:"carrot",4:"diamond"}),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anima=null,e.rewardNum=1,e}return i(e,t),e.prototype.initBrick=function(e,o){this.anima=this.node.children[0].getComponent(c.default),t.prototype.initBrick.call(this,e,o),this.node.scale=1,null!=o.extraInfo&&null!=o.extraInfo.num&&(this.rewardNum=Number(o.extraInfo.num),this.node.scale=1+.1*this.rewardNum-.5)},e.prototype.changeStyle=function(){this.anima.initAnimation(0,6,s.default.collectBrickAtlas,u[this.mapData.subType]),this.anima.play(10)},e.prototype.getRewardNum=function(){return this.rewardNum},e.prototype.isDiamond=function(){return 4==this.mapData.subType},r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../../../pages/widget/AnimationFrame":"AnimationFrame","../Brick":"Brick","../Global":"Global"}],ContinueDialog:[function(t,e,o){"use strict";cc._RF.push(e,"d41e13QcvpNTYub8ROyl5kv","ContinueDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../common/components/Breath"),c=t("../game/logic/Define"),l=t("../common/EventMgr"),p=cc._decorator,u=p.ccclass,h=p.property;(function(t){t[t.COUNTDOWNING=0]="COUNTDOWNING",t[t.SKIP=1]="SKIP",t[t.PAUSE=2]="PAUSE"})(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressSprite=null,e.continueBtn=null,e.continueMoneyBtn=null,e.skipNode=null,e.curMoney=null,e.text_fruitCount=null,e.node_minute=null,e._duration=8,e._status=a.SKIP,e.data={},e.totalTime=0,e}return i(e,t),e.prototype.update=function(t){if(this._status==a.COUNTDOWNING){var e=t/this._duration;this.progressSprite.fillRange-=e,this.totalTime+=t,this.node_minute.angle-=360*e,this.totalTime>=this._duration&&(this.progressSprite.fillRange=0,this._status=a.SKIP,this.onSkipBtnClick())}},e.prototype.onUpdateData=function(t){var e=this;this.data=t,this._continueCallback=t.reviveGame,this._skipCallback=t.skipGame,this.totalTime=0,this.node_minute.angle=90,this.progressSprite.fillRange=1,this._status=a.COUNTDOWNING,this.skipNode.active=!1,app.soundMgr.play(c.default.soundContinueTime),this.scheduleOnce(function(){e.skipNode.active=!0},1),this.curMoney.string=app.user.getCoinNum()+"",t.continueCount,this.curMoney.string=app.user.getCoinNum().toString(),this.text_fruitCount.string=c.default.continueSpendCoin.toString()},e.prototype.onEnable=function(){this.continueMoneyBtn.getComponent(s.default).enabled=!1,console.log("zzzzzzzzzzzz = "+app.user.getCoinNum()+" === "+this.continueMoneyBtn.interactable)},e.prototype.changeBntToGray=function(t,e){var o=0;e&&(o=1),t.getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(o));for(var n=0;n<t.childrenCount;n++)t.children[n].getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(o))},e.prototype.onHide=function(){this._status=a.PAUSE,app.soundMgr.stop(c.default.soundContinueTime)},e.prototype.onContinueBtnClick=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.isVideoLoad()&&(this._status=a.PAUSE,app.platformMgr.logButtonClickEvent("ContinueDialog_video"),app.platformMgr.showVideoAd("ContinueDialog",function(){app.pageMgr.hideDialog("ContinueDialog"),t._continueCallback(t._score)}))},e.prototype.onContinueMoneyBtnClick=function(){app.user.getCoinNum()<c.default.continueSpendCoin?l.EVT.emit("showPrompt","Not have enough coin"):(app.soundMgr.playClick(),app.user.addCoinNum(-1*c.default.continueSpendCoin),app.pageMgr.hideDialog("ContinueDialog"),this._continueCallback(this._score),app.platformMgr.logButtonClickEvent("ContinueDialog_coin"))},e.prototype.onSkipBtnClick=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("ContinueDialog"),this._skipCallback(),app.platformMgr.logButtonClickEvent("ContinueDialog_skip")},r([h(cc.Sprite)],e.prototype,"progressSprite",void 0),r([h(cc.Button)],e.prototype,"continueBtn",void 0),r([h(cc.Button)],e.prototype,"continueMoneyBtn",void 0),r([h(cc.Node)],e.prototype,"skipNode",void 0),r([h(cc.Label)],e.prototype,"curMoney",void 0),r([h(cc.Label)],e.prototype,"text_fruitCount",void 0),r([h(cc.Node)],e.prototype,"node_minute",void 0),r([u],e)}(BaseDialog);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../common/components/Breath":"Breath","../game/logic/Define":"Define"}],DefaultHelper:[function(t,e){"use strict";cc._RF.push(e,"07f8fK+lplNtJnmw4MI1Pki","DefaultHelper");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});t("PlatHelper");var i=0,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadAsync=function(){},e.isInterstitialLoad=function(){return!0},e.showInterstitialAd=function(t,e){console.log("\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a"),i=0,e&&e()},e.loadVideoAsync=function(){},e.isVideoLoad=function(){return!0},e.showVideoAd=function(t,e){console.log("\u5c55\u793a\u89c6\u9891\u5e7f\u544a"),i=0,e&&e()},e.logEvent=function(t,e){console.log(t,e)},e.autoShowAd=function(t,e){++i>=t&&this.isInterstitialLoad()&&(this.logEvent("autoShowAd"),this.showInterstitialAd("autoShow")),e&&e()},e}return n(e,t),e.prototype.init=function(){},e.prototype.showBannerAd=function(){},e.prototype.hideBannerAd=function(){},e.prototype.getDataAsync=function(t){return new Promise(function(e){var o=cc.sys.localStorage.getItem(t);e(o?JSON.parse(o):{})})},e.prototype.setDataAsync=function(t,e){return new Promise(function(o){cc.sys.localStorage.setItem(t,JSON.stringify(e)),o()})},e}(PlatHelper);window.DefaultHelper=r,cc._RF.pop()},{PlatHelper:"PlatHelper"}],Define:[function(t,e,o){"use strict";cc._RF.push(e,"d88eeTYKLdHZLPwUenTrjR9","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.BULLETMOVETYPE=o.GAMESTATUS=o.DIR=void 0,function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t[t.CENTER=4]="CENTER"}(o.DIR||(o.DIR={})),function(t){t[t.NONE=0]="NONE",t[t.GAMING=1]="GAMING",t[t.PAUSE=2]="PAUSE",t[t.GUIDE=3]="GUIDE",t[t.FAIL=4]="FAIL"}(o.GAMESTATUS||(o.GAMESTATUS={})),o.BULLETMOVETYPE=cc.Enum({NORMAL:0,BEHAVIOR:1});var n=function(){function t(){}return t.brickWidth=54,t.brickHeight=54,t.cameraOffsetX=756,t.brickCol=13,t.maxRoleCount=47,t.mapMaxRow=75,t.roleAnimationOffsetY=-45,t.invalidValue=-9999,t.openBoxSpendCoinCount=20,t.openBoxSpendDiamondCount=2,t.continueSpendCoin=200,t.boxRewardCoinCount=200,t.maxMapStyleIndex=3,t.showContinueDialogIntervalTime=0,t.groupRole="role",t.groupWall="wall",t.groupWall1="wall1",t.groupBullet="bullet",t.groupProp="prop",t.groupMonsterType1="monsterType1",t.groupMonsterType2="monsterType2",t.effectCollectProp="collectEffect",t.effectRoleDoubleJump="doublejumpEffect",t.effectRoleJump="jumpEffect",t.effectRoleJump1="jumpEffect1",t.effctRoleSlide="slideEffect",t.effctRoleGlideDroping="glideDroping",t.effctRoleRun="runEffect",t.effectRoleDeath="roleDeathEffect",t.effectRoleRevive="roleReviveEffect",t.effectMonsterDeath="monsterDeathEffect",t.effectPaoFire="paoFireEffect",t.effectBrokenBirck="brokenBrickEffect",t.effectBroken1Birck="brokenBrickEffect1",t.effectMoveDropEase="moveDropEaseEffect",t.shopConfigs={0:{piece:.99,reward:1e3,productId:"coin1000"},1:{piece:1.99,reward:3e3,productId:"coin3000"},2:{piece:3.99,reward:5e3,productId:"coin5000"},3:{piece:2.99,reward:[4,5,12,15],productId:"skinpack"}},t.roleSkinConfigs={0:{roleId:7,getType:0,videoCount:0,coinCount:0,quality:0},1:{roleId:2,getType:0,videoCount:0,coinCount:100,quality:0},2:{roleId:34,getType:0,videoCount:0,coinCount:200,quality:0},3:{roleId:22,getType:0,videoCount:0,coinCount:200,quality:0},4:{roleId:25,getType:0,videoCount:0,coinCount:200,quality:0},5:{roleId:15,getType:0,videoCount:0,coinCount:200,quality:0},6:{roleId:21,getType:0,videoCount:0,coinCount:300,quality:0},7:{roleId:35,getType:0,videoCount:0,coinCount:300,quality:0},8:{roleId:37,getType:0,videoCount:0,coinCount:400,quality:0},9:{roleId:12,getType:0,videoCount:1,coinCount:500,quality:1},10:{roleId:11,getType:0,videoCount:1,coinCount:500,quality:1},11:{roleId:18,getType:0,videoCount:1,coinCount:500,quality:1},12:{roleId:31,getType:0,videoCount:2,coinCount:800,quality:1},13:{roleId:28,getType:0,videoCount:2,coinCount:800,quality:1},14:{roleId:24,getType:0,videoCount:2,coinCount:800,quality:1},15:{roleId:36,getType:0,videoCount:4,coinCount:1e3,quality:1},16:{roleId:26,getType:0,videoCount:4,coinCount:1e3,quality:1},17:{roleId:27,getType:0,videoCount:6,coinCount:1e3,quality:1},18:{roleId:41,getType:3,videoCount:0,coinCount:50,quality:2},19:{roleId:3,getType:3,videoCount:0,coinCount:50,quality:2},20:{roleId:4,getType:3,videoCount:0,coinCount:50,quality:2},21:{roleId:6,getType:3,videoCount:0,coinCount:100,quality:2},22:{roleId:8,getType:3,videoCount:0,coinCount:100,quality:2},23:{roleId:10,getType:3,videoCount:0,coinCount:100,quality:2},24:{roleId:23,getType:3,videoCount:0,coinCount:200,quality:2},25:{roleId:19,getType:3,videoCount:0,coinCount:200,quality:2},26:{roleId:17,getType:3,videoCount:0,coinCount:200,quality:2},27:{roleId:1,getType:4,videoCount:0,coinCount:0,quality:3},28:{roleId:14,getType:4,videoCount:0,coinCount:0,quality:3},29:{roleId:13,getType:4,videoCount:0,coinCount:0,quality:3},30:{roleId:16,getType:4,videoCount:0,coinCount:0,quality:3},31:{roleId:20,getType:4,videoCount:0,coinCount:0,quality:3},32:{roleId:9,getType:4,videoCount:0,coinCount:0,quality:3},33:{roleId:29,getType:4,videoCount:0,coinCount:0,quality:3},34:{roleId:30,getType:4,videoCount:0,coinCount:0,quality:3},35:{roleId:32,getType:4,videoCount:0,coinCount:0,quality:3},36:{roleId:33,getType:4,videoCount:0,coinCount:0,quality:3},37:{roleId:38,getType:4,videoCount:0,coinCount:0,quality:3},38:{roleId:39,getType:4,videoCount:0,coinCount:0,quality:3},39:{roleId:5,getType:4,videoCount:0,coinCount:0,quality:3},40:{roleId:42,getType:4,videoCount:0,coinCount:0,quality:3},41:{roleId:40,getType:4,videoCount:0,coinCount:0,quality:3},42:{roleId:43,getType:4,videoCount:0,coinCount:0,quality:3},43:{roleId:44,getType:4,videoCount:0,coinCount:0,quality:3},44:{roleId:45,getType:4,videoCount:0,coinCount:0,quality:3},45:{roleId:46,getType:4,videoCount:0,coinCount:0,quality:3},46:{roleId:47,getType:4,videoCount:0,coinCount:0,quality:3}},t.shopRoleSkinId=3,t.soundBtnClick="btn_click",t.soundCamera="camera",t.soundCannon="cannon",t.soundCollect="collect",t.soundRoleRevive="player_reborn",t.soundMonsterDead="enemy_hit",t.soundJump="jump",t.soundRoleDead="player_die",t.soundContinueTime="continue_tick",t.soundCheckPoint="checkPoint_click",t.shareBrickResArr=["shareTrophyBrick","shareTrophyBrick1","shareTV","shareStage","shareHeadphone","shareWatchTV"],t.roleSkinTitleColors=["#009F3A","#00AEEC","#8C44C8","#c0000a","#c0000a","#c0000a"],t.roleSkinTitleOutLineColors=["#002A11","#002667","#1D052F","#370002","#370002","#370002"],t.roleTitleDesc=["GET FOR COIN","GET FOR COIN","GET FOR DO","GET FOR STAGE","GET FOR STAGE","GET FOR STAGE"],t.roleQualityColors=["#003d10","#00174c","#1e0038","#400003","#3d1b00"],t}();o.default=n,cc._RF.pop()},{}],DoorBrick:[function(t,e,o){"use strict";cc._RF.push(e,"0a5e4IKrX5DwpEqW+OZ7VxG","DoorBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=t("../Global"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.doorRoot=null,e.node_wall=null,e.nodeLight=null,e.openStatus=!1,e.doorTag="",e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.y+=s.default.brickHeight,this.openStatus=!1,this.node.active=!0,this.icon.node.position=cc.Vec2.ZERO,this.nodeLight.active=!1,this.node_wall.setParent(c.default.getNodeRootByIndex(0)),this.node_wall.position=this.node.position,0==this.getCol()?(this.node.scaleX=-1,this.node_wall.scaleX=-1):(this.node.scaleX=1,this.node_wall.scaleX=1)},e.prototype.changeStyle=function(){},e.prototype.openDoor=function(){this.openStatus||(this.openStatus=!0,this.nodeLight.active=!0,this.nodeLight.stopAllActions(),this.nodeLight.opacity=0,this.nodeLight.runAction(cc.sequence(cc.fadeTo(1,200),cc.fadeTo(1,255)).repeatForever()),app.platformMgr.logEvent("reach_stage",{sys:app.user.getMapStyleIndex(),stage:c.default.curLevel}))},e.prototype.closeDoor=function(){this.openStatus&&(this.openStatus=!1,this.nodeLight.active=!1)},e.prototype.setDoorTag=function(t){this.doorTag=t},e.prototype.getDoorTag=function(){return this.doorTag},e.prototype.show=function(){t.prototype.show.call(this),this.openStatus=!1;for(var e=this.doorRoot.children.length,o=0;o<e;o++)this.doorRoot.children[o].opacity=255},e.prototype.hide=function(){t.prototype.hide.call(this)},e.prototype.setCollisionStatus=function(){},r([u(cc.Node)],e.prototype,"doorRoot",void 0),r([u(cc.Node)],e.prototype,"node_wall",void 0),r([u(cc.Node)],e.prototype,"nodeLight",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../Brick":"Brick","../Define":"Define","../Global":"Global"}],DragonBoneEffect:[function(t,e,o){"use strict";cc._RF.push(e,"283b3nYlwlPY6As+YjW/xQ2","DragonBoneEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Effect"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animaName="newAnimation",e.armature=null,e.completeCallBack=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.armature=this.node.getComponent(dragonBones.ArmatureDisplay),this.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(e){e.type==dragonBones.EventObject.COMPLETE&&null!=t.completeCallBack&&t.completeCallBack(t)})},e.prototype.playEffect=function(t,e){this.node.scale=this.scale,this.node.setSiblingIndex(0),this.armature.playAnimation(this.animaName,1),this.completeCallBack=e},r([l],e.prototype,"animaName",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"./Effect":"Effect"}],EffectManager:[function(t,e,o){"use strict";cc._RF.push(e,"94486Ua7nJJYaJw7We4y4vN","EffectManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../logic/effects/Effect"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(){this.poolArr=new Map,this.cachePrefabArr=new Map,this.effectRoot=null}var e;return e=t,t.getInstance=function(){return this.instance},t.prototype.initEffectRootNode=function(t){this.effectRoot=t},t.prototype.preLoadEffects=function(t){var e=this;cc.loader.loadResDir("prefabs/effects",function(o,n){for(var i=0;i<n.length;i++)e.cachePrefabArr.set(n[i].name,n[i]);for(var r=0;r<50;r++)e.putPool(cc.instantiate(e.cachePrefabArr.get("collectEffect")));t()})},t.prototype.showEffect=function(t,e,o,n,r,a){var s=this;void 0===o&&(o=1),void 0===n&&(n=1),void 0===r&&(r=null),void 0===a&&(a=null);var c=this.getPool(t);return null==a?this.effectRoot.addChild(c):a.addChild(c),c.position=e,c.getComponent(i.default).playEffect(o,function(t){s.putPool(t.node),t.node.removeFromParent(),null!=r&&r()}),c.scaleX=c.scaleX*n,c},t.prototype.putPool=function(t){if(this.poolArr.has(t.name))(e=this.poolArr.get(t.name)).put(t);else{var e=new cc.NodePool;this.poolArr.set(t.name,e),e.put(t)}},t.prototype.getPool=function(t){if(this.poolArr.has(t)){var e=this.poolArr.get(t);if(e.size()>0)return e.get()}return cc.instantiate(this.cachePrefabArr.get(t))},t.instance=new e,n([a],t)}());o.default=s,cc._RF.pop()},{"../logic/effects/Effect":"Effect"}],Effect:[function(t,e,o){"use strict";cc._RF.push(e,"bce2b43VkRI+IIebGer48vo","Effect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scale=1,e}return i(e,t),e.prototype.playEffect=function(){},r([c],e.prototype,"scale",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],EngineConfig:[function(t,e){"use strict";cc._RF.push(e,"456ff2qdzxEEZbzn3IDUUEN","EngineConfig"),cc.macro.ENABLE_WEBGL_ANTIALIAS=!0,cc.FillTo=cc.Class({name:"cc.FillTo",extends:cc.ActionInterval,ctor:function(t,e){this._startRange=1,this._endRange=0,this._deltaRange=0,cc.FillTo.prototype.initWithDuration.call(this,t,e)},initWithDuration:function(t,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,t)&&(this._endRange=e,!0)},clone:function(){var t=new cc.FillTo;return this._cloneDecoration(t),t.initWithDuration(this._duration,this._endRange),t},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.call(this,t);var e=t.getComponent(cc.Sprite);e&&(this._startRange=e.fillRange,this._deltaRange=this._endRange-this._startRange)},update:function(t){if(t=this._computeEaseTime(t),this.target){var e=this.target.getComponent(cc.Sprite);e&&(e.fillRange=this._startRange+this._deltaRange*t)}}}),cc.fillTo=function(t,e){return new cc.FillTo(t,e)},cc._RF.pop()},{}],EventBrick:[function(t,e,o){"use strict";cc._RF.push(e,"d3b08QuybxJk7luxtv8enrk","EventBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.changeStyle=function(){this.icon.spriteFrame=null,this.node.active=!1},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../Brick":"Brick"}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"059b4mOij1Kho2IiNW7osdv","EventMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EVT=o.EventMgr=void 0;var r=function(t){function e(){return t.call(this)||this}return i(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e._instance=null,e}(cc.EventTarget);o.EventMgr=r,o.EVT=r.getInstance(),cc._RF.pop()},{}],FBHelper:[function(t,e){"use strict";cc._RF.push(e,"905c0w0we5NZLffnf1YfeSz","FBHelper");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});t("PlatHelper");var i=window.fb_interstitial_ids,r=0,a=null,s=!1,c=!1,l=window.fb_video_ids,p=0,u=null,h=!1,d=!1,f={},g=window.FBInstant,y=3,m=!1,v={},_=null,b=[],R={},C=Date.now(),I=[],B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){},e.prototype.loadAsync=function(t,e){var o=this;if(void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),c||g.getSupportedAPIs().indexOf("getInterstitialAdAsync")<0)e&&e("not support");else{var n=function(){c=!1,a&&(s=!0,t&&t(),o.logEvent("iad_load",{type:"suc"}))},l=function(n){s=!1,c=!1,o.logEvent("iad_load",{type:"fail"}),f[i[r]]=a,a=null,++r<i.length?(c=!0,setTimeout(function(){c=!1,o.loadAsync(t,e)},5e3)):(r=0,c=!0,setTimeout(function(){c=!1},9e4),e&&e(n))},p=i[r];this.logEvent("iad_load",{type:"begin"}),c=!0,a=f[p],f[p]=null,a?a.loadAsync().then(n,l):g.getInterstitialAdAsync(p).then(function(t){return a=t,t.loadAsync()},function(t){c=!0,e&&e(t)}).then(n,l)}},e.prototype.isInterstitialLoad=function(){s||this.loadAsync();var t=Date.now()-C>9e4;return a&&s&&t},e.prototype.showInterstitialAd=function(t,e){var o=this;void 0===e&&(e=function(){}),a&&s?(y=0,C=Date.now(),a.showAsync().then(function(){s=!1,r=0,a=null,o.loadAsync(),e()},function(){e&&e(),s=!1,r=0,a=null,o.loadAsync()}),this.logEvent("iad_show",{from:t})):e()},e.prototype.loadVideoAsync=function(t,e){var o=this;if(void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),d||g.getSupportedAPIs().indexOf("getRewardedVideoAsync")<0)e&&e("not support");else{console.log("loadVideoAsync");var n=function(){d=!1,u&&(h=!0,t&&t(),o.logEvent("rad_load",{type:"suc"}))},i=function(t){"ADS_TOO_MANY_INSTANCES"!=t.code&&"CLIENT_UNSUPPORTED_OPERATION"!=t.code&&(h=!1,d=!1,f[l[p]]=u,u=null,o.logEvent("rad_load",{type:"fail"}),++p<l.length?(d=!0,setTimeout(function(){d=!1,o.loadVideoAsync()},5e3)):(p=0,d=!0,setTimeout(function(){d=!1},9e4),e&&e(t)))},r=l[p];this.logEvent("rad_load",{type:"begin"}),d=!0,u=f[r],f[r]=null,u?(C=Date.now(),u.loadAsync().then(n,i)):g.getRewardedVideoAsync(r).then(function(t){return u=t,t.loadAsync()}).then(n,i)}},e.prototype.isVideoLoad=function(){return h||this.loadVideoAsync(),u&&h},e.prototype.showVideoAd=function(t,e){var o=this;try{if(h&&u)return y=0,u.showAsync().then(function(){e(),h=!1,p=0,u=null,o.loadVideoAsync()},function(t){"ADS_NOT_LOADED"==t.code&&(f[l[p]]=u),h=!1,p=0,u=null,o.loadVideoAsync()}),void this.logEvent("rad_show",{from:t})}catch(n){}},e.prototype.showBannerAd=function(){},e.prototype.hideBannerAd=function(){},e.prototype.autoShowAd=function(t,e){++y>=t&&this.isInterstitialLoad()?(this.logEvent("autoShowAd"),this.showInterstitialAd("autoShow",e)):e()},e.prototype.logEvent=function(t,e,o){void 0===e&&(e={}),void 0===o&&(o=1),g.logEvent(t,o,e)},e.prototype.getDataAsync=function(t){return new Promise(function(e,o){g.player.getDataAsync([t]).then(function(o){console.log("data",o),o&&o[t]?e(o[t]):e({})}).catch(function(t){console.log("err",t),o({})})})},e.prototype.setDataAsync=function(t,e){var o={};return o[t]=e,g.player.setDataAsync(o)},e.prototype.initPay=function(){g.getSupportedAPIs().indexOf("payments.purchaseAsync")&&(g.payments.onReady(function(){m=!0}),g.payments.getCatalogAsync().then(function(t){for(var e=0;e<t.length;e++)v[t[e].productID]=t[e].price}).catch(function(){}),g.payments.getPurchasesAsync().then(function(t){for(var e in t)g.payments.consumePurchaseAsync(t[e].purchaseToken).then(function(){}).catch(function(){})}))},e.prototype.isPayReady=function(){return m},e.prototype.getPrice=function(t,e){return v[t]||e},e.prototype.purchase=function(t,e,o){var n=this;m&&(this.logEvent("pay_purchase",{id:t}),g.payments.purchaseAsync({productID:t,developerPayload:"words"}).then(function(i){n.logEvent("pay_purchase_success",{id:t}),g.payments.consumePurchaseAsync(i.purchaseToken).then(function(){n.logEvent("pay_consume_success",{id:t}),e&&e()}).catch(function(t){o&&o(t.message),n.logEvent("pay_consume_error",{code:t.code,message:t.message})})}).catch(function(t){o&&o(t.message),n.logEvent("pay_purchase_error",{code:t.code,message:t.message})}))},e.prototype.getContextID=function(){return g.context.getID()},e.prototype.getContextPlayers=function(t){"SOLO"!=g.context.getType()?(I.push(t),I.length>1||g.context.getPlayersAsync().then(function(t){for(var e=[],o=0;o<t.length;o++)e.push({playerId:t[o].getID(),name:t[o].getName(),photo:t[o].getPhoto()});I.forEach(function(t){t(e)}),I=[]}).catch(function(t){console.log(t),I.forEach(function(t){t([])}),I=[]})):t([])},e.prototype.getPlayerID=function(){return g.player.getID()},e.prototype.getPlayerName=function(){return g.player.getName()},e.prototype.getPlayerPhoto=function(){return g.player.getPhoto()},e.prototype.createShortcutAsync=function(){var t=this;return new Promise(function(e){g.canCreateShortcutAsync().then(function(o){o?(t.logEvent("shortCut_show"),g.createShortcutAsync().then(function(){t.logEvent("shortCut_suc"),app.user.shotcutCreated=!0,e()}).catch(function(){e()})):e()}).catch(function(){e()})})},e.prototype.subscribeBotAsync=function(){var t=this;return new Promise(function(e){g.player.canSubscribeBotAsync().then(function(){t.logEvent("bot_show"),g.player.subscribeBotAsync().then(function(){t.logEvent("bot_suc"),e()}).catch(function(t){console.log("subscribeBotAsync fail",t),e(t)})}).catch(function(t){console.log("canSubscribeBotAsync is no"),e(t)})})},e.prototype.chooseFriends=function(t,e){var o=this;this.logEvent("choose_show",{from:t}),g.context.chooseAsync({filters:["NEW_CONTEXT_ONLY"]}).then(function(){o.logEvent("choose_suc",{from:t}),e&&e()}).catch(function(t){"SAME_CONTEXT"!=t.code?e&&e(t):e&&e()})},e.prototype.playWithFriend=function(t,e,o){var n=this;this.logEvent("recommend_show",{from:t}),g.context.createAsync(e).then(function(){n.logEvent("recommend_suc",{from:t}),o&&o()}).catch(function(t){"SAME_CONTEXT"!=t.code?o&&o(t):o&&o()})},e.prototype.playWithGroup=function(t,e,o){var n=this;this.logEvent("recommend_show",{from:t}),g.context.switchAsync(e).then(function(){n.logEvent("recommend_suc",{from:t}),o&&o()}).catch(function(t){o&&o(t)})},e.prototype.sendMessageToFriend=function(t,e){var o=this,n=t.data||{};n.from=t.from||"default";var i=t.template||n.from;g.updateAsync({action:"CUSTOM",cta:t.cta||"Play",template:i,text:t.text||"",image:t.image,data:n,strategy:t.strategy||"IMMEDIATE",notification:t.notification||"NO_PUSH"}).then(function(){o.logEvent("send_message_success",{from:t.from}),e&&e()}).catch(function(n){e&&e(n),o.logEvent("send_message_fail",{from:t.from,code:n.code})})},e.prototype.shareGame=function(t,e){var o=t.data||{};o.from=t.from,this.logEvent("share_game",{from:t.from}),g.shareAsync({intent:"SHARE",image:t.image,text:t.text||"",data:o}).then(function(){e&&e()}).catch(function(t){console.log("err",t),e&&e(t)})},e.prototype.getConnectedPlayersAsync=function(){return _?Promise.resolve(_):b.length>1?new Promise(function(t){b.push(t)}):new Promise(function(t){b.push(t),g.player.getConnectedPlayersAsync().then(function(t){_=t,console.log("getConnectedPlayers",_),b.forEach(function(e){console.log("getConnectedPlayersAsync=====",t.length),e(t)}),b=[]},function(t){console.log(t),b.forEach(function(t){t([])}),b=[]})})},e.prototype.setRankScore=function(t,e,o,n){var i=this;g.getLeaderboardAsync(t).then(function(t){return t.setScoreAsync(e,o||"")}).then(function(){n&&n(),console.log("setRankScore name = "+t+"scoreNum = "+e)}).catch(function(t){console.log("error",t),i.logEvent("rankset_fail",{code:t.code}),n&&n(t)})},e.prototype.getRankList=function(t,e,o,n,i){var r=this;console.log("getRankDataList",t,e,o,i),g.getLeaderboardAsync(t).then(function(n){return console.log("\u015b2222  name = "+t),i?n.getConnectedPlayerEntriesAsync():n.getEntriesAsync(e,o)}).then(function(e){console.log("entries",t,e);for(var r=[],a=0;a<e.length;a++)o++,r.push({playerId:e[a].getPlayer().getID(),photo:e[a].getPlayer().getPhoto(),nickName:e[a].getPlayer().getName(),rank:o,fbRank:e[a].getRank(),score:e[a].getScore(),customData:e[a].getExtraData(),isFriends:i});R[t]=r,n(r,t)}).catch(function(e){console.log(e),r.logEvent("ranklist_fail",{code:e.code}),n(R[t]||[],t,e)})},e.prototype.postSessionScore=function(t){this.logEvent("post_tourament"),g.postSessionScore(t)},e.prototype.matchPlayerAsync=function(t,e,o){var n=this;return new Promise(function(i){g.checkCanPlayerMatchAsync().then(function(r){r?g.matchPlayerAsync(t,e,o).then(function(){i(n.getContextID())}).catch(function(){i()}):i()})})},e}(PlatHelper);window.FBHelper=B,cc._RF.pop()},{PlatHelper:"PlatHelper"}],FlyGoldEffectDialog:[function(t,e,o){"use strict";cc._RF.push(e,"95875sW2J5En6WYkmYxVbNa","FlyGoldEffectDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Global"),s=t("../common/EventMgr"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_gold=null,e.node_goldRoot=null,e.targetPos=cc.Vec2.ZERO,e.maxNum=0,e}return i(e,t),e.prototype.onLoad=function(){s.EVT.on("FlyGoldEffectDialog_FlyGlod",this.flyGold,this)},e.prototype.onUpdateData=function(t){this.targetPos=t.targetPos,this.maxNum=t.num;var e=0;this.node_goldRoot.position=cc.Vec2.ZERO,this.node_goldRoot.x=t.initPos.x,this.node_goldRoot.removeAllChildren(!0);var o=t.pause;null!=t.info?this.node_gold.getComponent(cc.Sprite).spriteFrame=a.default.commonAtlas.getSpriteFrame(t.info.res):this.node_gold.getComponent(cc.Sprite).spriteFrame=a.default.commonAtlas.getSpriteFrame("turntable_peach"),this.targetPos.x-=t.initPos.x;for(var n=0;n<this.maxNum;n++){var i=cc.instantiate(this.node_gold);this.node_goldRoot.addChild(i),i.x=100*Math.random()-50,i.y=100*Math.random()-50-250+t.initPos.y,i.scale=0,o?i.runAction(cc.sequence(cc.delayTime(.5*Math.random()),cc.scaleTo(.5+.5*Math.random(),1).easing(cc.easeElasticOut(1)))):i.runAction(cc.sequence(cc.delayTime(.5*Math.random()),cc.scaleTo(.5+.5*Math.random(),1).easing(cc.easeElasticOut(1)),cc.moveTo(.5,this.targetPos),cc.removeSelf(),cc.callFunc(function(){++e>=this.maxNum&&app.pageMgr.hideDialog("FlyGoldEffectDialog")}.bind(this))))}},e.prototype.flyGold=function(){for(var t=0,e=0;e<this.maxNum;e++)this.node_goldRoot.children[e].runAction(cc.sequence(cc.delayTime(.5*Math.random()),cc.moveTo(.5,this.targetPos),cc.removeSelf(),cc.callFunc(function(){++t>=this.maxNum&&app.pageMgr.hideDialog("FlyGoldEffectDialog")}.bind(this))))},r([p(cc.Node)],e.prototype,"node_gold",void 0),r([p(cc.Node)],e.prototype,"node_goldRoot",void 0),r([l],e)}(BaseDialog);o.default=u,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Global":"Global"}],FrameEffect:[function(t,e,o){"use strict";cc._RF.push(e,"65e0cKUqG5HeZ8MLxFrRFe3","FrameEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Effect"),s=t("../../../pages/widget/AnimationFrame"),c=t("../Global"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animationFrame=null,e.minFrame=0,e.maxFrame=0,e.speed=0,e.prefix="",e}return i(e,t),e.prototype.onLoad=function(){this.animationFrame=this.node.getComponent(s.default),this.animationFrame.initAnimation(this.minFrame,this.maxFrame,c.default.effectAtlas,this.prefix)},e.prototype.playEffect=function(t,e){var o=this;this.node.scale=this.scale,this.animationFrame.play(this.speed,t),this.animationFrame.setFinishCallBack(function(){null!=e&&e(o)})},r([u],e.prototype,"minFrame",void 0),r([u],e.prototype,"maxFrame",void 0),r([u],e.prototype,"speed",void 0),r([u],e.prototype,"prefix",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../../../pages/widget/AnimationFrame":"AnimationFrame","../Global":"Global","./Effect":"Effect"}],FriendInfoItem:[function(t,e,o){"use strict";cc._RF.push(e,"e44a9EeQp5KZ466bfNWb0Ne","FriendInfoItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.data=null,e}return i(e,t),e.prototype.onUpdateData=function(t){var e=this;this.data=t,t.photo&&cc.loader.load(t.photo,function(o,n){o||e.data!=t||(e.avatar.spriteFrame=new cc.SpriteFrame(n))}),this.node.children[2].getComponent(cc.Label).string=t.score.toString()},e.prototype.getFriendName=function(){return null==this.data?"":this.data.name},e.prototype.getScore=function(){return null==this.data?0:this.data.score},e.prototype.removeEffect=function(t){var e=this;this.node.runAction(cc.sequence(cc.delayTime(.3),cc.fadeOut(.5),cc.callFunc(function(){t(e.data.name)})))},r([c(cc.Sprite)],e.prototype,"avatar",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FrozenBrick:[function(t,e,o){"use strict";cc._RF.push(e,"9f7dcXctnhHt72QPXFI2wXx","FrozenBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Global"),c=t("./WallBrick"),l=t("../../manager/BrickManager"),p=t("../Define"),u=t("../../../data/TurnTableCfg"),h=t("../../../common/EventMgr"),d=cc._decorator,f=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBtn=null,e.roleRoot=null,e.boxRoot=null,e.boxClose=null,e.boxOpen=null,e.node_video=null,e.armature=null,e.node_collision=null,e.isCanCallBack=!1,e.status=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(e){e.type==dragonBones.EventObject.COMPLETE&&t.isCanCallBack&&(t.isCanCallBack=!1,t.icon.node.active=!1,app.pageMgr.showDialog("ShowRewardDialog",{info:{type:2,param:t.mapData.extraInfo.subType},callBack:function(){s.default.isCanJump=!0}}))});var e=this.node_collision.position;this.node_collision.addComponent(c.default).initBrick(l.brickInfo[l.BRICKTYPE.WALL],new l.MapData(-9999,-9999,l.BRICKTYPE.WALL,0,"",null,0)),this.node_collision.position=e},e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.resetFrozenBrick(this.mapData.extraInfo),this.node_collision.active=!0,this.icon.node.active=!0,this.status=0,this.nodeBtn.y=-72},e.prototype.resetFrozenBrick=function(t){var e=this;if(this.isCanCallBack=!1,this.roleRoot.active=!1,this.boxRoot.active=!1,this.status=0,this.nodeBtn.y=-72,this.node.x=this.node.x+.5*p.default.brickWidth,2==this.mapData.extraInfo.type&&app.user.isOwnRoleById(this.mapData.extraInfo.subType)||3==this.mapData.extraInfo.type)return this.boxRoot.active=!0,void this.updateBoxStatus();this.roleRoot.active=!0,this.mapData.extraInfo=t,this.armature.playAnimation("danji",1),cc.loader.loadRes("textures/roles/role"+this.mapData.extraInfo.subType,cc.SpriteFrame,function(t,o){t?console.log("resetFrozenBrick \u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):e.icon.spriteFrame=o})},e.prototype.unfrozen=function(){var t=this;if(1!=this.status)if(app.platformMgr.isVideoLoad()){var e=app.user.isOwnRoleById(this.mapData.extraInfo.subType)&&2==this.mapData.extraInfo.type||3==this.mapData.extraInfo.type,o="frozen";e&&(o="box"),app.platformMgr.showVideoAd(o,function(){t.status=1,app.soundMgr.play(p.default.soundCheckPoint),t.nodeBtn.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,-52)),cc.callFunc(function(){if(e)return s.default.isCanJump=!1,t.scheduleOnce(function(){app.pageMgr.showDialog("ShowRewardDialog",{info:{type:0,param:p.default.boxRewardCoinCount,res:t.getShowRewardRes()},callBack:function(){s.default.isCanJump=!0}})},.5),void t.updateBoxStatus();s.default.shakeNewAction(t.node.children[0],5,function(){t.isCanCallBack=!0,s.default.isCanJump=!1,t.armature.playAnimation("pobing",1),t.updateBoxStatus(),t.node_collision.active=!1})})))})}else h.EVT.emit("showPrompt","Video load failed")},e.prototype.updateBoxStatus=function(){this.boxClose.active=!1,this.boxOpen.active=!1,1==this.status?this.boxOpen.active=!0:this.boxClose.active=!0,this.node_video.active=!1,this.node_collision.active=!0},e.prototype.getShowRewardRes=function(){for(var t=[],e=u.TurnTableCfg[1].data,o=0;o<8;o++){var n=e[o].res;0==e[o].type&&t.push(n)}return t[s.default.getRandom(0,t.length)]},r([g(cc.Node)],e.prototype,"nodeBtn",void 0),r([g(cc.Node)],e.prototype,"roleRoot",void 0),r([g(cc.Node)],e.prototype,"boxRoot",void 0),r([g(cc.Node)],e.prototype,"boxClose",void 0),r([g(cc.Node)],e.prototype,"boxOpen",void 0),r([g(cc.Node)],e.prototype,"node_video",void 0),r([g(dragonBones.ArmatureDisplay)],e.prototype,"armature",void 0),r([g(cc.Node)],e.prototype,"node_collision",void 0),r([f],e)}(a.default);o.default=y,cc._RF.pop()},{"../../../common/EventMgr":"EventMgr","../../../data/TurnTableCfg":"TurnTableCfg","../../manager/BrickManager":"BrickManager","../Brick":"Brick","../Define":"Define","../Global":"Global","./WallBrick":"WallBrick"}],GameConfig:[function(t,e){"use strict";cc._RF.push(e,"a00c1DRKNNLFo9zMchz64lX","GameConfig"),window.GameName="Endless Jump",window.GameVersion="1.25",window.DEV=!1,window.packageType=1,window.FB_APPID="823434724727040",window.wx_banner_id="adunit-56c63c8e33f1eb68",window.wx_video_id="adunit-56c63c8e33f1eb68",window.fb_interstitial_ids=["823434724727040_823440141393165"],window.fb_video_ids=["823434724727040_823439831393196"],window.contextual_rank_name="contextural_rank",window.week_rank_name="week_rank",window.global_rank_name="global_rank",window.GAME_ID=49,window.KEYPART1="3415",window.KEYPART2="a003e21f95e",window.KEYPART3="4673f549",window.KEYPART4="86d63c7e2",window.BOT_URL="https://fb-bot.capjoy.com/api/v0/upload_"+GAME_ID,window.SERVER_URL="https://fb-api.capjoy.com",window.AD_URL="https://api.conchgame.com",cc._RF.pop()},{}],GameConstant:[function(t,e,o){"use strict";cc._RF.push(e,"51710SWRxBMpIwI0osq0lpw","GameConstant"),Object.defineProperty(o,"__esModule",{value:!0}),o.PackageType=o.EntryType=o.BALL_TYPE=o.max_level=void 0,o.max_level=19,function(t){t[t.NORMAL=0]="NORMAL",t[t.CLEAN=1]="CLEAN",t[t.BOARD=2]="BOARD",t[t.TIMEEND=3]="TIMEEND"}(o.BALL_TYPE||(o.BALL_TYPE={}));var n=function(){function t(){}return t.VS_START=1,t.VS_RESULT=2,t}();o.EntryType=n,function(t){t[t.A=1]="A",t[t.B=2]="B"}(o.PackageType||(o.PackageType={})),cc._RF.pop()},{}],GameCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"97376opQd9PrI+I+hEy4l8U","GameCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Role"),s=t("../../common/EventMgr"),c=t("../manager/BrickManager"),l=t("./CameraMove"),p=t("./elements/BoxBrick"),u=t("./MapBgLoop"),h=t("../manager/MysteryHouseManager"),d=t("./Global"),f=t("../../pages/GameMainPageUI"),g=t("./RoleAnimation"),y=t("./Define"),m=t("../manager/BulletManager"),v=t("../manager/EffectManager"),_=t("../manager/CheckPointManager"),b=cc._decorator,R=b.ccclass,C=b.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_tiledRoot=null,e.node_mysteryHouseRoot=null,e.node_otherRoot=null,e.text_prompt=null,e.node_role=null,e.node_camera=null,e.mapLoop=null,e.text_desc=null,e.node_event=null,e.sp_startTitle=null,e.node_gameRoot=null,e.role=null,e.curLevel=1,e.cameraMove=null,e.isPassLevel=!1,e.cameraPosIndex=0,e.isInitFinishTag=!1,e.pageUI=null,e.curGameStatus=y.GAMESTATUS.NONE,e.reviveCount=1,e.roleInitPos=cc.Vec2.ZERO,e.levelInfo=new Map,e.roleDeadTag=!1,e.startTime=0,e.timedt=.02,e.totalTime=0,e.totalCount=0,e.isCanShakeTag=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.pageUI=this.node.getComponent(f.default),s.EVT.on("GameCtrlPrompt",this.showPrompt,this),s.EVT.on("GameCtrlCameraHorizontalMove",this.cameraHorizontalMove,this),s.EVT.on("GameCtrlBoxOpen",this.openBox,this),s.EVT.on("GameCtrlBrickInitFinished",this.brickFinished,this),s.EVT.on("GameCtrlShowDesc",this.showDesc,this),s.EVT.on("GameCtrlPauseGame",this.pauseGame,this),s.EVT.on("GameCtrlStartGame",this.startGame,this),cc.systemEvent.on("updateUsingRole",this.updateUsingRole,this),s.EVT.on("GameCtrlRoleDead",this.roleDead,this),s.EVT.on("GameCtrlUpdateLevelInfo",this.updateLevelInfo,this),s.EVT.on("GameCtrlGotoHome",this.gotoHome,this),s.EVT.on("GameCtrlShakeScreen",this.shakeScreen,this),s.EVT.on("GameCtrlSaveCheckPoint",this.saveCheckPoint,this),this.role=this.node_role.getComponent(a.default),this.role.init(),this.node_role.active=!1,this.cameraMove=this.node_camera.getComponent(l.default),this.cameraMove.setFollowNode(this.role.node),d.default.curRoleNode=this.role.node,d.default.curCameraNode=this.cameraMove.node,this.pageUI.showStartUI(!0),this.updateUsingRole(),this.roleInitPos=this.role.node.position,this.node_event.on(cc.Node.EventType.TOUCH_START,function(e){return t.onClickScreen(e)}),this.pageUI.setCurLevel(this.curLevel)},e.prototype.initLevel=function(t){this.curLevel=t,d.default.setBrickRoot(this.node_tiledRoot,this.node_otherRoot),_.default.getInstance().initNodeRoot(this.node_otherRoot),v.default.getInstance().initEffectRootNode(d.default.getNodeRootByIndex(0)),c.default.getInstance().initBrickRoot(this.node_tiledRoot,this.node_mysteryHouseRoot)},e.prototype.updateLevelInfo=function(t){this.curLevel!=t&&this.curLevel==c.default.getInstance().maxLevel&&(app.platformMgr.logEvent("passAllLevel"),console.log("\u901a\u5173\u4e86....")),this.curLevel=t,d.default.curLevel=this.curLevel,this.pageUI.setCurLevel(this.curLevel)},e.prototype.startGame=function(){this.reviveCount<=0?(this.clear(),this.reviveGame(!1),this.reviveCount=1):this.setGameStatus(y.GAMESTATUS.GAMING),this.totalCount=0,this.totalTime=0,this.startTime=Utils.getSystemTime(),app.platformMgr.logEvent("GameCtrl_startGame")},e.prototype.clear=function(){this.curLevel=1,this.levelInfo.clear(),this.pageUI.setCurLevel(this.curLevel)},e.prototype.update=function(t){this.isInitFinishTag&&(this.curGameStatus==y.GAMESTATUS.GAMING&&(this.totalTime=this.totalTime+t,this.totalCount=this.totalCount+1),this.role.updateTime(this.timedt),this.mapLoop.updateTime(this.timedt),this.cameraMove.updateTime(this.timedt))},e.prototype.onClickScreen=function(){this.curGameStatus!=y.GAMESTATUS.PAUSE&&this.curGameStatus!=y.GAMESTATUS.FAIL&&this.role.jump()},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.left:this.role.move(cc.v2(-1,0));break;case cc.macro.KEY.right:this.role.move(cc.v2(1,0));break;case cc.macro.KEY.down:this.role.move(cc.v2(0,-1));break;case cc.macro.KEY.up:this.role.move(cc.v2(0,1));break;case cc.macro.KEY.space:this.role.jump()}},e.prototype.onKeyUp=function(t){switch(this.role.move(cc.v2(0,0)),t.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:case cc.macro.KEY.down:case cc.macro.KEY.up:}},e.prototype.showPrompt=function(t){var e=this;this.text_prompt.string=t,this.scheduleOnce(function(){e.text_prompt.string=""},3)},e.prototype.cameraHorizontalMove=function(t){var e=this;this.cameraPosIndex+=t?1:-1,this.cameraMove.horizontalMove(t,function(){h.default.getInstance().hideMysteryHouse(t),0==e.cameraPosIndex&&e.isPassLevel&&(console.log("\u5730\u56fe\u8fdb\u884c\u5c01\u95ed\u5904\u7406"),e.isPassLevel=!1,c.default.getInstance().closeDoor(!t))})},e.prototype.openBox=function(t){t.getBoxType()==p.BOXTYPE.PASSLEVEL&&(h.default.getInstance().changeBoxToBlack(t),c.default.getInstance().recordPassLevelInfo(t.getRow(),t.getCol()),this.isPassLevel=!0)},e.prototype.brickFinished=function(){this.node_role.active||(c.default.getInstance().updateCollisionStatus(),this.node_role.active=!0,this.isInitFinishTag=!0,this.role.droping(),this.role.initRolePos(),this.mapLoop.updateBgTexture(),s.EVT.emit("LoadingDialogHide"))},e.prototype.roleDead=function(){var t=this;this.role.isGod()||this.roleDeadTag||(this.roleDeadTag=!0,this.setGameStatus(y.GAMESTATUS.PAUSE),this.role.dead(this.curLevel),this.scheduleOnce(function(){t.hanlderGameResult()},1))},e.prototype.showDesc=function(t){var e=this;this.text_desc.string=t,this.scheduleOnce(function(){e.text_desc.string=""},.5)},e.prototype.onClickPrintCount=function(){c.default.getInstance().printCount()},e.prototype.updateUsingRole=function(){var t=this;cc.loader.loadRes("roles/role"+app.user.getUsingRoleId(),function(e,o){if(!e){t.role.node.removeAllChildren();var n=cc.instantiate(o);n.scaleX=t.role.getCurScaleX(),n.position=cc.v2(25,-5),t.role.node.addChild(n),t.role.setRoleAnimation(n.getComponent(g.default)),t.role.updateUsingRole()}})},e.prototype.setGameStatus=function(t){t!=this.curGameStatus&&(this.curGameStatus=t,d.default.gameState=t,t==y.GAMESTATUS.PAUSE?(c.default.getInstance().pause(!0),m.default.getInstance().pause(!0),this.role.pause(!0)):t==y.GAMESTATUS.GAMING?(c.default.getInstance().pause(!1),m.default.getInstance().pause(!1),this.role.pause(!1)):y.GAMESTATUS.FAIL)},e.prototype.pauseGame=function(t){this.setGameStatus(t?y.GAMESTATUS.PAUSE:y.GAMESTATUS.GAMING)},e.prototype.hanlderGameResult=function(){this.reviveCount>0&&this.isCanShowContinueDialog()?app.pageMgr.showDialog("ContinueDialog",{reviveGame:this.reviveGame.bind(this),skipGame:this.skipGame.bind(this)}):app.pageMgr.showDialog("ResultPage",{score:this.curLevel,time:this.startTime}),this.reviveCount=this.reviveCount-1},e.prototype.reviveGame=function(t){var e=this;void 0===t&&(t=!0),c.default.getInstance().hideAllMonster(),c.default.getInstance().reviveMonsters(),c.default.getInstance().reStartGame(t),t||h.default.getInstance().clearMysteryHouseInfo(),this.cameraMove.setFastFollow(!0),this.role.revive(t,function(){e.cameraMove.setFastFollow(!1),e.scheduleOnce(function(){c.default.getInstance().showAllMonster()},.5),e.roleDeadTag=!1,m.default.getInstance().removeAllBullet(),e.setGameStatus(y.GAMESTATUS.GAMING),e.role.setGodStatus(!0)})},e.prototype.skipGame=function(){app.pageMgr.showDialog("ResultPage",{score:this.curLevel,time:this.startTime})},e.prototype.isCanShowContinueDialog=function(){return!!((app.user.getCoinNum()>=y.default.continueSpendCoin||app.platformMgr.isVideoLoad())&&Utils.getSystemTime()-this.startTime>y.default.showContinueDialogIntervalTime)},e.prototype.gotoHome=function(){this.reviveCount=0,this.setGameStatus(y.GAMESTATUS.PAUSE),this.role.dead(this.curLevel,!0)},e.prototype.shakeScreen=function(){this.isCanShakeTag&&(this.isCanShakeTag=!1)},e.prototype.sendLogGameRate=function(){var t=Math.floor(this.totalCount/this.totalTime);console.log("sendLogGameRate rate = "+t),app.platformMgr.logEvent("game_rate",{rate:t})},e.prototype.saveCheckPoint=function(t){this.role.resetRevivePos(t)},r([C(cc.Node)],e.prototype,"node_tiledRoot",void 0),r([C(cc.Node)],e.prototype,"node_mysteryHouseRoot",void 0),r([C(cc.Node)],e.prototype,"node_otherRoot",void 0),r([C(cc.Label)],e.prototype,"text_prompt",void 0),r([C(cc.Node)],e.prototype,"node_role",void 0),r([C(cc.Node)],e.prototype,"node_camera",void 0),r([C(u.default)],e.prototype,"mapLoop",void 0),r([C(cc.Label)],e.prototype,"text_desc",void 0),r([C(cc.Node)],e.prototype,"node_event",void 0),r([C(cc.Sprite)],e.prototype,"sp_startTitle",void 0),r([C(cc.Node)],e.prototype,"node_gameRoot",void 0),r([R],e)}(cc.Component);o.default=I,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../pages/GameMainPageUI":"GameMainPageUI","../manager/BrickManager":"BrickManager","../manager/BulletManager":"BulletManager","../manager/CheckPointManager":"CheckPointManager","../manager/EffectManager":"EffectManager","../manager/MysteryHouseManager":"MysteryHouseManager","./CameraMove":"CameraMove","./Define":"Define","./Global":"Global","./MapBgLoop":"MapBgLoop","./Role":"Role","./RoleAnimation":"RoleAnimation","./elements/BoxBrick":"BoxBrick"}],GameMainPageUI:[function(t,e,o){"use strict";cc._RF.push(e,"46109jfLa1BvZXIG2wknGLz","GameMainPageUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/EventMgr"),s=t("../game/logic/Global"),c=t("./widget/RollNumber"),l=t("../game/logic/Define"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_bestScore=null,e.text_fruitCount=null,e.node_startui=null,e.node_logo=null,e.node_up=null,e.node_down=null,e.node_gameui=null,e.text_curLevel=null,e.text_gameFruitCount=null,e.node_pause=null,e.node_resume=null,e.node_roleSkin=null,e.node_shop=null,e.node_icon=null,e.node_DiamondIcon=null,e.node_startBtn=null,e.node_startBtn1=null,e.node_playWithFriend=null,e.text_diamondCount=null,e.node_cutLogo=null,e.sp_avatar=null,e.startUITag=!1,e.gameUITag=!1,e.rollNumber=null,e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;a.EVT.on("GameMainPageUIShowUI",this.showUI,this),a.EVT.on("GameMainPageUIShowStartUI",this.showStartUI,this),a.EVT.on("GameMainPageUISubGoldEffect",this.subGoldEffect,this),a.EVT.on("GameMainPageUIHideGameUI",this.hideGameUI,this),cc.systemEvent.on("updateDiamondNum",this.updateDiamondNum,this),cc.systemEvent.on("updateCoinNum",this.updateCoinNum,this),this.node_resume.active=!1,this.rollNumber=this.node.addComponent(c.default),this.scheduleOnce(function(){t.node_up.getComponent(cc.Widget).updateAlignment(),s.default.flyPos=t.node_icon.parent.convertToWorldSpaceAR(t.node_icon.position),s.default.flyPos.addSelf(cc.v2(-375,-667)),s.default.flyDiamondPos=t.node_DiamondIcon.convertToWorldSpaceAR(cc.Vec2.ZERO),s.default.flyDiamondPos.addSelf(cc.v2(-375,-667))})},e.prototype.showStartUI=function(t){void 0===t&&(t=!1),this.node_startui.active=t,this.node_gameui.active=!t,this.startUITag=t,this.gameUITag=!t,this.text_bestScore.string=app.user.getMaxScore().toString(),this.updateCoinNum(!1),this.updateDiamondNum(!1),this.text_diamondCount.node.parent.active=!1,app.platformMgr.isPayReady()?(this.node_roleSkin.x=0,this.node_shop.active=!1):(this.node_roleSkin.x=this.node_shop.x,this.node_shop.active=!1),this.hanlderBtnShow(),s.default.setPlayerAvatarBySp(this.sp_avatar)},e.prototype.showUI=function(){this.node_startui.active=this.startUITag,this.node_gameui.active=this.gameUITag,this.text_bestScore.string=app.user.getMaxScore().toString()},e.prototype.hideUI=function(){this.node_startui.active=!1,this.node_gameui.active=!1},e.prototype.onClickRank=function(){app.soundMgr.playClick(),app.pageMgr.showDialog("RankPage",{from:"mainui"}),this.hideUI(),app.platformMgr.logButtonClickEvent("mainui_rank")},e.prototype.onClickRole=function(){app.soundMgr.playClick(),app.pageMgr.showDialog("RoleSkinDialog",{from:"mainui"}),this.hideUI(),app.platformMgr.logButtonClickEvent("mainui_roleSkin")},e.prototype.onClickShop=function(){app.soundMgr.playClick(),app.pageMgr.showDialog("ShopDialog",{from:"mainui"}),this.hideUI(),app.platformMgr.logButtonClickEvent("mainui_shop")},e.prototype.onClickSetup=function(){app.soundMgr.playClick(),app.pageMgr.showDialog("SetupDialog",{from:"mainui"}),this.hideUI(),app.platformMgr.logButtonClickEvent("mainui_setup")},e.prototype.createShortCut=function(t){this.isFirst?app.platformMgr.createShortcutAsync().then(t):t(),this.isFirst=!1},e.prototype.onClickPlay=function(){var t=this;app.soundMgr.playClick(),this.createShortCut(function(){t.showStartUI(!1),a.EVT.emit("GameCtrlStartGame")}),app.platformMgr.logButtonClickEvent("mainui_startGame")},e.prototype.onClickPlayWithFriend=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("mainui_startGame"),app.platformMgr.logEvent("mainui",{type:"vs"}),this.createShortCut(function(){Utils.challengeFriends2("mainui",function(){t.showStartUI(!1),a.EVT.emit("GameCtrlStartGame")})})},e.prototype.onClickPause=function(){app.soundMgr.playClick(),a.EVT.emit("GameCtrlPauseGame",!0),app.pageMgr.showDialog("PauseDialog"),app.platformMgr.logButtonClickEvent("mainui_pause")},e.prototype.onClickResume=function(){a.EVT.emit("GameCtrlPauseGame",!1),this.node_pause.active=!0,this.node_resume.active=!1},e.prototype.onClickCurScreen=function(){app.soundMgr.play(l.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.updateCoinNum=function(t){var e=this;if(t){var o=Number(this.text_fruitCount.string),n=app.user.getCoinNum();this.rollNumber.startRoll(.8,o,n,function(t){e.text_fruitCount.string=t.toString(),e.text_gameFruitCount.string=t.toString()})}else this.text_fruitCount.string=app.user.getCoinNum().toString(),this.text_gameFruitCount.string=app.user.getCoinNum().toString()},e.prototype.setCurLevel=function(t){this.text_curLevel.string="STAGE-"+t.toString()},e.prototype.subGoldEffect=function(){this.node_icon.runAction(cc.sequence(cc.scaleTo(.1,.9,.9).easing(cc.easeBackOut()),cc.scaleTo(.1,1,1).easing(cc.easeBackOut()),cc.scaleTo(.1,.9,.9).easing(cc.easeBackOut()),cc.scaleTo(.1,1,1).easing(cc.easeBackOut()),cc.scaleTo(.1,.9,.9).easing(cc.easeBackOut()),cc.scaleTo(.1,1,1).easing(cc.easeBackOut()),cc.scaleTo(.1,.9,.9).easing(cc.easeBackOut()),cc.scaleTo(.1,1,1).easing(cc.easeBackOut())))},e.prototype.hanlderBtnShow=function(){this.node_startBtn.active=!1,this.node_startBtn1.active=!1,this.node_playWithFriend.active=!1,this.node_startBtn.active=!0,this.node_startBtn.active=!0,this.node_startBtn1.active=!1,this.node_playWithFriend.active=!1},e.prototype.updateDiamondNum=function(t){var e=this;if(this.text_diamondCount.node.parent.active=!0,t){var o=Number(this.text_diamondCount.string),n=app.user.getDiamondNum();this.rollNumber.startRoll(.8,o,n,function(t){e.text_diamondCount.string=t.toString()})}else this.text_diamondCount.string=app.user.getDiamondNum().toString();this.text_diamondCount.node.stopAllActions(),this.text_diamondCount.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.text_diamondCount.node.parent.active=!1})))},e.prototype.hideGameUI=function(t){this.node_gameui.active=t},r([h(cc.Label)],e.prototype,"text_bestScore",void 0),r([h(cc.Label)],e.prototype,"text_fruitCount",void 0),r([h(cc.Node)],e.prototype,"node_startui",void 0),r([h(cc.Node)],e.prototype,"node_logo",void 0),r([h(cc.Node)],e.prototype,"node_up",void 0),r([h(cc.Node)],e.prototype,"node_down",void 0),r([h(cc.Node)],e.prototype,"node_gameui",void 0),r([h(cc.Label)],e.prototype,"text_curLevel",void 0),r([h(cc.Label)],e.prototype,"text_gameFruitCount",void 0),r([h(cc.Node)],e.prototype,"node_pause",void 0),r([h(cc.Node)],e.prototype,"node_resume",void 0),r([h(cc.Node)],e.prototype,"node_roleSkin",void 0),r([h(cc.Node)],e.prototype,"node_shop",void 0),r([h(cc.Node)],e.prototype,"node_icon",void 0),r([h(cc.Node)],e.prototype,"node_DiamondIcon",void 0),r([h(cc.Node)],e.prototype,"node_startBtn",void 0),r([h(cc.Node)],e.prototype,"node_startBtn1",void 0),r([h(cc.Node)],e.prototype,"node_playWithFriend",void 0),r([h(cc.Label)],e.prototype,"text_diamondCount",void 0),r([h(cc.Node)],e.prototype,"node_cutLogo",void 0),r([h(cc.Sprite)],e.prototype,"sp_avatar",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Define":"Define","../game/logic/Global":"Global","./widget/RollNumber":"RollNumber"}],GameMainPage:[function(t,e,o){"use strict";cc._RF.push(e,"22b7aypZ3FNHqoWNuslS1pE","GameMainPage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/GameCtrl"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameCtrl=null,e}return i(e,t),e.prototype.onUpdateData=function(){console.log("\u5f00\u59cb\u754c\u9762\u5c55\u793a "+Date.now()),this.gameCtrl=this.node.getComponent(a.default),this.gameCtrl.initLevel(1)},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e.prototype.onClickBtn=function(t){t.target.name,app.soundMgr.playClick()},e.prototype.changeUseMap=function(){},r([c],e)}(BasePage));o.default=l,cc._RF.pop()},{"../game/logic/GameCtrl":"GameCtrl"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"3a4d5JylYJGUInlk/UBqyIL","Global");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Define"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(){}return t.getBirckPos=function(t,e){return cc.v2(e*i.default.brickWidth+.5*i.default.brickWidth-3,t*i.default.brickHeight+.5*i.default.brickHeight)},t.getRowColByPos=function(t){var e=Math.floor((t.x-.5*i.default.brickWidth+3)/i.default.brickWidth);return{row:Math.floor((t.y-.5*i.default.brickHeight)/i.default.brickHeight),col:e}},t.getRandom=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t.getCurDayKey=function(){for(var t=new Array(31,28,31,30,31,30,31,31,30,31,30,31),e=new Date,o=e.getDate(),n=e.getMonth(),i=e.getFullYear(),r=0,a=0;a<n;a++)r+=t[a];return r+=o,(n>1&&i%4==0&&i%100!=0||i%400==0)&&(r+=1),i.toString()+"_"+r.toString()},t.degreesToVector=function(t){var e=cc.misc.degreesToRadians(t);return cc.v2(0,1).rotate(-e)},t.changeBntToGray=function(t,e){if(e){t.getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(1));for(var o=0;o<t.childrenCount;o++)t.children[o].getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(1))}},t.shakeAction=function(t,e){var o=t.x,n=t.y;t.runAction(cc.sequence(cc.moveTo(.018,cc.v2(o+(5+e),n+(e+7))),cc.moveTo(.018,cc.v2(o-(6+e),n+(e+7))),cc.moveTo(.018,cc.v2(o-(13+e),n+(e+3))),cc.moveTo(.018,cc.v2(o+(3+e),n-(6+e))),cc.moveTo(.018,cc.v2(o-(5+e),n+(e+5))),cc.moveTo(.018,cc.v2(o+(2+e),n-(8+e))),cc.moveTo(.018,cc.v2(o-(8+e),n-(10+e))),cc.moveTo(.018,cc.v2(o+(3+e),n+(e+10))),cc.moveTo(.018,cc.v2(o,n))))},t.shakeNewAction=function(t,e,o){var n=t.x,i=t.y;t.runAction(cc.sequence(cc.moveTo(.018,cc.v2(n+e,i+e)),cc.moveTo(.018,cc.v2(n-e,i+e)),cc.moveTo(.018,cc.v2(n-e,i+e)),cc.moveTo(.018,cc.v2(n+e,i-e)),cc.moveTo(.018,cc.v2(n-e,i+e)),cc.moveTo(.018,cc.v2(n+e,i-e)),cc.moveTo(.018,cc.v2(n-e,i-e)),cc.moveTo(.018,cc.v2(n+e,i+e)),cc.moveTo(.018,cc.v2(n,i)),cc.callFunc(o)))},t.getNodeRootByIndex=function(t){return this.brickRoot.children[t]},t.getNodeRootMaxLayer=function(){return this.otherNodeRoot},t.setBrickRoot=function(t,e){this.brickRoot=t,this.otherNodeRoot=e},t.getLevelJsonDir=function(t){return"maps/style"+app.user.getMapStyleIndex()+"/level"+t.toString()},t.getBricksDir=function(){return"prefabs/commons/bricks"},t.updateMapStypeIndex=function(){var t=app.user.getLoginDayCount()%5+1;app.user.setMapStyleIndex(t)},t.recharge=function(t,e){console.log("\u70b9\u51fb\u5145\u503c\u8c03\u7528\u5145\u503c\u63a5\u53e3.... productId = "+t),console.log("app.platformMgr.isPayReady() = "+app.platformMgr.isPayReady()),app.platformMgr.purchase(t,function(){console.log("\u5904\u7406\u8d2d\u4e70\u6210\u529f"),null!=e&&e(1)},function(){console.log("\u5904\u7406\u8d2d\u4e70\u5931\u8d25"),null!=e&&e(0)})},t.setPlayerAvatarBySp=function(){},t.shareRecord=function(t,e){void 0===e&&(e=null),app.soundMgr.play(i.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},t.shareCutScreen=function(){app.soundMgr.play(i.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},t.changeMapStyle=function(t){return 1==t?t=3:3==t&&(t=1),t},t.brickAtlas=null,t.collectBrickAtlas=null,t.effectAtlas=null,t.commonAtlas=null,t.curRoleNode=null,t.curCameraNode=null,t.lastLevel=0,t.bgFrame=null,t.startTitleFrame=null,t.houseBgFrame1=null,t.houseBgFrame2=null,t.brickRoot=null,t.cutScreenCamera=null,t.flyPos=cc.Vec2.ZERO,t.flyDiamondPos=cc.Vec2.ZERO,t.otherNodeRoot=null,t.curLevel=1,t.isOpenAllRoleTag=!1,t.isCanJump=!0,t.pages=null,t.isInHouse=!1,t.isLoading=!0,t.gameState=i.GAMESTATUS.NONE,n([a],t)}());o.default=s,cc._RF.pop()},{"./Define":"Define"}],GuideManager:[function(t,e,o){"use strict";cc._RF.push(e,"5c3a6DNcthM0IVhFOdh6Zcg","GuideManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){this.curGuideId=-1,this.curGuideData=null,this.guideRootNode=null,this.isGuideOpend=!0}var e;return e=t,t.getInstance=function(){return this.instance},t.prototype.initGuide=function(){},t.prototype.isGuide=function(){return!0},t.instance=new e,n([r],t)}());o.default=a,cc._RF.pop()},{}],HallOfFameBrick:[function(t,e,o){"use strict";cc._RF.push(e,"61758VyLklMlZyyTreatyzn","HallOfFameBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=t("../Global"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=-1,e.node_startBtn=null,e.sp_avatar1=null,e.sp_avatar2=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.state=-1,this.node_startBtn.y=-50,this.node.y+=5,this.resetOtherPlayerPhoto(function(){})},e.prototype.changeState=function(){-1==this.state&&(this.state=0,this.node_startBtn.y=-50,this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(0,-68))))},e.prototype.share=function(){1!=this.state&&-1!=this.state&&(this.state=1,this.startBtnAction(),app.platformMgr.logEvent("headCamera",{from:"hallOfFame"}))},e.prototype.startBtnAction=function(){var t=this;app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-50)),cc.callFunc(function(){t.shareScreen()})))},e.prototype.resetOtherPlayerPhoto=function(t){var e=this;RankUtils.getWorldRankData(function(o){for(var n=o.concat(),i=0;i<n.length;i++)if(n[i].playerId==app.platformMgr.getPlayerID()){n.splice(i,1);break}var r=n[c.default.getRandom(0,n.length)];null!=r?cc.loader.load(r.photo,function(o,n){t(),o||(e.sp_avatar2.spriteFrame=new cc.SpriteFrame(n))}):t()})},e.prototype.shareScreen=function(){app.soundMgr.play(s.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.initOther=function(){var t=this;cc.loader.loadRes("textures/sharePlayerAvatar",cc.SpriteFrame,function(e,o){e||(t.icon.spriteFrame=o)})},r([u(cc.Node)],e.prototype,"node_startBtn",void 0),r([u(cc.Sprite),u],e.prototype,"sp_avatar1",void 0),r([u(cc.Sprite),u],e.prototype,"sp_avatar2",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../Brick":"Brick","../Define":"Define","../Global":"Global"}],Hand:[function(t,e,o){"use strict";cc._RF.push(e,"2c1a1SnfSRC4KVsazamr6F1","Hand");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.armSprite=null,e.palmSprite=null,e.bandageSprite=null,e}return i(e,t),e.prototype.start=function(){this.armInitPos=this.armSprite.node.position,this.palmInitPos=this.palmSprite.node.position},e.prototype.onEnable=function(){this.bandageSprite.node.active=!1},e.prototype.init=function(t,e){var o=this;void 0===e&&(e=!1),cc.loader.loadRes("/hand/arm"+t,cc.SpriteFrame,function(t,e){o.armSprite.spriteFrame=e}),cc.loader.loadRes("/hand/palm"+t,cc.SpriteFrame,function(t,e){o.palmSprite.spriteFrame=e}),this.bandageSprite.node.active=e},e.prototype.onHit=function(t){app.soundMgr.play("cut");var e=[];e.push(cc.moveBy(.1,10,0)),e.push(cc.spawn(cc.rotateBy(.8,360),cc.moveBy(.8,700,200))),e.push(cc.delayTime(.4)),e.push(cc.callFunc(function(){t&&t()})),this.palmSprite.node.runAction(cc.sequence(e))},e.prototype.revive=function(){this.palmSprite.node.angle=0,this.palmSprite.node.setPosition(this.palmInitPos),this.bandageSprite.node.active=!0},e.prototype.unlocked=function(){this.armSprite.node.color=cc.Color.WHITE,this.palmSprite.node.color=cc.Color.WHITE},e.prototype.locked=function(){this.armSprite.node.color=cc.Color.BLACK,this.palmSprite.node.color=cc.Color.BLACK},r([c(cc.Sprite)],e.prototype,"armSprite",void 0),r([c(cc.Sprite)],e.prototype,"palmSprite",void 0),r([c(cc.Sprite)],e.prototype,"bandageSprite",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Hedgehog:[function(t,e,o){"use strict";cc._RF.push(e,"b11d9uFz85Pvr8vPnn9RFri","Hedgehog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MonsterPathMove"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.armatureDisplay=null,e.curName="",e.playTimes=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.initBrick=function(e,o){0==o.extraInfo.delayTime&&(o.extraInfo.delayTime=3),t.prototype.initBrick.call(this,e,o);var n=this.pointMoveHelper.getPoints(),i=n[0].sub(n[1]).mag();this.playTimes=Math.min(i/this.pointMoveHelper.getSpeeds()[0]*.04,1),this.play("attack",0)},e.prototype.changeStyle=function(){},e.prototype.changeDirCallBack=function(t){var e=this;0!=t.x&&(this.node.scaleX=-1*t.x),this.pointMoveHelper.getDelayTime()>0&&(this.play("standby",0),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){e.play("attack",0),e.pause(!1)},this.pointMoveHelper.getDelayTime()),this.pause(!0))},e.prototype.resetBrick=function(){t.prototype.resetBrick.call(this)},e.prototype.play=function(t,e){this.curName!=t&&(console.log("this.playTimes = "+this.playTimes),this.armatureDisplay.timeScale="attack"==t?this.playTimes:1,this.curName=t,this.armatureDisplay.playAnimation(t,e))},e.prototype.removeBrickSelf=function(){this.unscheduleAllCallbacks(),t.prototype.removeBrickSelf.call(this)},r([l(dragonBones.ArmatureDisplay)],e.prototype,"armatureDisplay",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"./MonsterPathMove":"MonsterPathMove"}],Hero:[function(t,e,o){"use strict";cc._RF.push(e,"de6cbrMox1J+oxe3ZfBJOwG","Hero");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass;s.property,function(t){t[t.WALKING=0]="WALKING",t[t.JUMPING=1]="JUMPING",t[t.DROPING=2]="DROPING",t[t.GLIDEDROPING=3]="GLIDEDROPING"}(a||(a={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=0,e.col=0,e.moveDir=cc.v2(1,-1),e.vx=300,e.vy=0,e.gravity=1500,e.curAction=a.DROPING,e.timedt=.02,e}return i(e,t),e.prototype.setRowCol=function(t,e){this.row=t,this.col=e},e.prototype.move=function(){},e.prototype.jump=function(){this.vy=-800,this.curAction=a.JUMPING},e.prototype.updateMove=function(t,e){this.updateCorners(t,e)},e.prototype.updateCorners=function(t,e){var o=this.node.x+this.moveDir.x*this.vx*t,n=this.node.y;this.curAction==a.GLIDEDROPING&&(o=this.node.x);var i=Math.floor((o-.5*this.node.width+1)/68),r=Math.floor((o+.5*this.node.width-1)/68),s=Math.floor((n-.5*this.node.height+1)/68),c=Math.floor((n+.5*this.node.height-1)/68);if(-1==this.moveDir.x){var l=e[c+"_"+i],p=e[s+"_"+i];if(null!=l||null!=p){var u=(null==l?p:l).x+this.node.width;this.node.x=Math.max(o,u),o=this.node.x,this.bodyCollision()}else this.node.x=o}else if(1==this.moveDir.x){var h=e[c+"_"+r],d=e[s+"_"+r];null!=h||null!=d?(u=(null==h?d:h).x-this.node.width,this.node.x=Math.min(o,u),o=this.node.x,this.bodyCollision()):this.node.x=o}if(this.vy+=.02*this.gravity,this.vy=Math.min(800,this.vy),this.curAction==a.GLIDEDROPING&&(this.vy=200),o=this.node.x,n=this.node.y+this.moveDir.y*this.vy*t,i=Math.floor((o-.5*this.node.width+1)/68),r=Math.floor((o+.5*this.node.width-1)/68),s=Math.floor((n-.5*this.node.height+1)/68),c=Math.floor((n+.5*this.node.height-1)/68),this.vy<0){var f=e[c+"_"+i];if(null!=(h=e[c+"_"+r])||null!=f){var g=(null==h?f:h).y-this.node.height;this.node.y=Math.min(n,g)}else this.node.y=n}else if(this.vy>0){var y=e[s+"_"+i];null!=(d=e[s+"_"+r])||null!=y?(g=(null==d?y:d).y+this.node.height,this.node.y=Math.max(n,g),this.node.y==g&&(this.curAction==a.GLIDEDROPING&&this.changeMoveDir(),this.curAction=a.WALKING)):(this.node.y=n,this.curAction!=a.GLIDEDROPING&&(this.curAction=a.DROPING))}},e.prototype.bodyCollision=function(){this.curAction==a.DROPING||this.curAction==a.JUMPING?this.curAction=a.GLIDEDROPING:this.changeMoveDir()},e.prototype.footCollision=function(){},e.prototype.headCollision=function(){},e.prototype.changeMoveDir=function(){this.moveDir.x=-1*this.moveDir.x},r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],HurtBrick:[function(t,e,o){"use strict";cc._RF.push(e,"15da45GZYhB3JVWdxU68K4x","HurtBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.setCollisionSize(o),this.node.scale=1},e.prototype.setCollisionSize=function(t){switch(t.extraInfo.dir){case s.DIR.UP:this.initUpDown(!0);break;case s.DIR.DOWN:this.initUpDown(!1);break;case s.DIR.LEFT:this.initLeftRight(!0);break;case s.DIR.RIGHT:this.initLeftRight(!1);break;case s.DIR.CENTER:this.initCenter()}},e.prototype.initLeftRight=function(t){this.node.setContentSize(cc.size(25,s.default.brickHeight-20)),this.collider.size=cc.size(25,s.default.brickHeight-20),this.collider.offset.x=t?15:-15,this.collider.offset.y=0},e.prototype.initUpDown=function(t){this.node.setContentSize(cc.size(s.default.brickWidth-10,25)),this.collider.size=cc.size(s.default.brickWidth-10,25),this.collider.offset.x=0,this.collider.offset.y=t?-15:15},e.prototype.initCenter=function(){this.node.setContentSize(cc.size(s.default.brickWidth-10,s.default.brickHeight)),this.collider.size=cc.size(s.default.brickWidth-10,s.default.brickHeight),this.collider.offset.x=0,this.collider.offset.y=0},r([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Brick":"Brick","../Define":"Define"}],Ios14Fix:[function(t,e){"use strict";cc._RF.push(e,"8e15dj3k5NDB5upk6sQH58b","Ios14Fix"),cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&cc.sys.isMobile&&/iPhone OS 14/.test(window.navigator.userAgent)&&(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(t){this.vertexOffset+t>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()}),cc._RF.pop()},{}],JumpGameLocalData:[function(t,e,o){"use strict";cc._RF.push(e,"09a69H+wIFDCbH4psnL+cWs","JumpGameLocalData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=[{breathType:1,appId:"187689662564803",imgUrl:"187689662564803",appName:"mario"},{breathType:1,appId:"749528802210263",imgUrl:"749528802210263",appName:"slamDunk"},{breathType:1,appId:"2656341144652244",imgUrl:"2656341144652244",appName:"chopHand"}],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img=null,e.data=null,e.initScale=1,e}return i(e,t),e.prototype.start=function(){this.node.on("click",this.onSwitchGame.bind(this))},e.prototype.onEnable=function(){if(!this.data)if(cc.sys.os==cc.sys.OS_ANDROID){this.initScale=this.node.scale;var t=l[Utils.randomInt(l.length)];this.setAdData(t)}else this.node.active=!1},e.prototype.setAdData=function(t){var e=this;switch(this.data=t,this.img.spriteFrame=null,cc.loader.loadRes(t.imgUrl,cc.SpriteFrame,function(t,o){t?console.log(t):(e.img.spriteFrame=o,e.getComponent(cc.Button).interactable=!0)}),this.node.stopAllActions(),t.breathType){case 1:this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.7,this.initScale+.1),cc.scaleTo(.7,this.initScale))));break;case 2:this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.5,5),cc.rotateBy(.5,-5))))}},e.prototype.onSwitchGame=function(){var t=this;console.log("onSwitchGame",this.data),app.platformMgr.logEvent("switch_game_click"),window.FBInstant&&FBInstant.switchGameAsync(this.data.appId,{from:window.GameName,switchGameInfo:{appId:window.FB_APPID,appName:window.GameName},type:window.GameName}).then(function(){app.platformMgr.logEvent("switch_game_success",{game:t.data.appName,appId:t.data.appId})}).catch(function(t){console.log(t)})},r([c(cc.Sprite)],e.prototype,"img",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],JumpGame:[function(t,e,o){"use strict";cc._RF.push(e,"aee0blZ0+tJaKNFOkAe38HX","JumpGame");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img=null,e.data=null,e.curIndex=0,e.gamesId=["749528802210263","857045494748306","586245508649672"],e.serverDatas=null,e.allWeight=0,e}return i(e,t),e.prototype.onLoad=function(){this.curIndex=Utils.randomInt(this.gamesId.length)},e.prototype.start=function(){this.node.on("click",this.onSwitchGame.bind(this))},e.prototype.onEnable=function(){this.img.spriteFrame=null,this.getComponent(cc.Button).interactable=!1,cc.sys.os!=cc.sys.OS_IOS?this.serverRecommond():this.node.active=!1},e.prototype.randomOneGame=function(t){if(0!=t.length){for(var e=Math.floor(Math.random()*this.allWeight),o=0,n=null,i=0;i<t.length;i++)if(e<=(o+=t[i].weight)){n=t[i];break}console.log("randomOneGame",n),this.setAdData(n)}},e.prototype.serverRecommond=function(){var t=this;if(null==this.serverDatas){var e;e=cc.sys.os==cc.sys.OS_IOS?"IOS":cc.sys.os==cc.sys.OS_ANDROID?"ANDROID":cc.sys.isMobile?"MOBILE_WEB":"WEB";var o={playerId:app.platformMgr.getPlayerID(),nickname:app.platformMgr.getPlayerName(),appId:window.FB_APPID,locale:navigator.language,deviceOS:e,timezoneOffset:(new Date).getTimezoneOffset()};NetHelper.getRecommendGames(o,function(e){null!=e&&null!=e.data&&e.data.ads&&e.data.ads.length>0&&(t.serverDatas=e.data.ads,t.allWeight=0,t.serverDatas.forEach(function(e){t.allWeight+=e.weight}),t.randomOneGame(t.serverDatas))})}else this.randomOneGame(this.serverDatas)},e.prototype.localRecommond=function(){console.log("this.curIndex",this.curIndex,this.gamesId);var t=this.gamesId[this.curIndex];this.setAdData({breathType:3,appId:t,appName:t}),this.curIndex++,this.curIndex>=this.gamesId.length&&(this.curIndex=0)},e.prototype.setAdData=function(t){var e=this;switch(this.data=t,this.img.spriteFrame=null,t.icon?cc.loader.load(t.icon,function(t,o){t?console.log(t):(e.img.spriteFrame=new cc.SpriteFrame(o),e.getComponent(cc.Button).interactable=!0)}):cc.loader.loadRes("gameicons/"+t.appId,function(t,o){t?console.log(t):(e.img.spriteFrame=new cc.SpriteFrame(o),e.getComponent(cc.Button).interactable=!0)}),this.node.stopAllActions(),t.breathType){case 1:this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.7,1.1),cc.scaleTo(.7,1))));break;case 2:this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.5,5),cc.rotateBy(.5,-5))))}},e.prototype.onSwitchGame=function(){var t=this;console.log("onSwitchGame",this.data),app.platformMgr.logEvent("switch_game_click"),window.FBInstant&&FBInstant.switchGameAsync(this.data.appId,{from:window.GameName,switchGameInfo:{appId:window.FB_APPID,appName:window.GameName},type:window.GameName}).then(function(){app.platformMgr.logEvent("switch_game_success",{game:t.data.appName,appId:t.data.appId})}).catch(function(t){console.log(t)})},r([c(cc.Sprite)],e.prototype,"img",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LevelCompleteDialog:[function(t,e,o){"use strict";cc._RF.push(e,"e027fteiUVIl6e16sE5Fced","LevelCompleteDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Global"),s=t("./widget/RollNumber"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textReward=null,e.textDouble=null,e.textLevel=null,e.btnVideo=null,e.btnContinue=null,e.nodeTitle=null,e.nodeCenter=null,e.nodeCoin=null,e.nodeDiamond=null,e.nodeTop=null,e.text_fruitCount=null,e.text_diamondCount=null,e.rewardCount=20,e.rewardDouble=10,e.isDoubleTag=!1,e.info={type:2,param:10,res:"turntable_peach"},e.rollNumber=null,e.hideCallBack=null,e}return i(e,t),e.prototype.onUpdateData=function(t){var e=this;null==this.rollNumber&&(this.rollNumber=this.nodeTop.addComponent(s.default)),this.nodeCoin.active=1==t.type,this.nodeDiamond.active=!(1==t.type),1==t.type?(this.info.res="turntable_peach",this.rewardCount=20):(this.info.res="turntable_diamond",this.rewardCount=2),this.info.type=t.type,this.hideCallBack=t.hideCallBack,this.text_fruitCount.string=app.user.getCoinNum().toString(),this.text_diamondCount.string=app.user.getDiamondNum().toString(),this.textLevel.string="STAGE-"+t.level,this.textReward.string="+"+this.rewardCount.toString(),this.isDoubleTag=!1,this.rewardDouble=Utils.getRandom(2,8),this.textDouble.string="x"+this.rewardDouble.toString(),this.btnVideo.active=!0,this.btnVideo.getComponent(cc.Button).interactable=!0,this.nodeCenter.opacity=0,this.btnContinue.opacity=0,this.nodeTitle.opacity=0,this.nodeTop.opacity=0,this.nodeTitle.runAction(cc.sequence(cc.fadeTo(.5,255),cc.callFunc(function(){}))),this.nodeTop.runAction(cc.sequence(cc.fadeTo(.5,255),cc.callFunc(function(){}))),this.nodeCenter.runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.5,255),cc.delayTime(.1),cc.callFunc(function(){app.user.setScore(t.score),1==t.type?(app.user.addCoinNum(e.rewardCount),e.flyReward(20),e.updateNumber(e.text_fruitCount,app.user.getCoinNum())):(app.user.addDiamondNum(e.rewardCount),e.flyReward(e.rewardCount),e.updateNumber(e.text_diamondCount,app.user.getDiamondNum()))}))),this.btnContinue.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.5,255),cc.callFunc(function(){})))},e.prototype.onClickContinue=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("levelComplete_continue"),Utils.challengeFriends3("levelComplete",function(){app.platformMgr.isInterstitialLoad()&&app.platformMgr.showInterstitialAd("levelComplete"),app.pageMgr.hideDialog("LevelCompleteDialog"),null!=t.hideCallBack&&t.hideCallBack()})},e.prototype.onClickVideo=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("levelComplete_video"),app.platformMgr.showVideoAd("levelComplete",function(){t.btnVideo.getComponent(cc.Button).interactable=!1,t.textReward.string="+"+(t.rewardDouble*t.rewardCount).toString(),1==t.info.type?(app.user.addCoinNum(t.rewardCount*t.rewardDouble),t.flyReward(40),t.updateNumber(t.text_fruitCount,app.user.getCoinNum())):(app.user.addDiamondNum(t.rewardCount*t.rewardDouble),t.flyReward(t.rewardCount*t.rewardDouble),t.updateNumber(t.text_diamondCount,app.user.getDiamondNum()))})},e.prototype.flyReward=function(t){void 0===t&&(t=20),1==this.info.type?app.pageMgr.showDialog("FlyGoldEffectDialog",{targetPos:cc.v2(a.default.flyPos.x,a.default.flyPos.y),initPos:cc.v2(0,350),num:t,info:this.info,pause:!1}):app.pageMgr.showDialog("FlyGoldEffectDialog",{targetPos:cc.v2(a.default.flyDiamondPos.x,a.default.flyDiamondPos.y),initPos:cc.v2(0,350),num:t,info:this.info,pause:!1})},e.prototype.updateNumber=function(t,e){var o=this,n=Number(t.string);this.scheduleOnce(function(){o.rollNumber.startRoll(.8,n,e,function(e){t.string=e.toString()})},.5)},r([p(cc.Label)],e.prototype,"textReward",void 0),r([p(cc.Label)],e.prototype,"textDouble",void 0),r([p(cc.Label)],e.prototype,"textLevel",void 0),r([p(cc.Node)],e.prototype,"btnVideo",void 0),r([p(cc.Node)],e.prototype,"btnContinue",void 0),r([p(cc.Node)],e.prototype,"nodeTitle",void 0),r([p(cc.Node)],e.prototype,"nodeCenter",void 0),r([p(cc.Node)],e.prototype,"nodeCoin",void 0),r([p(cc.Node)],e.prototype,"nodeDiamond",void 0),r([p(cc.Node)],e.prototype,"nodeTop",void 0),r([p(cc.Label)],e.prototype,"text_fruitCount",void 0),r([p(cc.Label)],e.prototype,"text_diamondCount",void 0),r([l],e)}(BaseDialog);o.default=u,cc._RF.pop()},{"../game/logic/Global":"Global","./widget/RollNumber":"RollNumber"}],LifterBrick:[function(t,e,o){"use strict";cc._RF.push(e,"569e55Q9btKJL1ofWRYgpfj","LifterBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Global"),c=t("../Define"),l=t("../../manager/BrickManager"),p=t("../Behavior"),u=t("../CheckCollision"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_eyes=null,e.node_light=null,e.node_upCollsion=null,e.dir=cc.v2(0,0),e.followNode=null,e.offsetX=0,e.offsetY=0,e.isUnderRole=!1,e.lastPos=cc.Vec2.ZERO,e.offsetPos=cc.Vec2.ZERO,e.maxX=c.default.invalidValue,e.minX=0,e.maxY=0,e.minY=0,e.followBehavior=null,e.upSpeedY=200,e.isPause=!1,e.initMaxY=0,e.correctTag=!0,e}return i(e,t),e.prototype.onLoad=function(){this.node_upCollsion.getComponent(u.default).setCollisionCallBack(this.collisionCallBack.bind(this))},e.prototype.initBrick=function(e,o){this.offsetX=.5*(this.node.width-c.default.brickWidth)-5,this.offsetY=.5*(this.node.height-c.default.brickHeight),this.isPause=!1,t.prototype.initBrick.call(this,e,o),this.node_eyes.active=!0,this.node_light.y=120,this.maxX=c.default.invalidValue},e.prototype.update=function(){if(!this.isPause&&this.maxX!=c.default.invalidValue)if(this.offsetPos=this.node.position.sub(this.lastPos),this.lastPos=this.node.position,null!=this.followNode&&this.isUnderRole){if(Math.abs(this.node.x-this.followNode.x-.5*this.followNode.width)<=50){if(this.followBehavior.lifterAction()){var t=this.node.y+.02*this.upSpeedY;this.node.y=Math.min(t,this.maxY),this.followNode.y=this.node.y+5,this.followNode.x=this.node.x-.5*this.followNode.width}var e=Math.max(this.node_light.y-1,110);this.node_light.y=e}}else t=this.node.y-.02*this.upSpeedY,this.node.y=Math.max(t,this.minY),this.node.y==this.minY&&null==this.followNode&&(this.correctPosX(),this.maxY=this.initMaxY)},e.prototype.setFollowNode=function(t,e){void 0===e&&(e=!1),this.followNode=t,null!=this.followNode?(this.isUnderRole=e,this.followBehavior=this.followNode.getComponent(p.default),this.node.stopAllActions(),this.maxX==c.default.invalidValue&&this.initLimitInfo()):(this.isUnderRole=!1,this.correctTag=!0),this.node_eyes.active=!this.isUnderRole,this.isUnderRole||this.node_light.runAction(cc.moveTo(.5,cc.v2(this.node_light.x,120)))},e.prototype.isLeftRightMove=function(){return 0!=this.dir.x},e.prototype.isUpDownMove=function(){return 0!=this.dir.y},e.prototype.isUpMoveing=function(){return 1==this.dir.y},e.prototype.isDownMoveing=function(){return-1==this.dir.y},e.prototype.changeStyle=function(){this.node.x+=this.offsetX,this.node.y+=this.offsetY,this.lastPos=this.node.position,this.minY=this.node.y},e.prototype.initLimitInfo=function(){var t=l.default.getInstance().getLimitCol(this.getRow(),this.getCol(),!0),e=l.default.getInstance().getLimitCol(this.getRow(),this.getCol(),!1);this.maxX=s.default.getBirckPos(0,e).x-.5*c.default.brickWidth-.5*this.node.width,this.minX=s.default.getBirckPos(0,t).x+.5*c.default.brickWidth+.5*this.node.width,this.initMaxY=s.default.getBirckPos(this.getRow()+30,this.getCol()).y-.5*c.default.brickHeight-.5*this.node.height-230,this.maxY=this.initMaxY},e.prototype.resetBrick=function(){this.setFollowNode(null),this.node.position=s.default.getBirckPos(this.mapData.row,this.mapData.col),this.node.x+=this.offsetX,this.node.y+=this.offsetY},e.prototype.setCollisionStatus=function(){},e.prototype.pause=function(t){this.isPause=t},e.prototype.isCanLeftMove=function(){return!0},e.prototype.isCanRightMove=function(){return!0},e.prototype.updatePosX=function(t,e){var o=this;this.node.x+=t,t>0?(this.node.x=Math.min(this.node.x,this.maxX),this.node.x>=this.maxX&&(e.getComponent(p.default).changeDir(),this.correctTag=!1,this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(-55,0)),cc.callFunc(function(){o.correctTag=!0}))))):(this.node.x=Math.max(this.node.x,this.minX),this.node.x<=this.minX&&(e.getComponent(p.default).changeDir(),this.correctTag=!1,this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(55,0)),cc.callFunc(function(){o.correctTag=!0})))))},e.prototype.correctPosX=function(){if(this.correctTag){var t=this.maxX-this.node.x,e=.5*this.node.width,o=this.node.x-this.minX,n=.5*this.node.width;t<e?(this.correctTag=!1,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveBy((45-t)/45,cc.v2(-1*(45-t)-15,0)),cc.callFunc(function(){})))):o<n&&(this.correctTag=!1,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveBy((45-o)/45,cc.v2(45-o+15,0)),cc.callFunc(function(){}))))}},e.prototype.collisionCallBack=function(t,e){if(1==t){var o=e.getComponent(a.default);if(null==o)return;if(o.isCanAcrossDown()&&o.getTypeId()!=l.BRICKTYPE.CLOUDBRICK)return;o.getTypeId(),l.BRICKTYPE.CLOUDBRICK,this.maxY=e.y-.5*e.height-.5*this.node.height-230}},r([f(cc.Node)],e.prototype,"node_eyes",void 0),r([f(cc.Node)],e.prototype,"node_light",void 0),r([f(cc.Node)],e.prototype,"node_upCollsion",void 0),r([d],e)}(a.default);o.default=g,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Behavior":"Behavior","../Brick":"Brick","../CheckCollision":"CheckCollision","../Define":"Define","../Global":"Global"}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"40ba59UD45Du5XY96fxr/1B","ListItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemIndex=0,e.data={},e.listView=null,e}return i(e,t),e.prototype.onUpdateData=function(){},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ListView:[function(t,e,o){"use strict";cc._RF.push(e,"52758KPfElCeY/fs5dwnmCk","ListView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefabs=[],e.spacing=0,e.topSpacing=0,e.leftSpacing=0,e.itemsNode=[],e.itemsData=[],e.nodePools=[],e.startX=0,e.endX=0,e.startIndexX=1,e.endIndexX=-1,e.startY=0,e.endY=0,e.startIndexY=1,e.endIndexY=-1,e.buffLength=200,e}return i(e,t),e.prototype.onLoad=function(){console.log(this.node.name,this.itemPrefabs[0].name);for(var t=0,e=0,o=0;o<this.itemPrefabs.length;o++)this.nodePools[o]=new cc.NodePool,t=Math.max(t,this.itemPrefabs[o].data.height),e=Math.max(t,this.itemPrefabs[o].data.width);this.buffLength=this.vertical?2.5*t:2.5*e,this.getComponent(cc.Mask)||this.addComponent(cc.Mask),this.vertical?(this.node.y+=(1-this.node.anchorY)*this.node.height,this.node.anchorY=1,this.content.y=0):(this.node.x-=this.node.anchorX*this.node.width,this.node.anchorX=0,this.content.x=0)},e.prototype.start=function(){},e.prototype.init=function(){this.startIndexY=0,this.endIndexY=0,this.startIndexX=0,this.endIndexX=0,this.startY=0,this.endY=0,this.startX=0,this.endX=0;var t=this.itemsData[0];if(t){var e=this.getItemNode(t);if(this.itemsNode.push(e),this.content.addChild(e),this.vertical){var o=this.getItemHeight(t);e.y=-o/2-this.spacing/2-this.topSpacing,this.startY=e.y,this.endY=e.y,this.onItemChange(e,0,t)}else{var n=this.getItemWidth(t);e.x=n/2+this.spacing/2+this.leftSpacing,this.startX=e.x,this.endX=e.x,this.onItemChange(e,0,t)}}},e.prototype.setItemsData=function(t){this.itemsData.length>0&&this.removeAllItems(),this.itemsData=t.concat(),this.updateContentSize(t),this.init()},e.prototype.updateContentSize=function(t){for(var e=this.topSpacing,o=this.leftSpacing,n=0;n<t.length;n++)e+=this.getItemHeight(t[n])+this.spacing,o+=this.getItemWidth(t[n])+this.spacing;this.vertical&&this.horizontal&&(console.warn("\u4e0d\u80fd\u540c\u65f6\u5f00\u59cb\u6c34\u5e73\u548c\u5782\u76f4 \u53ea\u80fd\u5355\u4e00\u65b9\u5411 \u5df2\u81ea\u52a8\u5173\u95ed\u6c34\u5e73\u6ed1\u52a8"),this.horizontal=!1),this.vertical?(this.content.height=e,this.content.width=this.node.width,this.content.anchorX=.5,this.content.anchorY=1,this.content.y=0):(this.content.height=this.node.height,this.content.width=o,this.content.anchorX=0,this.content.anchorY=.5,this.content.x=0)},e.prototype.getItemsData=function(){return this.itemsData},e.prototype.getItemData=function(t){if(!(t<0||t>this.itemsData.length))return this.itemsData[t];console.log("invalid index",t)},e.prototype.setItemData=function(t,e){if(t<0||t>this.itemsData.length)console.log("invalid index",t);else if(this.itemsData[t]=e,t>=this.startIndexY&&t<=this.endIndexY){var o=this.itemsNode[t-this.startIndexY];this.onItemChange(o,t,e)}},e.prototype.getShowItems=function(){for(var t=[],e=0;e<this.itemsNode.length;e++){var o=this.itemsNode[e];t.push(o.getComponent(o.name))}return t},e.prototype.insertVerticle=function(t,e){if(this.content.height+=this.getItemHeight(t)+this.spacing,e>=this.startIndexY&&e<=this.endIndexY+1){var o=this.getItemNode(t);this.content.addChild(o),this.onItemChange(o,e,t);var n=this.getItemHeight(t),i=0;if(e<=this.endIndexY){i=this.getItemHeight(this.itemsData[e+1]),o.y=this.itemsNode[e-this.startIndexY].y+n/2+i/2-n;for(var r=e-this.startIndexY;r<this.itemsNode.length;r++){var a=this.itemsNode[r];a.y-=n+this.spacing,a.getComponent(a.name).itemIndex++}this.endY=this.itemsNode[this.itemsNode.length-1].y,this.startY=this.itemsNode[0].y}else{var s=this.getItemHeight(this.itemsData[e-1]);o.y=this.endY-n/2-s/2-this.spacing,o.getComponent(o.name).itemIndex++,this.endY=o.y}this.itemsNode.splice(e-this.startIndexY,0,o),e==this.startIndexY&&0!=this.startIndexY?this.startIndexY--:this.endIndexY++}},e.prototype.insertHorizontal=function(t,e){if(this.content.width+=this.getItemWidth(t)+this.spacing,e>=this.startIndexX&&e<=this.endIndexX){var o=this.getItemNode(t);this.content.addChild(o),this.onItemChange(o,e,t);var n=this.getItemWidth(t),i=0;if(e<=this.endIndexX){i=this.getItemWidth(this.itemsData[e+1]),o.x=this.itemsNode[e-this.startIndexX].x-n/2-i/2+n;for(var r=e-this.startIndexX;r<this.itemsNode.length;r++){var a=this.itemsNode[r];a.x+=n+this.spacing,a.getComponent(a.name).itemIndex++}this.endX=this.itemsNode[this.itemsNode.length-1].x,this.startX=this.itemsNode[0].x}else{var s=this.getItemWidth(this.itemsData[e-1]);o.x=this.endX+n/2+s/2+this.spacing,o.getComponent(o.name).itemIndex++,this.endX=o.x}this.itemsNode.splice(e-this.startIndexX,0,o),e==this.startIndexX&&0!=this.startIndexX?this.startIndexX--:this.endIndexX++}},e.prototype.insertItemData=function(t,e){this.itemsData.splice(e,0,t),this.vertical?this.insertVerticle(t,e):this.insertHorizontal(t,e)},e.prototype.removeItemData=function(t){var e=this.itemsData.splice(t,1)[0];if(this.vertical){if(this.content.height-=this.getItemHeight(e)+this.spacing,t>=this.startIndexY&&t<=this.endIndexY){for(var o=this.getItemHeight(e),n=t>1?this.getItemHeight(this.itemsData[t-1]):0,i=t-this.startIndexY;i<this.itemsNode.length;i++){var r=this.itemsNode[i];r.y+=o+this.spacing,r.getComponent(r.name).itemIndex--}var a=this.itemsNode.splice(t-this.startIndexY,1)[0];this.recyclingItemNode(e,a),this.startIndexY==t&&(this.startIndexY++,this.startY=this.itemsNode[0]?this.itemsNode[0].y:0),this.endIndexY--,this.endY+=n/2+o/2+this.spacing}}else if(this.content.width-=this.getItemWidth(e)+this.spacing,t>=this.startIndexX&&t<=this.endIndexX){var s=this.getItemWidth(e),c=this.getItemWidth(this.itemsData[t-1]);for(i=t-this.startIndexX;i<this.itemsNode.length;i++){var l=this.itemsNode[i];l.x-=s+this.spacing,l.getComponent(l.name).itemIndex--}a=this.itemsNode.splice(t-this.startIndexX,1)[0],this.recyclingItemNode(e,a),this.startIndexX==t&&(this.startIndexX++,this.startX=this.itemsNode[0].x),this.endIndexX--,this.endX-=c/2+s/2+this.spacing}},e.prototype.removeAllItems=function(){for(var t=this.itemsData.length-1;t>=0;t--)this.removeItemData(t);this.startIndexY=0,this.endIndexY=0,this.startIndexX=0,this.endIndexX=0,this.startY=0,this.endY=0,this.startX=0,this.endX=0,this.itemsData=[]},e.prototype.scrollToIndex=function(t,e){void 0===e&&(e=0);var o=this.itemsData;if(t<0||t>=o.length)console.log("invalid index",t);else{for(var n=cc.v2(),i=0;i<t;i++)this.vertical?n.y+=this.getItemHeight(o[i]):n.x+=this.getItemWidth(o[i]);e>0?this.scrollToOffset(n,e):this.scrollToOffset(n)}},e.prototype.getItemHeight=function(t){return this.itemPrefabs[t.prefabIndex||0].data.height},e.prototype.getItemWidth=function(t){return this.itemPrefabs[t.prefabIndex||0].data.width},e.prototype.getItemNode=function(t){var e=t.prefabIndex||0,o=this.nodePools[e];return o.size()>0?o.get():cc.instantiate(this.itemPrefabs[e])},e.prototype.onItemChange=function(t,e,o){var n=t.getComponent(t.name);n.itemIndex=e,n.data=o,n.listView=this,n.onUpdateData(o)},e.prototype.recyclingItemNode=function(t,e){var o=t.prefabIndex||0;this.nodePools[o].put(e)},e.prototype.recyclingTopNode=function(){var t=this.itemsNode.shift(),e=this.itemsData[this.startIndexY];this.recyclingItemNode(e,t);var o=0;this.startIndexY+1<this.itemsData.length&&(o=this.getItemHeight(this.itemsData[this.startIndexY+1])),this.startY=this.startY-this.getItemHeight(e)/2-o/2-this.spacing,this.startIndexY++},e.prototype.recyclingBottomNode=function(){var t=this.itemsNode.pop(),e=this.itemsData[this.endIndexY];this.recyclingItemNode(e,t);var o=0;this.endIndexY-1>=0&&(o=this.getItemHeight(this.itemsData[this.endIndexY-1])),this.endY=this.endY+this.getItemHeight(e)/2+o/2+this.spacing,this.endIndexY--},e.prototype.updateVerticle=function(){var t,e=this.content.y,o=this.node.height*(1-this.node.anchorY),n=-this.node.height*this.node.anchorY,i=!1;if(this.startY+e>o+this.buffLength&&(this.recyclingTopNode(),i=!0),this.endY+e<n-this.buffLength&&(this.recyclingBottomNode(),i=!0),this.startY+e<o+.2*this.buffLength&&(t=this.startIndexY-1)>=0&&t<this.itemsData.length){var r=this.itemsData[t],a=this.getItemNode(r);this.content.addChild(a),this.onItemChange(a,t,r);var s=this.getItemHeight(r),c=0;this.startIndexY<this.itemsData.length&&(c=this.getItemHeight(this.itemsData[this.startIndexY])),a.y=this.startY+s/2+c/2+this.spacing,this.itemsNode.unshift(a),this.startY=a.y,this.startIndexY=t,i=!0}if(this.endY+e>-this.node.height-.2*this.buffLength&&(t=this.endIndexY+1)>=0&&t<this.itemsData.length){r=this.itemsData[t],a=this.getItemNode(r),this.content.addChild(a),this.onItemChange(a,t,r),s=this.getItemHeight(r);var l=0;this.endIndexY>=0&&(l=this.getItemHeight(this.itemsData[this.endIndexY])),a.y=this.endY-s/2-l/2-this.spacing,this.itemsNode.push(a),this.endY=a.y,this.endIndexY=t,i=!0}return i},e.prototype.recyclingLeftNode=function(){console.log("recycling left");var t=this.itemsNode.shift(),e=this.itemsData[this.startIndexX];this.recyclingItemNode(e,t);var o=0;this.startIndexX+1<this.itemsData.length&&(o=this.getItemWidth(this.itemsData[this.startIndexX+1])),this.startX=this.startX+this.getItemWidth(e)/2+o/2+this.spacing,this.startIndexX++},e.prototype.recyclingRightNode=function(){console.log("recycling right");var t=this.itemsNode.pop(),e=this.itemsData[this.endIndexX];this.recyclingItemNode(e,t);var o=0;this.endIndexX-1>=0&&(o=this.getItemWidth(this.itemsData[this.endIndexX-1])),this.endX=this.endX-this.getItemHeight(e)/2-o/2-this.spacing,this.endIndexX--},e.prototype.updateHorizontal=function(){var t,e=this.content.x,o=this.node.width*this.node.anchorX,n=this.node.width*(1-this.node.anchorX),i=!1;if(this.startX+e<o-this.buffLength&&(this.recyclingLeftNode(),i=!0),this.endX+e>n+this.buffLength&&(this.recyclingRightNode(),i=!0),this.startX+e>o-.2*this.buffLength&&(t=this.startIndexX-1)>=0&&t<this.itemsData.length){var r=this.itemsData[t],a=this.getItemNode(r);this.content.addChild(a),this.onItemChange(a,t,r);var s=this.getItemWidth(r),c=0;this.startIndexX<this.itemsData.length&&(c=this.getItemWidth(this.itemsData[this.startIndexX])),a.x=this.startX-s/2-c/2-this.spacing,this.itemsNode.unshift(a),this.startX=a.x,this.startIndexX=t,i=!0}if(this.endX+e<this.node.width+.2*this.buffLength&&(t=this.endIndexX+1)>=0&&t<this.itemsData.length){r=this.itemsData[t],a=this.getItemNode(r),this.content.addChild(a),this.onItemChange(a,t,r),s=this.getItemWidth(r);var l=0;this.endIndexX>=0&&(l=this.getItemWidth(this.itemsData[this.endIndexX])),a.x=this.endX+s/2+l/2+this.spacing,this.itemsNode.push(a),this.endX=a.x,this.endIndexX=t,i=!0}return i},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this.vertical)for(;this.updateVerticle(););else for(;this.updateHorizontal(););},r([c([cc.Prefab])],e.prototype,"itemPrefabs",void 0),r([c],e.prototype,"spacing",void 0),r([c],e.prototype,"topSpacing",void 0),r([c],e.prototype,"leftSpacing",void 0),r([s],e)}(cc.ScrollView);o.default=l,cc._RF.pop()},{}],LoadingDialog:[function(t,e,o){"use strict";cc._RF.push(e,"8ffcbYe4mBH0ob5ZwmtNnnZ","LoadingDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/manager/BrickManager"),s=t("../game/manager/EffectManager"),c=t("../game/logic/Global"),l=t("../common/EventMgr"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_dot=null,e.nodeRole=null,e.nodeProgress=null,e.skinType=0,e.curLoadAtlasCount=0,e.maxLoadAtlasCount=4,e.maxValue=60,e.curValue=0,e.speedValue=50,e.isShowRunDot=!0,e.dotTime=0,e.descTime=0,e.descIndex=0,e.isLoadTag=!1,e.tempDt=.02,e}return i(e,t),e.prototype.preLoad=function(t){var e=this;void 0===t&&(t=-1),app.platformMgr.logEvent("loading_start"),this.isLoadTag=!0,c.default.updateMapStypeIndex(),c.default.isLoading=!0,app.user.getLastLevel();var o=app.user.getTestMapStyleIndex();-1!=o&&app.user.setMapStyleIndex(o),this.nodeProgress.width=0,-1!=t&&app.user.setMapStyleIndex(t),app.platformMgr.logEvent("mapStyle",{style:app.user.getMapStyleIndex()}),this.skinType=c.default.changeMapStyle(app.user.getMapStyleIndex()),l.EVT.on("LoadingDialogHide",this.hideLoading,this),this.loadAllAtlas(function(){app.platformMgr.logEvent("loading_progress30"),a.default.getInstance().preLoadJsonData(1,function(){app.platformMgr.logEvent("loading_progress50"),e.maxValue=80,s.default.getInstance().preLoadEffects(function(){app.platformMgr.logEvent("loading_progress80"),e.maxValue=90,e.loadBgs(function(){app.pageMgr.showPage("GameMainPage")})})})})},e.prototype.update=function(){this.isLoadTag&&(this.curValue<30?this.speedValue=30:this.curValue<50?this.speedValue=20:this.curValue<80&&(this.speedValue=10),100==this.maxValue&&(this.speedValue=100),this.curValue+=this.speedValue*this.tempDt,this.curValue=Math.min(this.curValue,this.maxValue),this.nodeProgress.width=5*this.curValue,this.nodeRole.x=5*this.curValue-10,100==this.curValue&&(this.isLoadTag=!1,app.platformMgr.logEvent("loading_end"),this.node.destroy(),a.default.getInstance().initOther(),c.default.isLoading=!1),this.isShowRunDot&&(this.dotTime+=this.tempDt,this.dotTime>=.3&&(this.dotTime=0,this.showDotEffect())))},e.prototype.loadAllAtlas=function(t){var e=this;this.curLoadAtlasCount=0,cc.loader.loadRes("atlas/brickAtlas"+this.skinType,cc.SpriteAtlas,function(o,n){o?console.log("loadAllAtlas atlas/brickAtlas  \u52a0\u8f7d\u5931\u8d25 mapStyleIndex = "+e.skinType):(c.default.brickAtlas=n,e.loadAtlasCallBack(t))}),cc.loader.loadRes("atlas/effectAtlas",cc.SpriteAtlas,function(o,n){o?console.log("loadAllAtlas atlas/effectAtlas  \u52a0\u8f7d\u5931\u8d25"):(c.default.effectAtlas=n,e.isShowRunDot=!0,e.loadAtlasCallBack(t))}),cc.loader.loadRes("atlas/collectBrickAtlas",cc.SpriteAtlas,function(o,n){o?console.log("loadAllAtlas atlas/collectBrickAtlas  \u52a0\u8f7d\u5931\u8d25"):(c.default.collectBrickAtlas=n,e.loadAtlasCallBack(t))}),cc.loader.loadRes("atlas/commonAtlas",cc.SpriteAtlas,function(o,n){o?console.log("loadAllAtlas atlas/commonAtlas  \u52a0\u8f7d\u5931\u8d25"):(c.default.commonAtlas=n,e.loadAtlasCallBack(t))})},e.prototype.loadAtlasCallBack=function(t){this.curLoadAtlasCount++,this.curLoadAtlasCount==this.maxLoadAtlasCount&&t()},e.prototype.loadBgs=function(t){var e=this;cc.loader.loadRes("textures/bg"+this.skinType,cc.SpriteFrame,function(o,n){o||(c.default.bgFrame=n,1!=e.skinType&&4!=e.skinType&&e.skinType,cc.loader.loadRes("textures/houseBg1",cc.SpriteFrame,function(o,n){o||(c.default.houseBgFrame1=n,cc.loader.loadRes("textures/houseBg2",cc.SpriteFrame,function(o,n){o||(c.default.houseBgFrame2=n,cc.loader.loadRes("textures/startTitle"+e.skinType,cc.SpriteFrame,function(e,o){e||(c.default.startTitleFrame=o,t())}))}))}))})},e.prototype.hideLoading=function(){this.maxValue=100},e.prototype.showDotEffect=function(){var t=cc.instantiate(this.node_dot);t.active=!0,this.nodeRole.parent.addChild(t),t.position=this.nodeRole.position,t.runAction(cc.sequence(cc.moveBy(.3,cc.v2(-40,0)),cc.removeSelf()))},e.prototype.loadPages=function(t){var e=app.pageMgr;cc.loader.loadResDir("prefabs/preload",function(o,n){for(var i=0;i<n.length;i++){var r=cc.instantiate(n[i]);r.active=!1,c.default.pages.addChild(r),e.register(r.name,r)}t()})},r([h(cc.Node)],e.prototype,"node_dot",void 0),r([h(cc.Node)],e.prototype,"nodeRole",void 0),r([h(cc.Node)],e.prototype,"nodeProgress",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Global":"Global","../game/manager/BrickManager":"BrickManager","../game/manager/EffectManager":"EffectManager"}],Loop:[function(t,e,o){"use strict";cc._RF.push(e,"36a83ZHXLxCgKIf0XBA0MoB","Loop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dir=1,e.speed=300,e.totalDistance=0,e.distance=0,e.resetPosY=0,e.resetPosYUp=0,e.col=0,e.isv=!1,e}return i(e,t),e.prototype.update=function(t){var e=this.speed*t*this.dir;this.isv?this.updatePosX(e):this.updatePos(e)},e.prototype.updatePosX=function(t){this.totalDistance=this.totalDistance+t;for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].position=new cc.Vec2(this.node.children[e].x-t,this.node.children[e].y);Math.abs(this.totalDistance)>=this.distance&&(this.dir>0?(this.totalDistance=Math.abs(this.totalDistance)-this.distance,this.node.children.sort(function(t,e){return t.position.x-e.position.x}.bind(this)),this.node.children[0].position=new cc.Vec2(this.resetPosYUp-this.totalDistance,this.node.children[0].y)):(this.totalDistance=this.totalDistance+this.distance,this.node.children.sort(function(t,e){return e.position.x-t.position.x}.bind(this)),this.node.children[0].position=new cc.Vec2(this.resetPosY-this.totalDistance,this.node.children[0].y)))},e.prototype.updatePos=function(t){this.totalDistance=this.totalDistance+t;for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].position=new cc.Vec2(this.node.children[e].x,this.node.children[e].y+t);if(Math.abs(this.totalDistance)>=this.distance)if(this.dir>0)for(this.totalDistance=Math.abs(this.totalDistance-this.distance),this.node.children.sort(function(t,e){return e.position.y-t.position.y}.bind(this)),e=0;e<this.col;e++)this.node.children[e].position=new cc.Vec2(this.node.children[e].x,this.resetPosY+this.totalDistance);else for(this.totalDistance=this.distance+this.totalDistance,this.node.children.sort(function(t,e){return t.position.y-e.position.y}.bind(this)),e=0;e<this.col;e++)this.node.children[e].position=new cc.Vec2(this.node.children[e].x,this.resetPosYUp+this.totalDistance)},r([c({displayName:"\u95f4\u9694\u8fd1\u8ddd\u79bbY"})],e.prototype,"distance",void 0),r([c({displayName:"\u91cd\u7f6e\u5e95\u90e8\u7684\u4f4d\u7f6e"})],e.prototype,"resetPosY",void 0),r([c({displayName:"\u91cd\u7f6e\u9876\u90e8\u7684\u4f4d\u7f6e"})],e.prototype,"resetPosYUp",void 0),r([c({displayName:"\u5217\u6570"})],e.prototype,"col",void 0),r([c({displayName:"\u6a2a\u5411\u6ed1\u52a8"})],e.prototype,"isv",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MapBgLoop:[function(t,e,o){"use strict";cc._RF.push(e,"b58dc4Po9xENKa2Exk9CohX","MapBgLoop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Global"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curBg=null,e.upBg=null,e.downBg=null,e.followNode=null,e.sp_startTitle=null,e.offsetY=cc.winSize.height,e.isTag=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.curBg.getComponent(cc.Widget).updateAlignment(),this.upBg.getComponent(cc.Widget).updateAlignment(),this.downBg.getComponent(cc.Widget).updateAlignment(),this.curBg.getComponent(cc.Widget).destroy(),this.upBg.getComponent(cc.Widget).destroy(),this.downBg.getComponent(cc.Widget).destroy(),this.scheduleOnce(function(){t.upBg.y=t.upBg.height,t.downBg.y=-1*t.downBg.height,t.isTag=!0,t.node.y=220}),this.offsetY=0},e.prototype.updateTime=function(){this.isTag&&(this.followNode.y-this.offsetY>=cc.winSize.height?this.changePos(!0):this.offsetY-this.followNode.y>=0&&this.changePos(!1))},e.prototype.changePos=function(t){var e=this.downBg,o=this.upBg,n=this.curBg;t?(this.downBg.y=this.upBg.y+cc.winSize.height,this.offsetY+=cc.winSize.height,this.upBg=e,this.curBg=o,this.downBg=n):(this.upBg.y=this.downBg.y-cc.winSize.height,this.offsetY-=cc.winSize.height,this.upBg=n,this.curBg=e,this.downBg=o),this.sp_startTitle.node.active=0==this.offsetY},e.prototype.updateBgTexture=function(){var t=this;this.upBg.getComponent(cc.Sprite).spriteFrame=a.default.bgFrame,this.downBg.getComponent(cc.Sprite).spriteFrame=a.default.bgFrame,this.curBg.getComponent(cc.Sprite).spriteFrame=a.default.bgFrame,this.sp_startTitle.spriteFrame=a.default.startTitleFrame;var e=app.user.getMapStyleIndex();this.scheduleOnce(function(){}),1==e||2==e?this.scheduleOnce(function(){t.sp_startTitle.node.y=t.sp_startTitle.node.y+60}):4!=e&&5!=e||this.scheduleOnce(function(){t.sp_startTitle.node.y=t.sp_startTitle.node.y+46})},r([l(cc.Node)],e.prototype,"curBg",void 0),r([l(cc.Node)],e.prototype,"upBg",void 0),r([l(cc.Node)],e.prototype,"downBg",void 0),r([l(cc.Node)],e.prototype,"followNode",void 0),r([l(cc.Sprite)],e.prototype,"sp_startTitle",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Global":"Global"}],MapDataManager:[function(t,e,o){"use strict";cc._RF.push(e,"acbeaonXpRLmJyQsfIA9wsN","MapDataManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){this.mapDataRoot=null,this.tiledMap=null,this.mapDataList=new Array,this.totalRow=0,this.loadRow=25}return t.prototype.initMapData=function(t){this.mapDataRoot=t},n([r],t)}());o.default=a,cc._RF.pop()},{}],MonsterBehaviorMove:[function(t,e,o){"use strict";cc._RF.push(e,"01aceaeigpKxadBCi+jmPTZ","MonsterBehaviorMove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Monster"),s=t("../Global"),c=t("../RoleAnimation"),l=t("../../manager/BrickManager"),p=t("../Define"),u=t("../Brick"),h=t("../Behavior"),d=cc._decorator,f=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.behavior=null,e.lastPos=cc.Vec2.ZERO,e.animasion=null,e}return i(e,t),e.prototype.onLoad=function(){this.behavior=this.node.getComponent(h.default),this.behavior.collisionCallBack=this.collisionCalllBack.bind(this),this.behavior.actionCallBack=this.actionCallBack.bind(this)},e.prototype.initBrick=function(e,o){var n=this;if(t.prototype.initBrick.call(this,e,o),this.node.position=s.default.getBirckPos(this.mapData.row,this.mapData.col).add(cc.v2(-.5*this.node.width,-.5*this.node.height)),this.lastPos=this.node.position,this.behavior.setCollisionStatus(!0),null!=o.extraInfo&&null!=o.extraInfo.points&&2==o.extraInfo.points.length){var i=o.extraInfo.points[0].x<o.extraInfo.points[1].x?-1:1;this.behavior.setMoveDir(-1*i),this.changeDirCallBack(i),this.behavior.setMoveSpeed(5*o.extraInfo.speed),this.behavior.changeDirCallBack=this.changeDirCallBack.bind(this),this.behavior.setCurAction(h.ROLEACTION.NONE),this.behavior.pause(!1),this.scheduleOnce(function(){n.behavior.setCurAction(h.ROLEACTION.WALKING)},.5),this.behavior.setGravity(-300)}else console.error("MonsterBehaviorMove initBrick \u602a\u7269\u8def\u5f84\u9519\u8bef")},e.prototype.changeStyle=function(){this.animasion.palyAnimation(c.ROLEANIMATIONTYPE.RUN)},e.prototype.update=function(){this.node.position.sub(this.lastPos).mag()>=50&&(this.lastPos=this.node.position,l.default.getInstance().updateCollisionStatus())},e.prototype.collisionCalllBack=function(t,e){var o=e.getComponent(u.default);null!=o&&o.getTypeId()==l.BRICKTYPE.HURTBRICK&&l.default.getInstance().removeBrickByRowCol(this.mapData.row,this.mapData.col)},e.prototype.actionCallBack=function(t){switch(t){case h.ROLEACTION.WALKING:case h.ROLEACTION.JUMPING:case h.ROLEACTION.DROPING:case h.ROLEACTION.GLIDEDROPING:this.animasion.palyAnimation(c.ROLEANIMATIONTYPE.RUN)}},e.prototype.resetBrickMonster=function(){var t=this;this.node.position=s.default.getBirckPos(this.mapData.row,this.mapData.col),this.node.y=this.node.y+.5*p.default.brickHeight;var e=this.mapData.extraInfo.points[0].x<this.mapData.extraInfo.points[1].x?-1:1;this.behavior.setMoveDir(-1*e),this.changeDirCallBack(e),this.behavior.clearAll(),this.behavior.setCollisionStatus(!0),this.behavior.setCurAction(h.ROLEACTION.NONE),this.behavior.pause(!1),this.scheduleOnce(function(){t.behavior.setCurAction(h.ROLEACTION.WALKING)},.5)},e.prototype.showMonster=function(e){var o=this;void 0===e&&(e=null),t.prototype.showMonster.call(this,function(){o.resetBrickMonster()})},e.prototype.pause=function(t){this.behavior.pause(t)},e.prototype.changeDirCallBack=function(t){0==t&&(t=1),this.animasion.node.scaleX=t},e.prototype.removeBrickSelf=function(){this.behavior.setCurAction(h.ROLEACTION.NONE),t.prototype.removeBrickSelf.call(this),this.animasion.palyAnimation(c.ROLEANIMATIONTYPE.DIE)},r([g(c.default)],e.prototype,"animasion",void 0),r([f],e)}(a.default);o.default=y,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Behavior":"Behavior","../Brick":"Brick","../Define":"Define","../Global":"Global","../RoleAnimation":"RoleAnimation","./Monster":"Monster"}],MonsterFireBullet:[function(t,e,o){"use strict";cc._RF.push(e,"ceb71lCyVJJmYCNhb9Rt0s1","MonsterFireBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Monster"),s=t("../PointMoveHelper"),c=t("../../manager/BulletManager"),l=t("../../manager/BrickManager"),p=t("../Define"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.armature=null,e.offsetX=0,e.offsetY=0,e.fireEffectOffsetX=0,e.fireEffectOffsetY=0,e.pointMoveHelper=null,e.fireDir=0,e.fireInterval=0,e.bulletInitPost=cc.Vec2.ZERO,e.totalTime=0,e.fireEffectPos=cc.Vec2.ZERO,e.fireName="fire",e.normalName="standby",e}return i(e,t),e.prototype.initBrick=function(e,o){this.fireInterval=o.extraInfo.interval,this.fireDir=o.extraInfo.dir,this.offsetX=.5*(this.node.width-p.default.brickWidth),this.offsetY=.5*(this.node.height-p.default.brickHeight),t.prototype.initBrick.call(this,e,o),null!=o.extraInfo.points&&(this.pointMoveHelper=this.node.getComponent(s.default),null==this.pointMoveHelper&&(this.pointMoveHelper=this.node.addComponent(s.default)),this.pointMoveHelper.initMoveHelper(o.extraInfo,this.offsetX,this.offsetY)),this.totalTime=0,this.pause(!0)},e.prototype.update=function(t){this.isPauseTag||(this.totalTime+=t,this.totalTime>=this.fireInterval&&(this.totalTime=this.totalTime-this.fireInterval,this.fire()))},e.prototype.removeBrickSelf=function(){this.unscheduleAllCallbacks(),t.prototype.removeBrickSelf.call(this)},e.prototype.changeStyle=function(){this.changeMonsterDir(),this.initBulletInitPos(),this.armature.playAnimation(this.normalName,1)},e.prototype.fire=function(){var t=this;this.armature.playAnimation(this.fireName,1),4==this.getMonsterId()?this.scheduleOnce(function(){c.default.getInstance().fireBullet(t.bulletPrefab,t.fireDir,t.bulletInitPost,t)},.8):this.scheduleOnce(function(){c.default.getInstance().fireBullet(t.bulletPrefab,t.fireDir,t.bulletInitPost,t)},.5),l.default.getInstance().isDisplayedOnScreenByRow(this.mapData.row)&&app.soundMgr.play(p.default.soundCannon)},e.prototype.changeMonsterDir=function(){this.armature.node.angle=0,this.fireEffectPos=cc.Vec2.ZERO,this.node.scaleX=1,this.node.scaleY=1,this.fireDir==p.DIR.UP?(this.node.angle=90,this.node.y+=.5*(this.node.width-p.default.brickWidth),this.node.x+=.5*(this.node.height-p.default.brickHeight)):this.fireDir==p.DIR.DOWN?(this.node.angle=-90,this.node.y-=.5*(this.node.width-p.default.brickWidth),this.node.x+=.5*(this.node.height-p.default.brickHeight)):this.fireDir==p.DIR.LEFT?(this.node.angle=180,this.node.x-=.5*(this.node.width-p.default.brickWidth),this.node.y+=.5*(this.node.height-p.default.brickHeight),this.node.scaleY=-1):this.fireDir==p.DIR.RIGHT&&(this.node.angle=0,this.node.x+=.5*(this.node.width-p.default.brickWidth),this.node.y+=.5*(this.node.height-p.default.brickHeight)),this.fireEffectPos.x=this.fireEffectPos.x+this.fireEffectOffsetX},e.prototype.initBulletInitPos=function(){this.fireDir==p.DIR.UP?this.bulletInitPost=this.node.position.add(cc.v2(0,.8*this.node.height)):this.fireDir==p.DIR.DOWN?this.bulletInitPost=this.node.position.add(cc.v2(0,.8*-this.node.height)):this.fireDir==p.DIR.LEFT?this.bulletInitPost=this.node.position.add(cc.v2(.8*-this.node.height,0)):this.fireDir==p.DIR.RIGHT&&(this.bulletInitPost=this.node.position.add(cc.v2(.8*this.node.height,0)))},e.prototype.getOccupyCol=function(){return 2},e.prototype.getOccupyRow=function(){return 2},e.prototype.changeToWork=function(){this.totalTime=0,this.pause(!1),t.prototype.changeToWork.call(this)},r([d(cc.Prefab)],e.prototype,"bulletPrefab",void 0),r([d(dragonBones.ArmatureDisplay)],e.prototype,"armature",void 0),r([d({displayName:"\u53d1\u5c04\u7279\u6548\u504f\u79fbX"})],e.prototype,"fireEffectOffsetX",void 0),r([d({displayName:"\u53d1\u5c04\u7279\u6548\u504f\u79fbY"})],e.prototype,"fireEffectOffsetY",void 0),r([h],e)}(a.default);o.default=f,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../../manager/BulletManager":"BulletManager","../Define":"Define","../PointMoveHelper":"PointMoveHelper","./Monster":"Monster"}],MonsterHelper:[function(t,e,o){"use strict";cc._RF.push(e,"77211NEv9RJn4B20ch49obS","MonsterHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],MonsterPathMove:[function(t,e,o){"use strict";cc._RF.push(e,"1c620lwv3FNN457VxdKlE+p","MonsterPathMove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Monster"),s=t("../PointMoveHelper"),c=t("../Global"),l=t("../../manager/EffectManager"),p=t("../Define"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offsetX=0,e.offsetY=-10,e.pointMoveHelper=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.pointMoveHelper=this.node.addComponent(s.default),this.pointMoveHelper.setChangeDirCallBack(this.changeDirCallBack.bind(this)),this.pointMoveHelper.initMoveHelper(o.extraInfo,this.offsetX,this.offsetY),this.pause(!0)},e.prototype.changeStyle=function(){},e.prototype.changeDirCallBack=function(t){0!=t.x&&(this.node.scaleX=-1*t.x)},e.prototype.resetBrick=function(){this.node.position=c.default.getBirckPos(this.mapData.row,this.mapData.col),this.pointMoveHelper.reset()},e.prototype.showMonster=function(){var t=this;l.default.getInstance().showEffect(p.default.effectMonsterDeath,this.node.position,1,1,function(){t.node.active=!0,t.resetBrick()})},e.prototype.pause=function(t){this.pointMoveHelper.pause(t)},e.prototype.removeBrickSelf=function(){this.node.stopAllActions(),null!=this.pointMoveHelper&&(this.pointMoveHelper.destroy(),this.pointMoveHelper=null),t.prototype.removeBrickSelf.call(this)},e.prototype.changeToWork=function(){this.pause(!1),t.prototype.changeToWork.call(this)},r([d({displayName:"\u504f\u79fbX"})],e.prototype,"offsetX",void 0),r([d({displayName:"\u504f\u79fbY"})],e.prototype,"offsetY",void 0),r([h],e)}(a.default);o.default=f,cc._RF.pop()},{"../../manager/EffectManager":"EffectManager","../Define":"Define","../Global":"Global","../PointMoveHelper":"PointMoveHelper","./Monster":"Monster"}],Monster:[function(t,e,o){"use strict";cc._RF.push(e,"a86cc5PN1FGqamN+NuRGk4V","Monster");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../../manager/BrickManager"),c=t("../../manager/EffectManager"),l=t("../Define"),p=t("../Global"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o)},e.prototype.removeBrickSelf=function(){var t=this;this.curStutas=a.BRICKSTUTAS.REMOVE,this.scheduleOnce(function(){s.default.getInstance().putPool(t.getTypeId(),t.node,t.mapData.extraInfo.monsterId),t.node.removeFromParent()})},e.prototype.changeStyle=function(){},e.prototype.setCollisionStatus=function(){},e.prototype.hideMonster=function(){this.node.active&&(this.node.active=!1,c.default.getInstance().showEffect(l.default.effectMonsterDeath,this.node.position))},e.prototype.showMonster=function(t){var e=this;void 0===t&&(t=null),c.default.getInstance().showEffect(l.default.effectMonsterDeath,p.default.getBirckPos(this.mapData.row,this.mapData.col),1,1,function(){e.node.active=!0,null!=t&&t()})},e.prototype.getMonsterId=function(){return this.mapData.extraInfo.monsterId},r([h],e)}(a.default));o.default=d,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../../manager/EffectManager":"EffectManager","../Brick":"Brick","../Define":"Define","../Global":"Global"}],MovieBrick:[function(t,e,o){"use strict";cc._RF.push(e,"22d92O05xVLYKawTZYYaM2E","MovieBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_startBtn=null,e.node_light=null,e.node_bg=null,e.sp_avatar=null,e.count=0,e.opacityArr=[170,150,130,100,130,150],e.bgColor=[new cc.Color(182,182,182),new cc.Color(89,89,89)],e.isWhiteTag=!1,e.state=-1,e}return i(e,t),e.prototype.initBrick=function(e,o){var n=this;t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.node.y+=15,this.count=0,this.node_light.opacity=this.opacityArr[this.count],this.node.setSiblingIndex(0),this.resetBrick(),this.node_bg.stopAllActions(),this.node_bg.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){var t=n.isWhiteTag?0:1;n.isWhiteTag=!n.isWhiteTag,n.node_bg.color=n.bgColor[t]})).repeatForever()),this.node_light.stopAllActions(),this.node_light.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){n.count++,n.count>=n.opacityArr.length&&(n.count=0),n.node_light.opacity=n.opacityArr[n.count]})).repeatForever())},e.prototype.changeState=function(){-1==this.state&&(this.state=0,this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(0,-75))))},e.prototype.share=function(){1!=this.state&&-1!=this.state&&(this.state=1,this.startBtnAction(),app.platformMgr.logEvent("headCamera",{from:"movie"}))},e.prototype.startBtnAction=function(){var t=this;app.soundMgr.play(s.default.soundCheckPoint),this.node_bg.active=!1,this.sp_avatar.node.active=!0,this.node_startBtn.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-60)),cc.callFunc(function(){t.sharePrefab()})))},e.prototype.sharePrefab=function(){app.soundMgr.play(s.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.resetBrick=function(){this.node_startBtn.y=-60,this.node_bg.active=!0,this.sp_avatar.node.active=!1,this.state=-1},e.prototype.initOther=function(){cc.loader.loadRes("prefabs/share/ShareMovie",function(){})},r([p(cc.Node)],e.prototype,"node_startBtn",void 0),r([p(cc.Node)],e.prototype,"node_light",void 0),r([p(cc.Node)],e.prototype,"node_bg",void 0),r([p(cc.Sprite)],e.prototype,"sp_avatar",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Brick":"Brick","../Define":"Define"}],MovingBrickHelper:[function(t,e,o){"use strict";cc._RF.push(e,"ba7718AtJtAmqL73y8wENTe","MovingBrickHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Global"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.points=[],e.curIndex=0,e.pointHelper=null,e}return i(e,t),e.prototype.initMovingHelper=function(t,e){this.typeId=t,this.pointHelper=e,this.points=e.getPoints(),this.curIndex=this.points.length-1,this.node.stopAllActions(),this.randomMoveDir()},e.prototype.randomMoveDir=function(){var t=this;this.randomIndex();var e=null;0==this.pointHelper.getEaseAction()?e=cc.moveTo(.2*this.pointHelper.getSpeeds()[this.curIndex],this.points[this.curIndex]):1==this.pointHelper.getEaseAction()&&(e=cc.moveTo(.2*this.pointHelper.getSpeeds()[this.curIndex],this.points[this.curIndex]).easing(cc.easeIn(10))),this.node.stopAllActions(),this.node.runAction(cc.sequence(e,cc.delayTime(this.pointHelper.getDelayTime()),cc.callFunc(function(){t.randomMoveDir()})))},e.prototype.randomIndex=function(){var t=-1;1==a.default.getRandom(0,2)&&(t=1);var e=this.curIndex;this.curIndex=this.curIndex+t,this.curIndex=this.curIndex>=this.points.length?0:this.curIndex,this.curIndex=this.curIndex<0?this.points.length-1:this.curIndex;var o=this.points[e],n=this.points[this.curIndex];Math.abs(o.x-n.x)<Math.abs(o.y-n.y)?o.y>n.y?console.log("\u5411\u4e0b\u79fb\u52a8"):console.log("\u5411\u4e0a\u79fb\u52a8"):o.x>n.x?console.log("\u5411\u5de6\u79fb\u52a8"):console.log("\u5411\u53f3\u79fb\u52a8")},r([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./Global":"Global"}],MovingBrick:[function(t,e,o){"use strict";cc._RF.push(e,"2737fMryJBOUImjYgR+KsWL","MovingBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=t("../Global"),l=t("../PointMoveHelper"),p=t("../BrickHurtHelper"),u=t("../../manager/BrickManager"),h=t("../../../common/EventMgr"),d=cc._decorator,f=d.ccclass,g=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dir=cc.v2(0,0),e.followNode=null,e.pointMoveHelper=null,e.offsetX=0,e.offsetY=0,e.isUnderRole=!1,e.lastPos=cc.Vec2.ZERO,e.offsetPos=cc.Vec2.ZERO,e.hurtHelper=null,e.mergeNode=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.pointMoveHelper=this.node.addComponent(l.default),this.isUnderRole=!1,this.offsetX=.5*(this.node.width-s.default.brickWidth)-3,this.offsetY=.5*(this.node.height-s.default.brickHeight)+2,this.pointMoveHelper.initMoveHelper(o.extraInfo,this.offsetX,this.offsetY,u.BRICKTYPE.MOVEBRICK),null==o.extraInfo&&console.error("MovingBrick \u79fb\u52a8\u65b9\u5757\u8def\u5f84\u9519\u8bef"),this.followNode=null,""!=o.extraInfo.hurtInfo&&(this.hurtHelper=this.node.addComponent(p.default),this.hurtHelper.initHurts(o.extraInfo.hurtInfo),this.node.setParent(c.default.getNodeRootByIndex(1)),this.node.setSiblingIndex(0)),this.lastPos=this.node.position,this.pause(!0)},e.prototype.update=function(){this.offsetPos=this.node.position.sub(this.lastPos),this.checkThroughY(),this.checkThroughX(),this.lastPos=this.node.position},e.prototype.checkThroughY=function(){if(Math.abs(this.offsetPos.y)>c.default.curRoleNode.height){if(this.node.x<c.default.curRoleNode.x){if(c.default.curRoleNode.x-this.node.x>.5*this.node.width)return}else if(this.node.x-c.default.curRoleNode.x>.5*this.node.width+c.default.curRoleNode.width)return;if(this.offsetPos.y>0){if(this.node.y>c.default.curRoleNode.y&&this.lastPos.y<c.default.curRoleNode.y){c.default.curRoleNode.y=this.node.y+.5*this.node.height,(e=c.default.curRoleNode.position).x,c.default.curRoleNode.width;var t=c.default.getRowColByPos(e);null==(o=this.getRowBrick(t.row+1))||o.isCanAcrossDown()||h.EVT.emit("GameCtrlRoleDead")}}else if(this.node.y-.5*this.node.height<=c.default.curRoleNode.y&&this.lastPos.y>c.default.curRoleNode.y){var e,o;c.default.curRoleNode.y=this.node.y-.5*this.node.height,(e=c.default.curRoleNode.position).x,c.default.curRoleNode.width,t=c.default.getRowColByPos(e),null==(o=this.getRowBrick(t.row))||o.isCanAcrossUp()||h.EVT.emit("GameCtrlRoleDead")}}},e.prototype.checkThroughX=function(){if(Math.abs(this.offsetPos.x)>c.default.curRoleNode.width){if(this.node.y<c.default.curRoleNode.y){if(c.default.curRoleNode.y-this.node.y>.5*this.node.height)return}else if(this.node.y-c.default.curRoleNode.y>.5*this.node.height+c.default.curRoleNode.height)return;if(this.offsetPos.x>0){if(this.node.x>c.default.curRoleNode.x&&this.lastPos.x<c.default.curRoleNode.x){c.default.curRoleNode.x=this.node.x+.5*this.node.width;var t=c.default.curRoleNode.position,e=c.default.getRowColByPos(t);null==(o=this.getColBrick(e.col+1))||o.isCanAcrossLeftRight()||h.EVT.emit("GameCtrlRoleDead")}}else if(this.node.x-.5*this.node.width<=c.default.curRoleNode.x&&this.lastPos.x>c.default.curRoleNode.x){var o;c.default.curRoleNode.x=this.node.x-.5*this.node.width,t=c.default.curRoleNode.position,e=c.default.getRowColByPos(t),null==(o=this.getColBrick(e.col))||o.isCanAcrossLeftRight()||h.EVT.emit("GameCtrlRoleDead")}}},e.prototype.getRowBrick=function(t){var e=u.default.getInstance().getBrickByRowCol(t,this.getCol());if(null==e)for(var o=this.getOccupyRow(),n=0;n<o-1;n++)if(null!=(e=u.default.getInstance().getBrickByRowCol(t,this.getRow()+n+1)))return e;return e},e.prototype.getColBrick=function(t){var e=u.default.getInstance().getBrickByRowCol(this.getRow(),t);if(null==e)for(var o=this.getOccupyCol(),n=0;n<o-1;n++)if(null!=(e=u.default.getInstance().getBrickByRowCol(this.getRow()+n+1,t)))return e;return e},e.prototype.setFollowNode=function(t,e){void 0===e&&(e=!1),this.followNode=t,this.isUnderRole=e},e.prototype.isLeftRightMove=function(){return 0!=this.dir.x},e.prototype.isUpDownMove=function(){return 0!=this.dir.y},e.prototype.isUpMoveing=function(){return 1==this.dir.y},e.prototype.isDownMoveing=function(){return-1==this.dir.y},e.prototype.changeStyle=function(){var t="moveBlock_1_"+this.mapData.subType,e=this.icon.node;this.icon.spriteFrame=c.default.brickAtlas.getSpriteFrame(t),this.node.width=e.width,this.node.height=e.height,this.mergetextures(),this.node.getComponent(cc.BoxCollider).size.width=this.node.width,this.node.getComponent(cc.BoxCollider).size.height=this.node.height},e.prototype.mergetextures=function(){if(null!=this.mergeNode&&(this.mergeNode.destroy(),this.mergeNode=null),null!=this.mapData.extraInfo){var t=this.mapData.extraInfo.numInfo.split(",");if(2==t.length){var e=Number(t[0]),o=Number(t[1]);this.mergeNode=new cc.Node("sp1"),this.icon.node.addChild(this.mergeNode),this.icon.node.setContentSize(this.node.getContentSize());var n=this.mergeNode.addComponent(cc.Sprite);n.spriteFrame=this.icon.spriteFrame,n.type=cc.Sprite.Type.TILED,this.mergeNode.position=cc.Vec2.ZERO,e==s.DIR.RIGHT?(this.node.width=(this.node.width+2)*o,n.node.width=this.node.width):e==s.DIR.UP&&(this.node.height=(this.node.height+2)*o,n.node.height=this.node.height),this.icon.spriteFrame=null}}},e.prototype.resetBrick=function(){this.setFollowNode(null),this.node.position=c.default.getBirckPos(this.mapData.row,this.mapData.col),this.node.x+=this.offsetX,this.node.y+=this.offsetY,this.lastPos=this.node.position,this.offsetPos=cc.Vec2.ZERO,this.pointMoveHelper.reset()},e.prototype.setCollisionStatus=function(){},e.prototype.pause=function(t){this.pointMoveHelper.pause(t)},e.prototype.getOccupyCol=function(){return 1==this.mapData.subType?2:2==this.mapData.subType?2:3==this.mapData.subType?3:1},e.prototype.getOccupyRow=function(){return 1==this.mapData.subType?2:2==this.mapData.subType?3:3==this.mapData.subType?3:1},e.prototype.isCanAcrossDown=function(){return 4==this.mapData.subType||t.prototype.isCanAcrossDown.call(this)},e.prototype.isCanAcrossLeftRight=function(){return 4==this.mapData.subType||t.prototype.isCanAcrossLeftRight.call(this)},e.prototype.isEaseAction=function(){return this.mapData.extraInfo.easeAction},e.prototype.removeBrickSelf=function(){this.node.stopAllActions(),null!=this.pointMoveHelper&&(this.pointMoveHelper.destroy(),this.pointMoveHelper=null),null!=this.hurtHelper&&(this.hurtHelper.removeAllHurts(),this.hurtHelper.destroy(),this.hurtHelper=null),t.prototype.removeBrickSelf.call(this)},e.prototype.changeToWork=function(){this.pause(!1),t.prototype.changeToWork.call(this)},r([f],e)}(a.default));o.default=g,cc._RF.pop()},{"../../../common/EventMgr":"EventMgr","../../manager/BrickManager":"BrickManager","../Brick":"Brick","../BrickHurtHelper":"BrickHurtHelper","../Define":"Define","../Global":"Global","../PointMoveHelper":"PointMoveHelper"}],MovingHurtBrick:[function(t,e,o){"use strict";cc._RF.push(e,"093e4bq70tFwp/D+PHEBrez","MovingHurtBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../PointMoveHelper"),c=t("../../manager/BrickManager"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pointMoveHelper=null,e.offsetX=0,e.offsetY=0,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.pointMoveHelper=this.node.getComponent(s.default),null==this.pointMoveHelper&&(this.pointMoveHelper=this.node.addComponent(s.default)),this.node.setSiblingIndex(0),this.pointMoveHelper.initMoveHelper(o.extraInfo,-this.offsetX,-this.offsetY,c.BRICKTYPE.MOVE_HURT_BRICK),this.icon.node.stopAllActions(),this.icon.node.runAction(cc.rotateBy(1,360).repeatForever()),this.pause(!0)},e.prototype.changeStyle=function(){},e.prototype.setCollisionStatus=function(){},e.prototype.pause=function(t){this.pointMoveHelper.pause(t)},e.prototype.resetBrick=function(){this.pointMoveHelper.reset()},e.prototype.removeBrickSelf=function(){this.node.stopAllActions(),null!=this.pointMoveHelper&&(this.pointMoveHelper.destroy(),this.pointMoveHelper=null),t.prototype.removeBrickSelf.call(this)},e.prototype.changeToWork=function(){this.pause(!1),t.prototype.changeToWork.call(this)},r([p],e)}(a.default));o.default=u,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Brick":"Brick","../PointMoveHelper":"PointMoveHelper"}],MysteryHouseManager:[function(t,e,o){"use strict";cc._RF.push(e,"aeb11Z0muNOOriSFgOiyuoz","MysteryHouseManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.MYSTERUYHOUSE_STATUS=o.HOUSTTYPE=void 0;var n,i=t("../logic/MysteryHouse"),r=t("./BrickManager"),a=t("../logic/Define"),s=t("../logic/BrickMapDataHelper"),c=t("../logic/Global"),l={1:"maps/mysteryHouse",2:"maps/mysteryHouse1",4:"maps/mysteryHouse2",5:"maps/mysteryHouse3"};(function(t){t[t.TURNTABLE=1]="TURNTABLE",t[t.FROZEN=2]="FROZEN",t[t.SHARETROPHY=4]="SHARETROPHY",t[t.COLLECT=5]="COLLECT"})(o.HOUSTTYPE||(o.HOUSTTYPE={})),function(t){t[t.NONE=0]="NONE",t[t.RIGHT=1]="RIGHT",t[t.LEFT=2]="LEFT",t[t.MIDDLE=3]="MIDDLE"}(n=o.MYSTERUYHOUSE_STATUS||(o.MYSTERUYHOUSE_STATUS={}));var p=function(){function t(){this.houseList=new Map,this.offsetIndex=0,this.houseStutas=new Map,this.curHouse=null,this.mysteryHouseBg=null,this.isHouseErrorTag=!1,this.doorBrick=null,this.houseInfo=[],this.lastState=n.NONE,this.lastRow=0}return t.getInstance=function(){return this.instance},t.prototype.showMysteryHouse=function(t,e,o){if(0==this.offsetIndex)return this.curHouse=null,void(this.houseInfo=[]);if(this.lastRow!=t&&(this.lastRow=t,this.houseStutas.clear(),this.houseList.forEach(function(t){t.clearMysteryHouseInfo()})),this.doorBrick=o,0==this.houseInfo.length){this.houseInfo.push({type:0,subType:0});var n=this.doorBrick.getMapData().extraInfo;this.houseInfo.push({type:n.type,subType:n.subType}),n.nextType!=a.default.invalidValue&&n.nextSubType!=a.default.invalidValue&&this.houseInfo.push({type:n.nextType,subType:n.nextSubType})}var i=Math.abs(this.offsetIndex);this.gotoMysteryHouse(t,e,this.houseInfo[i].type,this.houseInfo[i].subType)},t.prototype.gotoMysteryHouse=function(t,e,o,i){var r=o;if(3==r?r=2:4==r&&2==i&&(r=5),this.curHouse=this.houseList.get(r.toString()),null!=this.curHouse){var a=n.NONE;this.houseStutas.has(this.offsetIndex)?a=this.houseStutas.get(this.offsetIndex):(a=e?n.RIGHT:n.LEFT,this.houseStutas.set(this.offsetIndex,a)),this.curHouse.showMysteryHouse(t-3,this.offsetIndex,l[r],this.mysteryHouseBg,{type:o,subType:i},i,a)}else this.isHouseErrorTag||(console.error("\u5c55\u793a\u4fa7\u9762\u623f\u95f4\u9519\u8bef......."),app.platformMgr.logEvent("showMysteryHouseError",{mapStyle:app.user.getMapStyleIndex(),offsetIndex:this.offsetIndex}),this.isHouseErrorTag=!0)},t.prototype.resetOffsetIndex=function(t){this.offsetIndex=this.offsetIndex+t,0==this.offsetIndex?(this.curHouse=null,this.houseInfo=[],c.default.isInHouse=!1):c.default.isInHouse=!0},t.prototype.hideMysteryHouse=function(){var t=this;null!=this.curHouse?this.houseList.forEach(function(e){e.getOffsetIndex()!=t.curHouse.getOffsetIndex()&&e.hideMysteryHouse()}):this.houseList.forEach(function(t){t.hideMysteryHouse()})},t.prototype.preLoadMysteryHouseData=function(){0==this.houseList.size&&(this.houseList.set("1",new i.default),this.houseList.set("2",new i.default),this.houseList.set("4",new i.default),this.houseList.set("5",new i.default));var t=1;this.houseList.forEach(function(e,o){e.init(Number(o)),e.preLoadMapDataByRes(l[o],function(){},t),t+=1}),this.preLoadMysteryHouseBg()},t.prototype.preLoadMysteryHouseBg=function(){var t=this;cc.loader.loadRes("prefabs/others/houseBg",cc.Prefab,function(e,o){t.mysteryHouseBg=cc.instantiate(o),t.houseList.forEach(function(t){t.initHouseBg(o,!1)})})},t.prototype.getOffsetIndex=function(){return this.offsetIndex},t.prototype.clearMysteryHouseInfo=function(){this.lastRow=-1},t.prototype.changeBoxToBlack=function(t){this.curHouse.changeBoxToBlack(t)},t.prototype.shareCutScreen=function(t,e){this.curHouse.shareCutScreen(t,e)},t.prototype.showShareScreen=function(t,e){this.curHouse.showShareScreen(t,e)},t.prototype.changeToMiddleStatus=function(){null==this.curHouse||this.houseInfo.length<=2||1!=this.curHouse.getHouseIndex()&&-1!=this.curHouse.getHouseIndex()||(this.curHouse.changeToMiddleStatus(),this.houseStutas.set(this.curHouse.getHouseIndex(),this.curHouse.getState()))},t.prototype.removeBrickByRowCol=function(t,e){null!=this.curHouse&&this.curHouse.removeBrickByRowCol(t,e)},t.prototype.getHouseState=function(){return null==this.curHouse?n.NONE:this.curHouse.getState()},t.prototype.cacheMysteryHoustRes=function(){var t=this.getRoleNearDoorBrick(30,!0);this.cacheMysteryHoustResByDoorBrick(t),t=this.getRoleNearDoorBrick(30,!1),this.cacheMysteryHoustResByDoorBrick(t)},t.prototype.cacheMysteryHoustResByDoorBrick=function(t){null!=t&&(4==t.getMapData().extraInfo.type&&s.default.cacheShareTropBrick(t.getRow(),t.getMapData().extraInfo.subType),4==t.getMapData().extraInfo.nextType&&t.getMapData().extraInfo.nextSubType!=a.default.invalidValue&&s.default.cacheShareTropBrick(t.getRow(),t.getMapData().extraInfo.nextSubType))},t.prototype.getRoleNearDoorBrick=function(t,e){for(var o=c.default.getRowColByPos(c.default.curRoleNode.position).row,n=o+t,i=o-t;i<n;i++){var s=r.default.getInstance().getBrickByRowCol(i,e?a.default.brickCol:0);if(null!=s&&s.getTypeId()==r.BRICKTYPE.DOORBRICK)return s}return null},t.prototype.getBrickByRowCol=function(t,e){return null==this.curHouse?null:this.curHouse.getBrickByRowCol(t,e)},t.instance=new t,t}();o.default=p,cc._RF.pop()},{"../logic/BrickMapDataHelper":"BrickMapDataHelper","../logic/Define":"Define","../logic/Global":"Global","../logic/MysteryHouse":"MysteryHouse","./BrickManager":"BrickManager"}],MysteryHouse:[function(t,e,o){"use strict";cc._RF.push(e,"62db3ShzGlG4J9lYLWuAtlq","MysteryHouse");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manager/BrickManager"),s=t("./Brick"),c=t("./Global"),l=t("./BrickMapDataHelper"),p=t("./elements/BoxBrick"),u=t("./Define"),h=t("../manager/MysteryHouseManager"),d=cc._decorator,f=d.ccclass,g=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapDataList=new Array,e.bricks=new Array,e.offsetRow=0,e.houseIndex=0,e.maxRow=11,e.mapDataHelper=null,e.isResetDataTag=!1,e.showStatus=!1,e.bgNode=null,e.boxBricks=[],e.extraInfo=null,e.type=0,e.subType=0,e.collectPropInfo=[],e.state=h.MYSTERUYHOUSE_STATUS.NONE,e.doorBrick=null,e.downY=0,e.upY=0,e}return i(e,t),e.prototype.init=function(t){this.type=t},e.prototype.showMysteryHouse=function(t,e,o,n,i,r,s){var c=this;if(t!=this.offsetRow&&(this.isResetDataTag=!0,this.collectPropInfo=[],null!=this.doorBrick&&(a.default.getInstance().putPool(this.doorBrick.getTypeId(),this.doorBrick.node),this.doorBrick.node.removeFromParent(),this.doorBrick=null)),this.state=s,this.subType=r,this.extraInfo=i,this.houseIndex=e,this.offsetRow=t,this.showStatus=!0,this.initHouseBg(n,!0),this.bricks.length>0)return this.resetBlockInfo(),void(this.isResetDataTag=!1);this.mapDataHelper.loadMapDataByRes(o,function(){c.mapDataList=c.mapDataHelper.getMapDatas();for(var t=0;t<c.mapDataList.length;t++)c.scheduleOnce(c.initMapTiledByRow.bind(c,t),.01*(t+2));c.isResetDataTag=!1})},e.prototype.hideMysteryHouse=function(){this.showStatus&&(this.showBlicks(!1),this.showStatus=!1)},e.prototype.showBlicks=function(t){for(var e=this.getHideBrickInfos(),o=0;o<this.maxRow;o++)if(null!=this.bricks[o])for(var n=0;n<this.bricks[o].length;n++){var i=this.bricks[o][n];null!=i&&(i.node.active=t,t&&(i.node.active=this.isCanShow(i.getRow(),i.getCol(),e)),i.getTypeId()==a.BRICKTYPE.PROPBRICK&&(i.node.active=this.isCanShow(i.getRow(),i.getCol(),this.collectPropInfo)))}},e.prototype.isCanShow=function(t,e,o){for(var n=0;n<o.length;n++)if(o[n].row==t&&o[n].col==e)return!1;return!0},e.prototype.preLoadMapDataByRes=function(t,e,o){var n=this;this.type==h.HOUSTTYPE.FROZEN?this.maxRow=11:this.type!=h.HOUSTTYPE.TURNTABLE&&this.type!=h.HOUSTTYPE.SHARETROPHY&&this.type!=h.HOUSTTYPE.COLLECT||(this.maxRow=15),this.mapDataHelper=new l.default(this.maxRow,0,0),this.scheduleOnce(function(){n.mapDataHelper.preLoadMapDataByRes(t,e)},o)},e.prototype.initMapTiledByRow=function(t){if(!(t>=this.mapDataList.length)){for(var e=0;e<this.mapDataList[t].length;e++){var o=this.mapDataList[t][e];this.createBrickByData(o)}this.downY=c.default.getBirckPos(0+this.offsetRow-2,1).y-.5*u.default.brickHeight-u.default.brickHeight,this.upY=c.default.getBirckPos(15+this.offsetRow-2,1).y-.5*u.default.brickHeight+u.default.brickHeight,t==this.mapDataList.length-1&&this.hanlderDoorBricks()}},e.prototype.createBrickByData=function(t,e){void 0===e&&(e=!1);var o=t.res;t.type==a.BRICKTYPE.SHAREBRICK&&(console.log("this.subType = "+this.subType),o=u.default.shareBrickResArr[this.subType]);var n=this.mapDataHelper.getCachePrefabByRes(o);if(null==n)return console.log("createBrickByData \u8d44\u6e90\u9519\u8bef ",o),null;var i=cc.instantiate(n);i.active=!0,i.opacity=255,i.name=t.row.toString()+","+t.col.toString(),t.type==a.BRICKTYPE.DOORBRICK?c.default.getNodeRootMaxLayer().addChild(i):c.default.getNodeRootByIndex(1).addChild(i),i.position=c.default.getBirckPos(t.row+this.offsetRow-2,t.col+14*this.houseIndex);var r=i.getComponent(s.default);return t.type!=a.BRICKTYPE.TURNTABLEBRICK&&t.type!=a.BRICKTYPE.FROZENBRICK||(t.extraInfo=this.extraInfo),r.initBrick(a.brickInfo[t.type],t),null==this.bricks[t.row]&&(this.bricks[t.row]=[]),t.type==a.BRICKTYPE.BOXBRICK&&this.boxBricks.push(r),e||(this.bricks[t.row][t.col]=r),r.setCollisionStatus(!0),r},e.prototype.resetBlockInfo=function(){this.showBlicks(!0),this.downY=c.default.getBirckPos(0+this.offsetRow-2,1).y-.5*u.default.brickHeight-u.default.brickHeight,this.upY=c.default.getBirckPos(15+this.offsetRow-2,1).y-.5*u.default.brickHeight+u.default.brickHeight;for(var t=0;t<this.maxRow;t++)if(null!=this.bricks[t])for(var e=0;e<=u.default.brickCol;e++){var o=this.bricks[t][e];if(null!=o)if(o.node.position=c.default.getBirckPos(o.getRow()+this.offsetRow-2,o.getCol()+14*this.houseIndex),o.getTypeId()==a.BRICKTYPE.BOXBRICK&&this.isResetDataTag)o.changeBoxToUnOpen();else if(o.getTypeId()==a.BRICKTYPE.TURNTABLEBRICK)o.resetTturntableBrick(this.extraInfo);else if(o.getTypeId()==a.BRICKTYPE.FROZENBRICK&&this.isResetDataTag)o.resetFrozenBrick(this.extraInfo);else if(o.getTypeId()==a.BRICKTYPE.SHAREBRICK){var n=o.getMapData();o.removeBrickSelf(),this.createBrickByData(n)}}},e.prototype.hanlderEvent=function(){this.houseIndex},e.prototype.getOffsetIndex=function(){return this.offsetRow},e.prototype.initHouseBg=function(t,e){if(null==this.bgNode){this.bgNode=cc.instantiate(t),c.default.getNodeRootByIndex(0).addChild(this.bgNode),this.bgNode.setSiblingIndex(0),this.bgNode.group=u.default.groupWall;for(var o=0;o<this.bgNode.children.length;o++)1==this.type?this.bgNode.children[o].getComponent(cc.Sprite).spriteFrame=c.default.houseBgFrame1:this.bgNode.children[o].getComponent(cc.Sprite).spriteFrame=c.default.houseBgFrame2}this.bgNode.active=e;var n=c.default.getBirckPos(this.offsetRow,0).y,i=756*this.houseIndex+.5*cc.winSize.width;this.bgNode.position=cc.v2(i,n+105)},e.prototype.clearMysteryHouseInfo=function(){this.offsetRow=-1,this.state=h.MYSTERUYHOUSE_STATUS.NONE},e.prototype.changeBoxToBlack=function(t){for(var e=0;e<this.boxBricks.length;e++)this.boxBricks[e].node.name==t.node.name||this.boxBricks[e].node.getComponent(p.default).changeToBlack()},e.prototype.shareCutScreen=function(){app.soundMgr.play(u.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.showShareScreen=function(){app.soundMgr.play(u.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.getHideBrickInfos=function(){var t=[];if(this.state==h.MYSTERUYHOUSE_STATUS.RIGHT)for(var e=4;e<=8;e++)t.push({row:e,col:0});else if(this.state==h.MYSTERUYHOUSE_STATUS.MIDDLE){for(e=4;e<=8;e++)t.push({row:e,col:0});for(e=4;e<=8;e++)t.push({row:e,col:u.default.brickCol})}else if(this.state==h.MYSTERUYHOUSE_STATUS.LEFT)for(e=4;e<=8;e++)t.push({row:e,col:u.default.brickCol});return t},e.prototype.hanlderDoorBricks=function(){for(var t=this.getHideBrickInfos(),e=-1,o=0;o<t.length;o++){var n=t[o].row,i=t[o].col;this.hideBrickByRowCol(n,i),e=i}return e},e.prototype.hideBrickByRowCol=function(t,e){if(null!=this.bricks[t]){var o=this.bricks[t][e];null!=o&&(o.node.active=!1)}},e.prototype.changeToMiddleStatus=function(){if(this.state!=h.MYSTERUYHOUSE_STATUS.MIDDLE){var t=this.state;this.state=h.MYSTERUYHOUSE_STATUS.MIDDLE,this.hanlderDoorBricks();var e=t==h.MYSTERUYHOUSE_STATUS.LEFT?0:u.default.brickCol,o=new a.MapData(5,e,a.BRICKTYPE.DOORBRICK,0,a.brickInfo[a.BRICKTYPE.DOORBRICK].res,null,null),n=this.createBrickByData(o,!0);null!=n&&(n.openDoor(),this.doorBrick=n)}},e.prototype.getState=function(){return this.state},e.prototype.getHouseIndex=function(){return this.houseIndex},e.prototype.removeBrickByRowCol=function(t,e){null!=this.bricks[t]&&null!=this.bricks[t][e]&&(this.bricks[t][e].node.active=!1,this.collectPropInfo.push({row:t,col:e}))},e.prototype.getBrickByRowCol=function(t,e){if(null==this.bricks[t])return null;var o=this.bricks[t][e];return null!=o&&o.node.active?o:null},r([f],e)}(cc.Component));o.default=g,cc._RF.pop()},{"../manager/BrickManager":"BrickManager","../manager/MysteryHouseManager":"MysteryHouseManager","./Brick":"Brick","./BrickMapDataHelper":"BrickMapDataHelper","./Define":"Define","./Global":"Global","./elements/BoxBrick":"BoxBrick"}],NeonLightBrick:[function(t,e,o){"use strict";cc._RF.push(e,"a79c8YN8gpJiI6eOJhtDxGm","NeonLightBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=-1,e.node_startBtn=null,e.sp_bg=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.state=-1,this.node_startBtn.y=-50,this.node.y+=5},e.prototype.changeState=function(){-1==this.state&&(this.state=0,this.node_startBtn.y=-50,this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(0,-68))))},e.prototype.share=function(){1!=this.state&&-1!=this.state&&(this.state=1,this.startBtnAction(),app.platformMgr.logEvent("headCamera",{from:"neonLihgtBrick"}))},e.prototype.startBtnAction=function(){var t=this;app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-50)),cc.callFunc(function(){t.shareScreen()})))},e.prototype.shareScreen=function(){app.soundMgr.play(s.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},e.prototype.preLoadShare=function(){cc.loader.loadRes("prefabs/share/ShareNeonLightSmall",function(){})},e.prototype.initOther=function(){var t=this;cc.loader.loadRes("textures/neonlightbgSmall",cc.SpriteFrame,function(e,o){e||(t.sp_bg.spriteFrame=o,t.preLoadShare())})},r([p(cc.Node)],e.prototype,"node_startBtn",void 0),r([p(cc.Sprite)],e.prototype,"sp_bg",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Brick":"Brick","../Define":"Define"}],NetHelper:[function(t,e){"use strict";cc._RF.push(e,"a6c1dkHnJVJeLnA6xsYehqq","NetHelper"),t("GameConfig");var o=t("md5"),n=window.GameName,i=window.GameVersion,r=window.KEYPART1,a=window.KEYPART2,s=window.KEYPART3,c=window.KEYPART4,l=window.BOT_URL,p=window.GAME_ID,u=window.SERVER_URL,h=window.AD_URL,d=!1,f=!1,g={},y=function(){function t(){}return t.sendErrorReport=function(t){try{if(g[t.message])return;g[t.message]=!0;var e={game:n,version:i,type:"code_error",msg:t.message+"\n"+t.stack,url:t.source,line:t.line,col:t.colno,error:t.stack},o=new XMLHttpRequest;o.open("POST","https://client-report.capjoy.com:1443/api/v1/logs/"),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(e)),console.log("sendReported",e)}catch(r){}},t.postToServer=function(t,e,o){void 0===o&&(o=function(){})},t.sendFriendsToBot=function(t,e){var n=r,i=a,p=s,u=c,h={action:"friends",playerId:t,payload:e},d=JSON.stringify(h),f={data:d,sign:o(d+n+i+p+u)};this.postToServer(l,f)},t.getRecommendGames=function(t,e){this.postToServer(h+"/fbapi/v1/getRecommendGames",t,e)},t.sendAd=function(t,e,o){this.postToServer(h+"/fbapi/v0/ads/report/"+t+"/"+o+"/"+e,{v:"1.0"})},t.getRanksInfo=function(t,e,o){var n={game_id:p,playerId:t,type:["Instant_games_rankInfo_all","Instant_games_rankInfo_week"],players:e};this.postToServer(h+"/fbapi/v0/get_rankInfo_"+p,n,o)},t.updateRanks=function(t,e,o,n){var i={game_id:p,playerId:t,type:e,rankInfo:JSON.stringify(o)};console.log("Sssss  updateRanksvvupdateRanksupdateRanks"),console.log(i),this.postToServer(h+"/fbapi/v0/update_rankInfo_"+p,i,n)},t.sendShare=function(t,e,o){if(t!=e){var n={playerId:t,sharePlayerId:e,type:o};this.postToServer(u+"/api/game/v0/shareUpdate_"+p,n)}},t.getShareCount=function(t,e,o){var n={playerId:t,type:e};this.postToServer(u+"/api/game/v0/shareGet_"+p,n,function(t){0==t.error?o(parseInt(t.data.count)):o(0)})},t.getFuntionOpen=function(t,e,o){if(f)o(d);else{var n={locale:cc.sys.language,nickname:t,timezoneOffset:(new Date).getTimezoneOffset(),playerId:e,appId:window.FB_APPID};this.postToServer(u+"/fbapi/v0/testCase_"+p,n,function(t){0==t.error?(d=1==parseInt(t.data),o(d)):o(!1),f=!0})}},t}();window.NetHelper=y,cc._RF.pop()},{GameConfig:"GameConfig",md5:"md5"}],NodePoolHelper:[function(t,e,o){"use strict";cc._RF.push(e,"13891cxAQVAdYM6qM26R4UY","NodePoolHelper");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,function(){function t(){this.bulletPool=new Map}return t.prototype.putPool=function(t){if(this.bulletPool.has(t.name))(e=this.bulletPool.get(t.name)).put(t);else{var e=new cc.NodePool;this.bulletPool.set(t.name,e),e.put(t)}},t.prototype.getPool=function(t){if(this.bulletPool.has(t)){var e=this.bulletPool.get(t);if(e.size()>0)return e.get()}return null},n([r],t)}());o.default=a,cc._RF.pop()},{}],PageMgr:[function(t,e){"use strict";cc._RF.push(e,"7ebf34+3GVJdagLUUzheWwf","PageMgr");var o={},n=0,i=null,r=null,a=0,s=null,c=null,l=function(){function t(t){this.getPageAsync=function(t,e){var n=this;return void 0===e&&(e=!1),new Promise(function(i,r){if(o[t])i(o[t]);else{var a=n.showLoading,s=n.hideLoading;e&&(a=function(t){t&&t()},s=function(t){t&&t()}),a(function(){cc.loader.loadRes("prefabs/pages/"+t,function(e,o){if(e)return s(),console.log("getPageAsync err",t),void r(e);var a=cc.instantiate(o);a.active=!1,cc.find("Canvas/pages").addChild(a),n.register(t,a),i(a),s()})})}})},this.showDialog=function(t,e){var s=this;void 0===e&&(e=null),console.log("showDialog==",t,e);var c=o[t];c?(c.active||(0==a&&(r.active=!0,r.zIndex=++n),a++),c.zIndex=++n,c.active=!0,c.getComponent(t)&&(r.color=c.getComponent(t).getMaskColor(),r.opacity=c.getComponent(t).getMaskOpacity(),c.getComponent(t).onUpdateData(e),c.getComponent(t).runShowActions(),i.platformMgr.logEvent("page_show",{name:t}))):this.getPageAsync(t).then(function(){s.showDialog(t,e)}).catch(function(t){console.log(t)})},i=t,(r=cc.find("Canvas/pages/dialogmask")).active=!1,(s=cc.find("Canvas/swallowEventNode")).children[1].runAction(cc.rotateBy(1,360).repeatForever()),s.active=!1,(c=cc.find("Canvas/nodeWhiteEffect")).active=!1}return t.prototype.register=function(t,e){o[t]=e},t.prototype.getPageByName=function(t){var e=o[t];return e?e.getComponent(t):null},t.prototype.showPage=function(t,e){var r=this;void 0===e&&(e=null),console.log("showPage==",t,e);var a=o[t];a?(this.hideAllPages(),a.zIndex=++n,a.active=!0,a.getComponent(t)&&(a.getComponent(t).onUpdateData(e),a.getComponent(t).onShow(),i.platformMgr.logEvent("page_show",{name:t}))):this.getPageAsync(t).then(function(){r.showPage(t,e)}).catch(function(t){console.log(t)})},t.prototype.hidePage=function(t){console.log("hidePage==",t),o[t]&&o[t].active&&(o[t].getComponent(t)&&o[t].getComponent(t).onHide(),o[t].active=!1)},t.prototype.hideDialog=function(t){console.log("hideDialog==",t),o[t]&&o[t].active&&(0==--a&&(a=0,r.active=!1),o[t].getComponent(t)?o[t].getComponent(t).runHideActions(function(){o[t].active=!1}):o[t].active=!1)},t.prototype.hideAllPages=function(){a=0,r.active=!1,Object.keys(o).forEach(function(t){o[t].active=!1})},t.prototype.showLoading=function(t){void 0===t&&(t=null),s.active=!0,t&&t()},t.prototype.hideLoading=function(t){void 0===t&&(t=null),s.active=!1,t&&t()},t.prototype.getMaskNode=function(){return r},t.prototype.whiteScreenEffect=function(t){c.active=!0,c.opacity=0,c.stopAllActions(),c.runAction(cc.sequence(cc.fadeIn(.15),cc.fadeOut(.15),cc.callFunc(function(){t(),c.active=!1})))},t.prototype.proLoadPage=function(t,e){var n=this;o[t]||cc.loader.loadRes("prefabs/pages/"+t,cc.Prefab,function(t,o){var i=cc.instantiate(o);i.active=!1,e.addChild(i),n.register(i.name,i)})},t}();window.PageMgr=l,cc._RF.pop()},{}],PauseDialog:[function(t,e,o){"use strict";cc._RF.push(e,"3fa39L4ablBCIer6vW2l2cq","PauseDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/EventMgr"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onUpdateData=function(){app.platformMgr.isInterstitialLoad()&&app.platformMgr.showInterstitialAd("pause",function(){})},e.prototype.onClickContinue=function(){app.soundMgr.playClick(),a.EVT.emit("GameCtrlPauseGame",!1),app.pageMgr.hideDialog("PauseDialog"),app.platformMgr.logButtonClickEvent("PauseDialog_continue")},e.prototype.onClickSetup=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("PauseDialog"),app.pageMgr.showDialog("SetupDialog",{from:"pause"}),app.platformMgr.logButtonClickEvent("PauseDialog_setup")},e.prototype.onClickHome=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("PauseDialog"),a.EVT.emit("GameMainPageUIShowStartUI",!0),a.EVT.emit("GameCtrlGotoHome"),app.platformMgr.logButtonClickEvent("PauseDialog_home")},r([c],e)}(BaseDialog));o.default=l,cc._RF.pop()},{"../common/EventMgr":"EventMgr"}],PlatHelper:[function(t,e){"use strict";cc._RF.push(e,"3828bnfFuBA8Yi+z0I2hbEK","PlatHelper");var o=function(){function t(){}return t.prototype.init=function(){},t.prototype.isInterstitialLoad=function(){return!1},t.prototype.showInterstitialAd=function(){},t.prototype.isVideoLoad=function(){return!1},t.prototype.showVideoAd=function(){},t.prototype.showBannerAd=function(){},t.prototype.hideBannerAd=function(){},t.prototype.autoShowAd=function(){},t.prototype.logEvent=function(){},t.prototype.getDataAsync=function(){return Promise.resolve()},t.prototype.setDataAsync=function(){return Promise.resolve()},t.prototype.subscribeBotAsync=function(){return Promise.resolve()},t.prototype.createShortcutAsync=function(){return Promise.resolve()},t.prototype.getContextID=function(){return null},t.prototype.getContextPlayers=function(t){t([])},t.prototype.getPlayerID=function(){return"playerid001"},t.prototype.getPlayerName=function(){return"player name"},t.prototype.getPlayerPhoto=function(){return"https://scontent-lax3-1.xx.fbcdn.net/v/t1.0-1/p160x160/29694551_1392338657579558_8551621839372184686_n.jpg?_nc_cat=103&_nc_ohc=GQIXzaUi5BkAQnGTtiUq5QI3vaVSp1NLbEQN27VJJuOpM0vjZv2AEy3NA&_nc_ht=scontent-lax3-1.xx&oh=9384def90b7d77f8906b7e2001bbb4f2&oe=5E73F348"},t.prototype.getConnectedPlayersAsync=function(){return Promise.resolve([])},t.prototype.isPayReady=function(){return!0},t.prototype.getPrice=function(t,e){return e},t.prototype.purchase=function(t,e){e()},t.prototype.chooseFriends=function(t,e){e&&e()},t.prototype.playWithFriend=function(t,e,o){o&&o()},t.prototype.playWithGroup=function(t,e,o){o&&o()},t.prototype.sendMessageToFriend=function(t,e){e&&e()},t.prototype.shareGame=function(t,e){e&&e()},t.prototype.setRankScore=function(){},t.prototype.getRankList=function(t,e,o,n,i){for(var r=[],a=1;a<=e;a++)o++,r.push({playerId:a+"id",photo:null,nickName:"name"+a,rank:o,fbRank:a,score:a,customData:"",isFriends:i});n(r)},t.prototype.postSessionScore=function(){},t.prototype.matchPlayerAsync=function(t,e,o){return void 0===e&&(e=!0),void 0===o&&(o=!0),new Promise(function(t){t()})},t}();window.PlatHelper=o,cc._RF.pop()},{}],PlatfomMgr:[function(t,e){"use strict";var o;cc._RF.push(e,"9ba2chSGXpNcbwcpvilwX7X","PlatfomMgr"),function(t){t[t.FBINSTANT=1]="FBINSTANT",t[t.WXINSTANT=2]="WXINSTANT",t[t.NATIVE=3]="NATIVE",t[t.WEB=4]="WEB",t[t.DEBUG=5]="DEBUG"}(o||(o={}));var n=function(){function t(t){this.isWX=!1,this.isFB=!1,this.app=t,this.platform=cc.sys.isNative?o.NATIVE:this.platform,this.platform=cc.sys.isBrowser?o.WEB:this.platform,this.platform=window.FBInstant?o.FBINSTANT:this.platform,this.platform=window.wx?o.WXINSTANT:this.platform,this.isWX=this.platform==o.WXINSTANT,this.isFB=this.platform==o.FBINSTANT,this.isWX?this.platHelper=new WXHelper:this.isFB?this.platHelper=new FBHelper:this.platHelper=new DefaultHelper}return t.prototype.init=function(){this.platHelper.init()},t.prototype.isInterstitialLoad=function(){return!app.user.isAdRemoved()&&this.platHelper.isInterstitialLoad()},t.prototype.showInterstitialAd=function(t,e){void 0===e&&(e=function(){}),this.platHelper.showInterstitialAd(t,e)},t.prototype.isVideoLoad=function(){return this.platHelper.isVideoLoad()},t.prototype.showVideoAd=function(t,e){void 0===e&&(e=function(){}),this.platHelper.showVideoAd(t,e)},t.prototype.showBannerAd=function(){this.platHelper.showBannerAd()},t.prototype.hideBannerAd=function(){this.platHelper.hideBannerAd()},t.prototype.autoShowAd=function(t,e){app.user.isAdRemoved()||this.platHelper.autoShowAd(t,e)},t.prototype.logEvent=function(t,e,o){void 0===e&&(e={}),void 0===o&&(o=1)},t.prototype.logButtonClickEvent=function(){},t.prototype.getDataAsync=function(t){return this.platHelper.getDataAsync(t)},t.prototype.setDataAsync=function(t,e){return this.platHelper.setDataAsync(t,e)},t.prototype.subscribeBotAsync=function(){return this.platHelper.subscribeBotAsync()},t.prototype.createShortcutAsync=function(){return app.user.shotcutCreated?Promise.resolve():this.platHelper.createShortcutAsync()},t.prototype.getContextID=function(){return this.platHelper.getContextID()},t.prototype.getContextPlayers=function(t){this.platHelper.getContextPlayers(t)},t.prototype.getPlayerID=function(){return this.platHelper.getPlayerID()},t.prototype.getPlayerName=function(){return this.platHelper.getPlayerName()},t.prototype.getPlayerPhoto=function(){return this.platHelper.getPlayerPhoto()},t.prototype.getConnectedPlayersAsync=function(){return this.platHelper.getConnectedPlayersAsync()},t.prototype.isPayReady=function(){return this.platHelper.isPayReady()},t.prototype.getPrice=function(t,e){return this.platHelper.getPrice(t,e)},t.prototype.purchase=function(t,e,o){this.platHelper.purchase(t,e,o)},t.prototype.chooseFriends=function(t,e){app.stopContextTick(),this.platHelper.chooseFriends(t,e)},t.prototype.playWithFriend=function(t,e,o){app.stopContextTick(),this.platHelper.playWithFriend(t,e,o)},t.prototype.playWithGroup=function(t,e,o){app.stopContextTick(),this.platHelper.playWithGroup(t,e,o)},t.prototype.sendMessageToFriend=function(t,e){this.platHelper.sendMessageToFriend(t,e)},t.prototype.shareGame=function(t,e){void 0===e&&(e=function(){}),this.platHelper.shareGame(t,e)},t.prototype.setRankScore=function(t,e,o,n){this.platHelper.setRankScore(t,e,o,n)},t.prototype.getRankList=function(t,e,o,n,i){this.platHelper.getRankList(t,e,o,n,i)},t.prototype.postSessionScore=function(t){this.platHelper.postSessionScore(t)},t.prototype.matchPlayerAsync=function(t,e,o){return void 0===t&&(t="default"),void 0===e&&(e=!0),void 0===o&&(o=!0),this.platHelper.matchPlayerAsync(t,e,o)},t}();window.PlatfromMgr=n,cc._RF.pop()},{}],PointMoveHelper:[function(t,e,o){"use strict";cc._RF.push(e,"fca05s2iVtF3pG5kQy3ejMk","PointMoveHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Define"),s=t("../manager/BrickManager"),c=t("../manager/EffectManager"),l=t("../../common/EventMgr"),p=t("./Global"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.points=[],e.speeds=[],e.delayTime=0,e.easeAction=0,e.lastPoint=cc.Vec2.ZERO,e.actions=[],e.changeDirCallBack=null,e.isPauseTag=!1,e.offsetX=0,e.offsetY=0,e.curIndex=0,e}return i(e,t),e.prototype.initMoveHelper=function(t,e,o,n){if(void 0===e&&(e=0),void 0===o&&(o=0),void 0===n&&(n=s.BRICKTYPE.NONE),null!=t){this.offsetX=e,this.offsetY=o;var i=t.points;if(this.delayTime=0,this.easeAction=0,this.speeds=[],this.points=[],this.actions=[],n==s.BRICKTYPE.MOVEBRICK||n==s.BRICKTYPE.POPUPBRICK)return this.delayTime=t.delayTime,this.easeAction=t.easeAction,void this.initMoveingBrickPoints(i,t.speed);if(n!=s.BRICKTYPE.MOVE_HURT_BRICK)return this.delayTime=t.delayTime,void this.initMonsterMovePoints(i,t.speed);this.delayTime=t.delayTime,this.easeAction=t.easeAction,this.initMoveingHurtBrickPoints(i,t.speed)}},e.prototype.initMoveingHurtBrickPoints=function(t,e){var o=this;this.node.x=this.node.x+this.offsetX,this.node.y=this.node.y+this.offsetY;for(var n=[],i=0;i<t.length;i++)n.push(cc.v2(t[i].x,t[i].y));if(2==n.length)for(i=n.length-1;i>=0;i--){if(0==i){var r=n[i].x,a=n[i].y;this.points.push(cc.v2(r,a))}else r=n[i].x,a=n[i].y,this.points.push(cc.v2(r,a));this.speeds.push(e)}else if(n.length>2){var s=0,c=0;for(i=0;i<n.length;i++)n[i].y>s&&(s=n[i].y),n[i].x>c&&(c=n[i].x);for(i=0;i<n.length;i++)n[i].y>=s?n[i].y-=8:n[i].y+=8,n[i].x>=c?n[i].x-=8:n[i].x+=8;var l=n[0].sub(n[1]).mag(),p=e/l;for(this.speeds.push(e),i=1;i<n.length;i++){var u=n[i].x,h=n[i].y;if(this.points.push(cc.v2(u,h)),i>1){var d=n[i].sub(n[i-1]).mag();this.speeds.push(p*d)}}r=n[0].x,a=n[0].y,this.points.push(cc.v2(r,a)),l=this.points[this.points.length-1].sub(this.points[this.points.length-2]).mag(),this.speeds.push(p*l)}for(this.changeDir(0),i=0;i<this.points.length;i++){var f=this.points[i].addSelf(cc.v2(this.offsetX,this.offsetY)),g=i+1>=this.points.length?0:i+1,y=null;0==this.easeAction?y=cc.moveTo(.2*this.speeds[i],f):1==this.easeAction&&(y=cc.moveTo(.2*this.speeds[i],f).easing(cc.easeIn(10))),this.actions.push(cc.sequence(y,cc.delayTime(this.delayTime),cc.callFunc(function(t,e){o.changeDir(e)},f,g)))}this.node.position=this.points[this.points.length-1],this.lastPoint=this.node.position,this.node.stopAllActions(),this.node.runAction(cc.sequence(this.actions).repeatForever())},e.prototype.initMoveingBrickPoints=function(t,e){var o=this;this.node.x=this.node.x+this.offsetX,this.node.y=this.node.y+this.offsetY;var n=t;if(2==n.length)for(var i=n.length-1;i>=0;i--){if(0==i){var r=n[i].x+.5*a.default.brickWidth,s=n[i].y+.5*a.default.brickHeight;this.points.push(cc.v2(r,s))}else r=n[i].x+.5*a.default.brickWidth,s=n[i].y+.5*a.default.brickHeight,this.points.push(cc.v2(r,s));this.speeds.push(e)}else if(n.length>2){var c=this.node.position.sub(n[1]).mag(),l=e/c;for(this.speeds.push(e),i=1;i<n.length;i++)if(r=n[i].x+.5*a.default.brickWidth,s=n[i].y+.5*a.default.brickHeight,this.points.push(cc.v2(r,s)),i>1){var p=n[i].sub(n[i-1]).mag();this.speeds.push(l*p)}c=this.points[this.points.length-1].sub(this.points[this.points.length-2]).mag(),this.speeds.push(l*c)}for(this.changeDir(0),i=0;i<this.points.length;i++){var u=this.points[i].addSelf(cc.v2(this.offsetX,this.offsetY)),h=i,d=null;0==this.easeAction?d=cc.moveTo(.2*this.speeds[i],u):1==this.easeAction&&(d=cc.moveTo(.2*this.speeds[i],u).easing(cc.easeIn(10))),this.actions.push(cc.sequence(d,cc.callFunc(this.showEaseEffect.bind(this,i)),cc.delayTime(this.delayTime),cc.callFunc(function(t,e){o.changeDir(e)},u,h)))}this.curIndex=this.points.length-1,this.node.position=this.points[this.curIndex],this.lastPoint=this.node.position,this.node.stopAllActions(),this.node.runAction(cc.sequence(this.actions).repeatForever())},e.prototype.initMonsterMovePoints=function(t,e){var o=this,n=(this.node.width,this.node.height,t);if(2==n.length)for(var i=n.length-1;i>=0;i--){if(0==i){var r=n[i].x+this.offsetX,a=n[i].y+this.offsetY;this.points.push(cc.v2(r,a))}else r=n[i].x+this.offsetX,a=n[i].y+this.offsetY,this.points.push(cc.v2(r,a));this.speeds.push(e)}else if(n.length>2){var s=this.node.position.sub(n[1]).mag(),c=e/s;for(this.speeds.push(e),i=1;i<n.length;i++)if(r=n[i].x+this.offsetX,a=n[i].y+this.offsetY,this.points.push(cc.v2(r,a)),i>1){var l=n[i].sub(n[i-1]).mag();this.speeds.push(c*l)}this.points.push(cc.v2(this.node.x,this.node.y)),s=this.points[this.points.length-1].sub(this.points[this.points.length-2]).mag(),this.speeds.push(c*s)}for(this.lastPoint=this.node.position,this.changeDir(0),i=0;i<this.points.length;i++){var p=this.points[i].addSelf(cc.v2(this.offsetX,this.offsetY)),u=i+1>=this.points.length?0:i+1;this.actions.push(cc.sequence(cc.moveTo(.2*this.speeds[i],p),cc.callFunc(function(t,e){o.changeDir(e)},p,u)))}this.node.position=this.points[this.points.length-1],this.node.stopAllActions(),this.node.runAction(cc.sequence(this.actions).repeatForever())},e.prototype.changeDir=function(t){if(this.lastPoint.x!=this.points[t].x){var e=-1;this.lastPoint.x<this.points[t].x&&(e=1),null!=this.changeDirCallBack&&this.changeDirCallBack(cc.v2(e,0))}this.curIndex=t,this.lastPoint=this.points[t]},e.prototype.showEaseEffect=function(){if(this.easeAction){var t=Math.abs(this.lastPoint.x-this.node.x),e=Math.abs(this.lastPoint.y-this.node.y),o=p.default.getRowColByPos(this.node.position);if(s.default.getInstance().isDisplayedOnScreenByRow(o.row)&&l.EVT.emit("GameCtrlShakeScreen"),t>e)if(this.lastPoint.x<this.node.x){console.log("\u53f3");var n=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(.5*this.node.width,-.1*this.node.height),1,1,null,this.node),i=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(.5*this.node.width,.1*this.node.height),1,1,null,this.node);this.clearEffectNode(n),this.clearEffectNode(i),n.angle=-90,i.angle=-90,i.scaleX=-3}else console.log("\u5de6"),n=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(-.5*this.node.width,.1*this.node.height),1,1,null,this.node),i=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(-.5*this.node.width,-.1*this.node.height),1,1,null,this.node),this.clearEffectNode(n),this.clearEffectNode(i),n.angle=90,i.angle=90,i.scaleX=-3;else if(this.lastPoint.y>this.node.y){console.log("\u4e0b");var r=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(.1*this.node.width,-.5*this.node.height),1,1,null,this.node),u=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(-.1*this.node.width,-.5*this.node.height),1,1,null,this.node);this.clearEffectNode(u),this.clearEffectNode(r),u.scaleX=-3}else{console.log("\u4e0a");var h=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(.1*this.node.width,.5*this.node.height),1,1,null,this.node),d=c.default.getInstance().showEffect(a.default.effectMoveDropEase,cc.v2(-.1*this.node.width,.5*this.node.height),1,1,null,this.node);this.clearEffectNode(h),this.clearEffectNode(d),d.scaleX=-3,h.scaleY=-3,d.scaleY=-3}}},e.prototype.clearEffectNode=function(t){t.scale=3,t.angle=0},e.prototype.setChangeDirCallBack=function(t){this.changeDirCallBack=t},e.prototype.reset=function(){this.lastPoint=this.node.position,this.node.position=this.points[this.points.length-1],this.node.stopAllActions(),this.actions.length>0&&(this.node.runAction(cc.sequence(this.actions).repeatForever()),this.changeDir(0))},e.prototype.pause=function(t){this.isPauseTag!=t&&(this.isPauseTag=t,this.isPauseTag?this.node.pauseAllActions():this.node.resumeAllActions())},e.prototype.getPoints=function(){return this.points},e.prototype.getSpeeds=function(){return this.speeds},e.prototype.getDelayTime=function(){return this.delayTime},e.prototype.getEaseAction=function(){return this.easeAction},r([h],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../manager/BrickManager":"BrickManager","../manager/EffectManager":"EffectManager","./Define":"Define","./Global":"Global"}],PopupBrick:[function(t,e,o){"use strict";cc._RF.push(e,"d810bZ4309El7BwcOmWmuBw","PopupBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Global"),c=t("../Role"),l=t("../PointMoveHelper"),p=t("../Define"),u=t("../../manager/BrickManager"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.armature=null,e.armatureRoot=null,e.popupNode=null,e.angle=0,e.speed=0,e.duringTme=0,e.rotationSpeed=0,e.pointMoveHelper=null,e.offsetX=0,e.offsetY=0,e.isCanFire=!1,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.angle=this.mapData.extraInfo.popupInfo.angle,this.speed=this.mapData.extraInfo.popupInfo.speed,this.duringTme=this.mapData.extraInfo.popupInfo.time,this.rotationSpeed=this.mapData.extraInfo.popupInfo.rotationSpeed,this.armatureRoot.angle=this.angle,this.isCanFire=!1,this.node.x+=this.mapData.extraInfo.popupInfo.offsetX,null!=o.extraInfo&&null!=o.extraInfo.pointInfo&&(this.pointMoveHelper=this.node.addComponent(l.default),this.offsetX=.5*(this.node.width-p.default.brickWidth)-5,this.offsetY=.5*(this.node.height-p.default.brickHeight),this.pointMoveHelper.initMoveHelper(o.extraInfo.pointInfo,this.offsetX,this.offsetY,u.BRICKTYPE.POPUPBRICK)),this.isPauseTag=!1,this.collider.enabled=!0,this.pause(!0)},e.prototype.setPopupNode=function(t){this.popupNode=t,this.popupNode.position=cc.v2(this.node.x-.5*this.popupNode.width,this.node.y-.5*this.popupNode.height),this.armature.playAnimation("in",1),this.isCanFire=!0},e.prototype.fire=function(){this.isCanFire&&(this.isCanFire=!1,this.armature.playAnimation("out",1),this.popupNode.position=cc.v2(this.node.x-.5*this.popupNode.width,this.node.y-.5*this.popupNode.height),this.popupNode.getComponent(c.default).popup(s.default.degreesToVector(-1*this.armatureRoot.angle).normalizeSelf(),this.duringTme,this.speed))},e.prototype.update=function(){this.isPauseTag||(this.armatureRoot.angle+=.02*this.rotationSpeed)},e.prototype.pause=function(t){this.isPauseTag!=t&&(this.isPauseTag=t,null!=this.pointMoveHelper&&this.pointMoveHelper.pause(t))},e.prototype.resetBrick=function(){null!=this.pointMoveHelper&&(this.node.position=s.default.getBirckPos(this.mapData.row,this.mapData.col),this.node.x+=this.offsetX,this.node.y+=this.offsetY,this.pointMoveHelper.reset())},e.prototype.removeBrickSelf=function(){this.node.stopAllActions(),null!=this.pointMoveHelper&&(this.pointMoveHelper.destroy(),this.pointMoveHelper=null),t.prototype.removeBrickSelf.call(this)},e.prototype.changeToWork=function(){this.pause(!1),t.prototype.changeToWork.call(this)},e.prototype.setCollisionStatus=function(){},r([f(dragonBones.ArmatureDisplay)],e.prototype,"armature",void 0),r([f(cc.Node)],e.prototype,"armatureRoot",void 0),r([d],e)}(a.default);o.default=g,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../Brick":"Brick","../Define":"Define","../Global":"Global","../PointMoveHelper":"PointMoveHelper","../Role":"Role"}],PopupHelper:[function(t,e,o){"use strict";cc._RF.push(e,"61226SA6YRPyZb60A5OYsXk","PopupHelper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupDir=cc.Vec2.ZERO,e.popupTime=0,e.popupSpeed=0,e.callBack=null,e.tempDt=.02,e}return i(e,t),e.prototype.update=function(t){this.updatePopup(t)},e.prototype.initPopup=function(t,e,o,n){this.popupDir=t,this.popupTime=e,this.popupSpeed=o,this.callBack=n},e.prototype.updatePopup=function(){this.node.x+=this.popupDir.x*this.tempDt*this.popupSpeed,this.node.y+=this.popupDir.y*this.tempDt*this.popupSpeed,this.popupTime-=this.tempDt,this.popupTime<=0&&null!=this.callBack&&this.callBack()},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ProjectStarter:[function(t,e,o){"use strict";cc._RF.push(e,"1fb163150ZKsY+iThYiRiFa","ProjectStarter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./GameConstant"),s=t("./common/EventMgr"),c=t("./pages/widget/RankDataMgr"),l=t("./game/logic/Global"),p=t("./game/manager/BrickManager"),u=t("./pages/LoadingDialog"),h=cc._decorator,d=h.ccclass,f=h.property;window.addEventListener&&window.addEventListener("error",function(t){window.FBInstant&&NetHelper.sendErrorReport({message:t.message,source:t.filename,stack:t.error&&t.error.stack,line:t.lineno,colno:t.colno})}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contextId=null,e.pages=null,e.tipsNode=null,e.bgNode=null,e.cutScreenCameraNode=null,e.cacheMapId=-1,e.loading=null,e.testBtns=null,e.prompt=null,e.isTestMap=!1,e}i(e,t),e.prototype.start=function(){l.default.pages=this.pages,l.default.cutScreenCamera=this.cutScreenCameraNode,this.app=window.app=new App,this.app.init(),window.lastScore=this.app.user.getMaxScore(),this.tipsNode.active=!1,s.EVT.on("showTips",this.showTips,this),s.EVT.on("showPrompt",this.showPromt,this),s.EVT.on("levelLoadFinish",this.levelLoadFinish,this)},e.prototype.preStartGame=function(t){console.log("preStartGame"),cc.sys.os==cc.sys.OS_IOS&&app.soundMgr.play("btn_click",!0,0),this.node.addComponent(p.default),t&&t()},e.prototype.entryGame=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),console.log("entryGame",t);var o=this.app.user,n=this.app.platformMgr;n.init();var i=app.platformMgr.getPlayerID();i=i.substring(i.length-2);var r=Number(i);window.packageType=r<50?a.PackageType.A:a.PackageType.B;var s="default";t&&(s=t.from||t.type||s),n.logEvent("entry_game",{from:s,index:o.getVersion(),days:o.getLoginDayCount(),isNew:o.isNewUser()?"new":"old"});var c=0;setInterval(function(){c++,n.logEvent("online_time",{time:c},c)},6e4),n.subscribeBotAsync().then(function(){n.createShortcutAsync()}),app.soundMgr.playMusic(),!t||t.type!=a.EntryType.VS_START&&t.type!=a.EntryType.VS_RESULT||app.pageMgr.getPageAsync("ResultPage").then(function(e){e.getComponent("ResultPage").entryData=t}),this.isTestMap?this.testBtns.active=!0:(this.loading.getComponent(u.default).preLoad(),this.loading.active=!0,this.bgNode.active=!1)},e.prototype.setPush=function(){var t=this.app.platformMgr,e=this.app.user,o={};o.nickname=t.getPlayerName(),o.playerInfo={head:t.getPlayerPhoto(),score:e.getMaxScore()};var n={target:[],tpl:[{bg:"head_"+t.getPlayerID(),t:t.getPlayerName()+" has joined the game!",tm:0,bts:[{t:"CHALLENGE",u:"game_play",pld:{type:"friendjoin"}}]}]};if(e.isNewUser())o.newFriend=n,t.getConnectedPlayersAsync().then(function(e){for(var i=0;i<e.length&&(console.log("players",i),console.log("players id",e[i].getID()),e[i].getID()!=t.getPlayerID()&&n.target.push(e[i].getID()),!(i>10));i++);console.log("setSessionData",o);try{window.FBInstant.setSessionData(o)}catch(r){}});else{console.log("setSessionData",o);try{window.FBInstant.setSessionData(o)}catch(i){}}},e.prototype.onPlatInit=function(){var t=this;this.app.user.loadDataAsync().then(function(){t.preLoadSounds(function(){t.preLoadPages(function(){t.preStartGame(function(){t.startGame()})})})})},e.prototype.update=function(){this.app.platformMgr.isFB?window.FBINIT&&(this.enabled=!1,this.onPlatInit()):(this.enabled=!1,this.onPlatInit())},e.prototype.startGame=function(){var t=this;if(this.app.platformMgr.isFB){var e=window.FBInstant;e.setLoadingProgress(100),e.startGameAsync().then(function(){var o=e.context.getID(),n=e.context.getType(),i=(e.player.getName(),e.player.getID()),r=e.getEntryPointData(),a=app.platformMgr,s=app.user.isNewUser();if(s&&null==o&&app.platformMgr.postSessionScore(1),e.getEntryPointAsync().then(function(t){a.logEvent(s?"NewEntry":"ActiveEntry",{ContextType:n,EntryPoint:t}),"THREAD"!=n||"feed"!=t&&"facebook_gaming_tab"!=t&&"in_game_menu"!=t&&"bookmark"!=t||app.platformMgr.getContextPlayers(function(e){console.log("getContextPlayers count",e.length),0==e.length||r&&r.switchGameInfo?app.isInTournament=!1:(app.isInTournament=!0,a.logEvent("tournament_entry",{isNew:s?"NewEntry":"ActiveEntry",entrypoint:t,playerCount:e.length}))})}),t.entryGame(r,"SOLO"!=n),e.onPause(function(){}),t.tickContextChange(),r&&(r.switchGameInfo&&NetHelper.sendAd(r.switchGameInfo.appId,i,window.FB_APPID),r.shareType&&NetHelper.sendShare(i,r.playerId,r.shareType)),t.app.user.canDailyDateSend()){var l=[],p=t.app.platformMgr;console.log("getConnectedPlayersAsync!"),p.getConnectedPlayersAsync().then(function(t){for(var e=0;e<t.length;e++)console.log("players",e),console.log("players id",t[e].getID()),t[e].getID()!=p.getPlayerID()&&l.push(t[e].getID());console.log("sendFriendsToBot!",t.length,i,l),t.length>0&&NetHelper.sendFriendsToBot(i,l)})}c.rankDataMgr.getRankDatas()}).catch(function(t){console.log(t)})}else this.entryGame()},e.prototype.preLoadDatas=function(t){console.log("preLoadDatas"),cc.loader.loadResDir("configs/",function(e,o,n){for(var i=0;i<o.length;i++)app.cfgs[n[i].substring(8)]=o[i].json;t()})},e.prototype.preLoadSounds=function(t){console.log("preLoadSounds");var e=[];0==e.length&&t();for(var o=0,n=this.app.soundMgr,i=0;i<e.length;i++)n.preLoad(e[i],function(){++o==e.length&&t()})},e.prototype.preLoadPages=function(t){var e=this;console.log("preLoadPages");var o=this.app.pageMgr;cc.loader.loadResDir("prefabs/preload",function(n,i){for(var r=0;r<i.length;r++){var a=cc.instantiate(i[r]);a.active=!1,e.pages.addChild(a),o.register(a.name,a)}t()})},e.prototype.tickContextChange=function(){var t=this,e=window.FBInstant;setInterval(function(){if(t.contextId!=e.context.getID()){t.contextId=e.context.getID(),"GROUP"==e.context.getType()&&app.user.addGroupId(t.contextId),app.platformMgr.getContextPlayers(function(e){e.length>=3&&app.user.addGroupId(t.contextId)}),app.user.resetSessionScore();var o=window.contextual_rank_name+"."+t.contextId,n=function(){console.log("updateAsync LEADERBOARD"),e.updateAsync({action:"LEADERBOARD",name:o})};console.log("tickContextChange",t.contextId),e.getLeaderboardAsync(o).then(function(t){return t.setScoreAsync(window.lastScore,"")}).then(function(){return[n()]}).catch(n)}},16)},e.prototype.showTips=function(t){var e=this;null!=t&&(this.tipsNode.active=t.isShow,t.isShow&&(this.tipsNode.children[0].getComponent(cc.Label).string=t.tips,void 0!==t.duringTime&&this.scheduleOnce(function(){e.tipsNode.active=!1},t.duringTime)))},e.prototype.levelLoadFinish=function(){},e.prototype.onClickTestSelectMapStyle=function(t,e){this.testBtns.active=!1,this.loading.getComponent(u.default).preLoad(e),this.loading.active=!0,this.bgNode.active=!1},e.prototype.showPromt=function(t){var e=this;this.prompt.scaleY=0,this.prompt.active=!0,this.prompt.stopAllActions(),this.prompt.children[0].getComponent(cc.Label).string=t,this.prompt.runAction(cc.sequence(cc.scaleTo(.3,1,1),cc.delayTime(1),cc.scaleTo(.3,1,0),cc.callFunc(function(){e.prompt.active=!1})))},r([f(cc.Node)],e.prototype,"pages",void 0),r([f(cc.Node)],e.prototype,"tipsNode",void 0),r([f(cc.Node)],e.prototype,"bgNode",void 0),r([f(cc.Node)],e.prototype,"cutScreenCameraNode",void 0),r([f(cc.Node)],e.prototype,"loading",void 0),r([f(cc.Node)],e.prototype,"testBtns",void 0),r([f(cc.Node)],e.prototype,"prompt",void 0),r([f],e.prototype,"isTestMap",void 0),e=r([d],e)}(cc.Component),cc._RF.pop()},{"./GameConstant":"GameConstant","./common/EventMgr":"EventMgr","./game/logic/Global":"Global","./game/manager/BrickManager":"BrickManager","./pages/LoadingDialog":"LoadingDialog","./pages/widget/RankDataMgr":"RankDataMgr"}],Queue:[function(t,e,o){"use strict";cc._RF.push(e,"1a758jQFeZK7qCP3MYL9jIO","Queue"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.tasks=[]}return t.prototype.add=function(t){this.tasks.push(t)},t.prototype.start=function(t){this.next(t)},t.prototype.next=function(t){var e=this;this.tasks.length>0?this.tasks.shift()(function(){setTimeout(function(){e.next(t)},0)}):t()},t}();o.default=n,cc._RF.pop()},{}],RandomDirMoveBrick:[function(t,e,o){"use strict";cc._RF.push(e,"1dac7CztENJQarmsSpWYMi5","RandomDirMoveBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MovingBrick"),s=t("../Global"),c=t("../Loop"),l=t("../Define"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.movingBrickHelper=null,e.animLoop=null,e.node_dirs=null,e.points=[],e.curIndex=0,e.lastIndex=0,e.time=0,e.sizeInfo={165:108,166:162},e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),null!=this.movingBrickHelper&&(this.movingBrickHelper.destroy(),this.movingBrickHelper=null);var n=this.node.position.sub(this.pointMoveHelper.getPoints()[1]).mag();this.time=this.mapData.extraInfo.speed/n,this.pointMoveHelper.getPoints().length>2&&this.initMovingHelper(o.extraInfo.moveType)},e.prototype.resetBrick=function(){t.prototype.resetBrick.call(this),this.setFollowNode(null),this.initMovingHelper(this.mapData.extraInfo.moveType)},e.prototype.changeStyle=function(){this.icon.node.width=this.sizeInfo[this.mapData.gid],this.icon.node.height=this.sizeInfo[this.mapData.gid],this.node.width=this.icon.node.width,this.node.height=this.icon.node.height,this.node_dirs.scale=this.node.width/108,this.animLoop.node.scale=this.node.width/108,this.node.getComponent(cc.BoxCollider).size.width=this.node.width,this.node.getComponent(cc.BoxCollider).size.height=this.node.height},e.prototype.initMovingHelper=function(t){this.typeId=t,this.points=this.pointMoveHelper.getPoints(),this.curIndex=this.points.length-1,this.node.stopAllActions(),this.randomMoveDir()},e.prototype.move=function(){var t=this,e=null,o=this.node.position.sub(this.points[this.curIndex]).mag(),n=this.time*o;0==this.pointMoveHelper.getEaseAction()?e=cc.moveTo(.2*n,this.points[this.curIndex]):1==this.pointMoveHelper.getEaseAction()&&(e=cc.moveTo(.2*n,this.points[this.curIndex]).easing(cc.easeIn(10))),this.node.stopAllActions(),this.node.runAction(cc.sequence(e,cc.callFunc(function(){t.randomMoveDir()})))},e.prototype.randomMoveDir=function(){for(var t=this,e=0;e<this.node_dirs.childrenCount;e++)this.node_dirs.children[e].active=!1;this.animLoop.node.active=!0;var o=-1;1==s.default.getRandom(0,2)&&(o=1),o=1,this.lastIndex=this.curIndex,this.curIndex=this.curIndex+o,this.curIndex=this.curIndex>=this.points.length?0:this.curIndex,this.curIndex=this.curIndex<0?this.points.length-1:this.curIndex;var n=this.points[this.lastIndex],i=this.points[this.curIndex];this.node.runAction(cc.sequence(cc.delayTime(this.pointMoveHelper.getDelayTime()),cc.callFunc(function(){Math.abs(n.x-i.x)<Math.abs(n.y-i.y)?n.y>i.y?(console.log("\u5411\u4e0b\u79fb\u52a8"),t.showDir(l.DIR.DOWN)):(console.log("\u5411\u4e0a\u79fb\u52a8"),t.showDir(l.DIR.UP)):n.x>i.x?(console.log("\u5411\u5de6\u79fb\u52a8"),t.showDir(l.DIR.LEFT)):(console.log("\u5411\u53f3\u79fb\u52a8"),t.showDir(l.DIR.RIGHT))})))},e.prototype.showDir=function(t){var e=this;this.node_dirs.children[t].active=!0,this.animLoop.node.active=!1,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.move()})))},e.prototype.pause=function(t){t?this.node.pauseAllActions():this.node.resumeAllActions()},r([h(c.default)],e.prototype,"animLoop",void 0),r([h(cc.Node)],e.prototype,"node_dirs",void 0),r([u],e)}(a.default);o.default=d,cc._RF.pop()},{"../Define":"Define","../Global":"Global","../Loop":"Loop","./MovingBrick":"MovingBrick"}],RankDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"3d1daVCGQVFXbA0M+qoDvm9","RankDataMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.rankDataMgr=void 0;var n=cc._decorator,i=(n.ccclass,n.property,function(){function t(){this._datas=[],this._worldDatas=[]}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.getRankDatas=function(t){var e=this;return void 0===t&&(t=!0),new Promise(function(o){if(e._datas.length>0)e._datas=e.sortRankDatas(e._datas),o(e._datas);else{var n;n=t?window.week_rank_name:window.global_rank_name,app.platformMgr.getRankList(n,20,0,function(t){!t.some(function(t){return t.playerId==app.platformMgr.getPlayerID()})&&t.length<20&&t.push({playerId:app.platformMgr.getPlayerID(),photo:app.platformMgr.getPlayerPhoto(),nickName:app.platformMgr.getPlayerName(),rank:1,fbRank:1,score:0,customData:'{"usingSkin": '+app.user.getUsingSkin()+"}",isFriends:!0}),e._datas=e.sortRankDatas(t),o(e._datas)},t)}})},t.prototype.getWorldRankDatas=function(){var t=this;return new Promise(function(e){if(t._worldDatas.length>0)t._worldDatas=t.sortRankDatas(t._worldDatas),e(t._worldDatas);else{var o=window.global_rank_name;app.platformMgr.getRankList(o,20,0,function(o){!o.some(function(t){return t.playerId==app.platformMgr.getPlayerID()})&&o.length<20&&o.push({playerId:app.platformMgr.getPlayerID(),photo:app.platformMgr.getPlayerPhoto(),nickName:app.platformMgr.getPlayerName(),rank:1,fbRank:1,score:0,customData:'{"usingSkin": '+app.user.getUsingSkin()+"}",isFriends:!1}),t._worldDatas=t.sortRankDatas(o),e(t._worldDatas)},!1)}})},t.prototype.sortRankDatas=function(t){return t.some(function(t){return t.playerId==app.platformMgr.getPlayerID()&&(app.user.getMaxScore()>t.score||0==t.score)})&&(t=t.map(function(t){return t.playerId==app.platformMgr.getPlayerID()&&(t.score=app.user.getMaxScore(),t.customData='{"usingSkin": '+app.user.getUsingSkin()+"}"),t}).sort(function(t,e){return e.score-t.score}).map(function(t,e){return t.rank=e+1,t})),t},t._instance=null,t}());o.rankDataMgr=i.getInstance(),cc._RF.pop()},{}],RankItem:[function(t,e,o){"use strict";cc._RF.push(e,"8a9673j+7dG355j8SvIwmSN","RankItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/components/ListItem"),s=t("../../common/EventMgr"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.rank=null,e.nickName=null,e.stage=null,e.playBtn=null,e.rank_topThree=null,e.btnFrames=[],e.sp_play=null,e.node_friend=null,e.node_none=null,e.sp_roleSkin=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onUpdateData=function(t){var e=this;if(this.node.active=!0,this.data=t,console.log("000000"),console.log(this.data),this.rank.node.active=!1,this.rank_topThree.active=!1,t.rank<=3){this.rank_topThree.active=!0;for(var o=0;o<this.rank_topThree.childrenCount;o++)this.rank_topThree.children[o].active=o+1==this.data.rank}else this.rank.node.active=!0;if(this.rank.string=t.rank.toString(),"invite"==this.data.playerId)return this.node_friend.active=!1,void(this.node_none.active=!0);this.node_friend.active=!0,this.node_none.active=!1,t.photo&&cc.loader.load(t.photo,function(o,n){o||e.data!=t||(e.avatar.spriteFrame=new cc.SpriteFrame(n))});var n=this.data.customData.usingSkin;this.data.playerId==app.platformMgr.getPlayerID()&&(n=app.user.getUsingRoleId()),cc.loader.loadRes("textures/roles/role"+n.toString(),cc.SpriteFrame,function(t,o){t?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+n.toString()):e.sp_roleSkin.spriteFrame=o}),this.stage.string=" "+t.score,this.nickName.string=t.name,this.stage.string=""+t.score,this.playBtn.active=t.isFriends;var i=this.playBtn.getComponentInChildren(cc.Label);this.data.playerId==app.platformMgr.getPlayerID()?(i.string="SHARE",this.sp_play.spriteFrame=this.btnFrames[1],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#367414")):(i.string="PLAY",this.sp_play.spriteFrame=this.btnFrames[0],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#00586F"))},e.prototype.onPlayBtnClick=function(){app.soundMgr.playClick(),this.data.playerId==app.platformMgr.getPlayerID()?(app.platformMgr.logButtonClickEvent("RankItem_share"),s.EVT.emit("RankPageShareScreen")):(app.platformMgr.logButtonClickEvent("RankItem_playWithFriend"),app.platformMgr.playWithFriend("rank",this.data.playerId,function(t){t&&"SAME_CONTEXT"!=t.code?console.log(t):(app.pageMgr.hideDialog("RankPage"),app.pageMgr.hideDialog("ResultPage"),s.EVT.emit("GameMainPageUIShowStartUI",!1),s.EVT.emit("GameCtrlStartGame"))}))},e.prototype.onClickInvite=function(){app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("RankItem_invite"),app.platformMgr.chooseFriends("rank_invite",function(){app.pageMgr.hideDialog("RankPage"),app.pageMgr.hideDialog("ResultPage"),s.EVT.emit("GameMainPageUIShowStartUI",!1),s.EVT.emit("GameCtrlStartGame")})},r([p(cc.Sprite)],e.prototype,"avatar",void 0),r([p(cc.Label)],e.prototype,"rank",void 0),r([p(cc.Label)],e.prototype,"nickName",void 0),r([p(cc.Label)],e.prototype,"stage",void 0),r([p(cc.Node)],e.prototype,"playBtn",void 0),r([p(cc.Node)],e.prototype,"rank_topThree",void 0),r([p(cc.SpriteFrame)],e.prototype,"btnFrames",void 0),r([p(cc.Sprite)],e.prototype,"sp_play",void 0),r([p(cc.Node)],e.prototype,"node_friend",void 0),r([p(cc.Node)],e.prototype,"node_none",void 0),r([p(cc.Sprite)],e.prototype,"sp_roleSkin",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../common/components/ListItem":"ListItem"}],RankMgr:[function(t,e){"use strict";cc._RF.push(e,"0d0edu2gLxGNKQkUCslm6rs","RankMgr");var o=function(){function t(){}return t.sortRank=function(t){t.sort(function(t,e){return e.score-t.score});var e=1;t.forEach(function(t){t.rank=e,e++})},t.getRankData=function(t,e){var o=localStorage.getItem("rank_"+window.FB_APPID);if(o&&(o=JSON.parse(o)),o&&(o.time>Date.now()-48e4||!app.platformMgr.isFB))return e(o.info||{}),void console.log("from local",o);console.log("getRankData \u83b7\u5f97\u6392\u884c\u699c\u6570\u636e"),NetHelper.getRanksInfo(app.platformMgr.getPlayerID(),t,function(t){localStorage.setItem("rank_"+window.FB_APPID,JSON.stringify({time:Date.now(),info:t.data})),e(t&&t.data||{})})},t.preloadRankDatas=function(){var t=this;app.platformMgr.getConnectedPlayersAsync().then(function(e){for(var o=[],n=0;n<e.length;n++)e[n].getPhoto()&&cc.loader.load(e[n].getPhoto()),o.push(e[n].getID()),t.globalRankData.push({playerId:e[n].getID(),name:e[n].getName(),photo:e[n].getPhoto(),score:0,isFriends:!0,rank:1,customData:{usingSkin:1}}),t.friendsRankData.push({playerId:e[n].getID(),name:e[n].getName(),photo:e[n].getPhoto(),score:0,isFriends:!0,rank:1,customData:{usingSkin:1}});o.push(app.platformMgr.getPlayerID()),t.globalRankData.push({playerId:app.platformMgr.getPlayerID(),photo:app.platformMgr.getPlayerPhoto(),name:app.platformMgr.getPlayerName(),rank:1,score:app.user.getMaxScore(),customData:{usingSkin:app.user.getUsingSkin()},isFriends:!0}),t.friendsRankData.push({playerId:app.platformMgr.getPlayerID(),photo:app.platformMgr.getPlayerPhoto(),name:app.platformMgr.getPlayerName(),rank:1,score:0,customData:{usingSkin:app.user.getUsingSkin()},isFriends:!0}),t.getRankData(o,function(e){var o=e.Instant_games_rankInfo_all||{},n=e.Instant_games_rankInfo_week||{},i=app.platformMgr.getPlayerID();t.globalRankData.forEach(function(e){if(o[e.playerId]){var n=JSON.parse(o[e.playerId]);e.score=n.score,e.customData=n.extradata,e.playerId==i&&(t.myWorldScore=e.score)}}),t.sortRank(t.globalRankData),t.friendsRankData.forEach(function(e){if(n[e.playerId]){var o=JSON.parse(n[e.playerId]);e.score=o.score,e.customData=o.extradata,e.playerId==i&&(t.myWeekScore=e.score)}}),t.sortRank(t.friendsRankData)})})},t.handlerRankData=function(t,e){var o=t.length;if(o<e)for(var n=0;n<e-o;n++)t.push({playerId:"invite",photo:"",name:"",rank:o+n+1,score:0,customData:{usingSkin:1},isFriends:!0});return t},t.updateScore=function(t,e){console.log("score  = "+t+"this.myWeekScore = "+this.myWeekScore+"this.myWorldScore = "+this.myWorldScore);var o=[];t>this.myWeekScore&&(o.push("Instant_games_rankInfo_week"),this.myWeekScore=t),t>this.myWorldScore&&(o.push("Instant_games_rankInfo_all"),this.myWorldScore=t),0!=o.length&&(console.log("updateScoreupdateScoreupdateScoreupdateScore  score = "+t),console.log(e),NetHelper.updateRanks(app.platformMgr.getPlayerID(),o,{score:t,extradata:e},function(){}))},t.getWorldRankData=function(t){var e=app.platformMgr.getPlayerID(),o=this.globalRankData.find(function(t){return t.playerId===e});o?o.score>=this.myWorldScore?t(this.globalRankData):(o.score=app.user.getMaxScore(),this.sortRank(this.globalRankData),t(this.globalRankData)):t([])},t.getFriendsRankData=function(t){var e=app.platformMgr.getPlayerID(),o=this.friendsRankData.find(function(t){return t.playerId===e});o?o.score>=this.myWeekScore?t(this.friendsRankData):(o.score=this.myWeekScore,this.sortRank(this.friendsRankData),t(this.friendsRankData)):t([])},t.globalRankData=[],t.friendsRankData=[],t.myWeekScore=0,t.myWorldScore=0,t}();window.RankUtils=o,cc._RF.pop()},{}],RankPage:[function(t,e,o){"use strict";cc._RF.push(e,"0985faQ+epHp7aecUUE+zx6","RankPage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/components/ListView"),s=t("../common/EventMgr"),c=t("../game/logic/Define"),l=t("../game/logic/Global"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankList=null,e.avatar=null,e.node_world=null,e.node_friend=null,e.testBtns=null,e.text_version=null,e.text_testState=null,e.text_timeInfo=null,e.isFriend=!0,e.clickCount=0,e.from="",e.totalClickCount=0,e}return i(e,t),e.prototype.start=function(){window.rd=this,this.text_version.string="v"+window.GameVersion,this.text_testState.string=app.user.getTestMapStyleIndex().toString(),this.text_timeInfo.string=app.user.getCreateTime().toString()+"----"+Date.now().toString()+"----"+app.user.getLoginDayCount(),s.EVT.on("RankPageShareScreen",this.shareScreen,this)},e.prototype.onUpdateData=function(t){this.from=t.from,this.clickCount=0,this.testBtns.active=!1,this.totalClickCount=0,this.onClickWorld(null)},e.prototype.setRankItemsData=function(t){var e=this,o=t[0];null!=o&&(o.photo&&cc.loader.load(o.photo,function(t,o){t||(e.avatar.spriteFrame=new cc.SpriteFrame(o))}),this.rankList.stopAutoScroll(),this.rankList.setItemsData(t),this.rankList.scrollToIndex(0))},e.prototype.onCloseBtnClick=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("RankPage")},e.prototype.onClearData=function(){this.clickCount++,this.clickCount>=10&&(this.clickCount=0,app.user.clearDataAsync(),s.EVT.emit("showPrompt","Clear all!"))},e.prototype.onClickWorld=function(t){var e=this;this.isFriend&&(null!=t&&app.soundMgr.playClick(),this.isFriend=!1,this.rankList.removeAllItems(),this.updateBtnInfo(!1),RankUtils.getWorldRankData(function(t){var o=t.concat();o=RankUtils.handlerRankData(o,5),e.setRankItemsData(o)}),app.platformMgr.logButtonClickEvent("RankPage_allTime"))},e.prototype.onClickFriend=function(t){var e=this;this.isFriend||(null!=t&&app.soundMgr.playClick(),this.isFriend=!0,this.rankList.removeAllItems(),this.updateBtnInfo(!0),RankUtils.getFriendsRankData(function(t){var o=t.concat();o=RankUtils.handlerRankData(o,5),e.setRankItemsData(o)}),app.platformMgr.logButtonClickEvent("RankPage_friend"))},e.prototype.updateBtnInfo=function(t){t?(this.setSelectBtnColor(this.node_world,new cc.Color(175,175,175)),this.setSelectBtnColor(this.node_friend,new cc.Color(255,255,255))):(this.setSelectBtnColor(this.node_friend,new cc.Color(175,175,175)),this.setSelectBtnColor(this.node_world,new cc.Color(255,255,255)))},e.prototype.setSelectBtnColor=function(t,e){t.color=e;for(var o=0;o<1;o++)t.children[o].color=e},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("RankPage"),"result"==this.from?s.EVT.emit("ResultPageOtherPageClose"):s.EVT.emit("GameMainPageUIShowUI")},e.prototype.onShow=function(){app.pageMgr.showDialog("TopBarDialog",{closeCallBack:this.onClickClose.bind(this)})},e.prototype.onHide=function(){app.pageMgr.hideDialog("TopBarDialog")},e.prototype.onClickTestMap=function(){this.totalClickCount++,10==this.totalClickCount&&(this.testBtns.active=!0)},e.prototype.onClickTestSelectMapStyle=function(t,e){console.log(e),app.user.setTestMapStyleIndex(e)},e.prototype.onClickTestAddCoin=function(){app.user.addCoinNum(1e4)},e.prototype.onClickTestOpenAllRole=function(){l.default.isOpenAllRoleTag=!0;for(var t=1;t<=c.default.maxRoleCount;t++)app.user.addRoleId(t);this.testBtns.active=!1,this.totalClickCount=0},e.prototype.shareScreen=function(){var t=this;app.soundMgr.play(c.default.soundCamera),s.EVT.emit("TopBarDialog_WhiteEffect",function(e){t.node.y=l.default.cutScreenCamera.y,e.y=l.default.cutScreenCamera.y,app.pageMgr.getMaskNode().y=l.default.cutScreenCamera.y;var o=function(){cc.director.off(cc.Director.EVENT_AFTER_DRAW,o);var t=cc.game.canvas.toDataURL("image/webp");app.pageMgr.showDialog("ShareScreenDialog",{base64:t,from:"rankPage_rank"})}.bind(t);cc.director.on(cc.Director.EVENT_AFTER_DRAW,o),t.node.y=0,e.y=0,app.pageMgr.getMaskNode().y=0}),app.platformMgr.logButtonClickEvent("rankPage_shareCutScreen")},r([h(a.default)],e.prototype,"rankList",void 0),r([h(cc.Sprite)],e.prototype,"avatar",void 0),r([h(cc.Node)],e.prototype,"node_world",void 0),r([h(cc.Node)],e.prototype,"node_friend",void 0),r([h(cc.Node)],e.prototype,"testBtns",void 0),r([h(cc.Label)],e.prototype,"text_version",void 0),r([h(cc.Label)],e.prototype,"text_testState",void 0),r([h(cc.Label)],e.prototype,"text_timeInfo",void 0),r([u],e)}(BaseDialog);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../common/components/ListView":"ListView","../game/logic/Define":"Define","../game/logic/Global":"Global"}],RecordDialog:[function(t,e,o){"use strict";cc._RF.push(e,"37492KmHP9FYZ6bpGufnn66","RecordDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/EventMgr"),s=t("../game/logic/Define"),c=t("../game/logic/Global"),l=t("../common/components/Breath"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_score=null,e.sp_faceIcon=null,e.btn_cutScreen=null,e.btn_continue=null,e.hideCallBack=null,e.autoCutScreen=!1,e}return i(e,t),e.prototype.onLoad=function(){a.EVT.on("RecordDialog_rankCutScreen",this.rankCutScreen,this)},e.prototype.onUpdateData=function(t){var e=this;this.node.parent.getComponent(cc.Camera).enabled=!1,this.text_score.string=t.score,this.hideCallBack=t.callBack,app.user.setScore(t.score);var o=app.platformMgr.getPlayerPhoto();o&&cc.loader.load(o,function(t,o){t||(e.sp_faceIcon.spriteFrame=new cc.SpriteFrame(o))}),this.autoCutScreen=t.autoCutScreen,this.autoCutScreen?(this.btn_cutScreen.active=!1,this.btn_continue.active=!1,this.onClickCutScreen(),this.node.active=!1):(this.btn_cutScreen.active=!0,this.btn_continue.active=!0)},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("RecordDialog"),null!=this.hideCallBack&&this.hideCallBack()},e.prototype.onClickCutScreen=function(){app.platformMgr.logButtonClickEvent("recordDialog_share"),c.default.shareRecord("recordDialog",this.onClickClose.bind(this))},e.prototype.rankCutScreen=function(){app.soundMgr.play(s.default.soundCamera),app.platformMgr.logButtonClickEvent("record_shareCutScreen"),this.btn_cutScreen.children[0].getComponent(l.default).stopBreath(),app.pageMgr.whiteScreenEffect(function(){})},r([h(cc.Label)],e.prototype,"text_score",void 0),r([h(cc.Sprite)],e.prototype,"sp_faceIcon",void 0),r([h(cc.Node)],e.prototype,"btn_cutScreen",void 0),r([h(cc.Node)],e.prototype,"btn_continue",void 0),r([u],e)}(BaseDialog);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../common/components/Breath":"Breath","../game/logic/Define":"Define","../game/logic/Global":"Global"}],RecordItem:[function(t,e,o){"use strict";cc._RF.push(e,"3e5d1IFtwhMopDJ3KN9Gosk","RecordItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/components/ListItem"),s=t("../../common/EventMgr"),c=t("../../game/logic/Global"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.rank=null,e.nickName=null,e.stage=null,e.playBtn=null,e.rank_topThree=null,e.btnFrames=[],e.sp_play=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onUpdateData=function(t){var e=this;if(this.node.active=!0,this.data=t,t.photo&&cc.loader.load(t.photo,function(o,n){o||e.data!=t||(e.avatar.spriteFrame=new cc.SpriteFrame(n))}),this.rank.node.active=!1,this.rank_topThree.active=!1,t.rank<=3){this.rank_topThree.active=!0;for(var o=0;o<this.rank_topThree.childrenCount;o++)this.rank_topThree.children[o].active=o+1==this.data.rank}else this.rank.node.active=!0;this.rank.string=t.rank.toString(),this.stage.string=" "+t.score,this.nickName.string=t.name,this.stage.string=""+t.score,this.playBtn.active=t.isFriends;var n=this.playBtn.getComponentInChildren(cc.Label);this.data.playerId==app.platformMgr.getPlayerID()?(n.string="SHARE",this.sp_play.spriteFrame=this.btnFrames[1],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#367414")):(n.string="PLAY",this.sp_play.spriteFrame=this.btnFrames[0],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#00586F"))},e.prototype.onPlayBtnClick=function(){app.soundMgr.playClick(),this.data.playerId==app.platformMgr.getPlayerID()?(app.platformMgr.logButtonClickEvent("Recordtem_share"),c.default.shareRecord("recordItem")):(app.platformMgr.logButtonClickEvent("RecordItem_playWithFriend"),app.platformMgr.playWithFriend("record_rank",this.data.playerId,function(t){t&&"SAME_CONTEXT"!=t.code?console.log(t):(app.pageMgr.hideDialog("RecordDialog"),s.EVT.emit("GameMainPageUIShowStartUI",!1),s.EVT.emit("GameCtrlStartGame"))}))},r([u(cc.Sprite)],e.prototype,"avatar",void 0),r([u(cc.Label)],e.prototype,"rank",void 0),r([u(cc.Label)],e.prototype,"nickName",void 0),r([u(cc.Label)],e.prototype,"stage",void 0),r([u(cc.Node)],e.prototype,"playBtn",void 0),r([u(cc.Node)],e.prototype,"rank_topThree",void 0),r([u(cc.SpriteFrame)],e.prototype,"btnFrames",void 0),r([u(cc.Sprite)],e.prototype,"sp_play",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../common/components/ListItem":"ListItem","../../game/logic/Global":"Global"}],ResultItem:[function(t,e,o){"use strict";cc._RF.push(e,"ed182CRk01Er6QLLCMEftXC","ResultItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/components/ListItem"),s=t("../../common/EventMgr"),c=t("../../game/logic/Global"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.rank=null,e.nickName=null,e.stage=null,e.playBtn=null,e.rank_topThree=null,e.btnFrames=[],e.sp_play=null,e.node_friend=null,e.node_none=null,e.sp_roleSkin=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onUpdateData=function(t){var e=this;if(this.node.active=!0,this.data=t,this.rank.node.active=!1,this.rank_topThree.active=!1,t.rank<=3){this.rank_topThree.active=!0;for(var o=0;o<this.rank_topThree.childrenCount;o++)this.rank_topThree.children[o].active=o+1==this.data.rank}else this.rank.node.active=!0;if(this.rank.string=t.rank.toString(),"invite"==this.data.playerId)return this.node_friend.active=!1,void(this.node_none.active=!0);this.node_friend.active=!0,this.node_none.active=!1,t.photo&&cc.loader.load(t.photo,function(o,n){o||e.data!=t||(e.avatar.spriteFrame=new cc.SpriteFrame(n))});var n=this.data.customData.usingSkin;this.data.playerId==app.platformMgr.getPlayerID()&&(n=app.user.getUsingRoleId()),cc.loader.loadRes("textures/roles/role"+n.toString(),cc.SpriteFrame,function(t,o){t?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+n.toString()):e.sp_roleSkin.spriteFrame=o}),this.stage.string=" "+t.score,this.nickName.string=t.name,this.stage.string=""+t.score,this.playBtn.active=t.isFriends;var i=this.playBtn.getComponentInChildren(cc.Label);this.data.playerId==app.platformMgr.getPlayerID()?(i.string="SHARE",this.sp_play.spriteFrame=this.btnFrames[1],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#367414")):(i.string="PLAY",this.sp_play.spriteFrame=this.btnFrames[0],this.sp_play.node.children[0].getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#00586F"))},e.prototype.onPlayBtnClick=function(){app.soundMgr.playClick(),this.data.playerId==app.platformMgr.getPlayerID()?(app.platformMgr.logButtonClickEvent("ResultItem_share"),c.default.shareRecord("resultItem")):(app.platformMgr.logButtonClickEvent("ResultItem_playWithFriend"),app.platformMgr.playWithFriend("result_rank",this.data.playerId,function(t){t&&"SAME_CONTEXT"!=t.code?console.log(t):(app.pageMgr.hideDialog("ResultPage"),s.EVT.emit("GameMainPageUIShowStartUI",!1),s.EVT.emit("GameCtrlStartGame"))}))},e.prototype.onClickInvite=function(){app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("ResultItem_invite"),app.platformMgr.chooseFriends("result_invite",function(){app.pageMgr.hideDialog("ResultPage"),s.EVT.emit("GameMainPageUIShowStartUI",!1),s.EVT.emit("GameCtrlStartGame")})},r([u(cc.Sprite)],e.prototype,"avatar",void 0),r([u(cc.Label)],e.prototype,"rank",void 0),r([u(cc.Label)],e.prototype,"nickName",void 0),r([u(cc.Label)],e.prototype,"stage",void 0),r([u(cc.Node)],e.prototype,"playBtn",void 0),r([u(cc.Node)],e.prototype,"rank_topThree",void 0),r([u(cc.SpriteFrame)],e.prototype,"btnFrames",void 0),r([u(cc.Sprite)],e.prototype,"sp_play",void 0),r([u(cc.Node)],e.prototype,"node_friend",void 0),r([u(cc.Node)],e.prototype,"node_none",void 0),r([u(cc.Sprite)],e.prototype,"sp_roleSkin",void 0),r([p],e)}(a.default);o.default=h,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../common/components/ListItem":"ListItem","../../game/logic/Global":"Global"}],ResultPage:[function(t,e,o){"use strict";cc._RF.push(e,"7a6b7zvgCtGf5K+kBYYzxum","ResultPage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/components/ListView"),s=t("../GameConstant"),c=t("../common/EventMgr"),l=t("../game/logic/Define"),p=t("../game/logic/Global"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resultList=null,e.text_score=null,e.node_mask=null,e.btn_role=null,e.btn_shop=null,e.sp_avatar=null,e.node_tagUp1=null,e.node_tagDown1=null,e.node_continue=null,e.node_otherPlayer=null,e._data=null,e.entryData=null,e.initListViewHeight=0,e.goldEffectPos=cc.Vec2.ZERO,e.challengeFriendData=null,e.totalShowCount=0,e.curTime=0,e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.initListViewHeight=this.resultList.node.height,c.EVT.on("ResultPageOtherPageClose",this.otherPageClose,this),p.default.setPlayerAvatarBySp(this.sp_avatar),this.scheduleOnce(function(){var e=t.node_tagUp1.convertToWorldSpaceAR(cc.Vec2.ZERO),o=t.node_tagDown1.convertToWorldSpaceAR(cc.Vec2.ZERO),n=t.node.convertToNodeSpaceAR(e),i=t.node.convertToNodeSpaceAR(o),r=t.node.position;r.y=(n.y+i.y)/2,t.node_otherPlayer.y=r.y})},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.onUpdateData=function(t){if(this.sp_avatar.node.active=!1,this.btn_shop.active=!1,this.curTime=Utils.getSystemTime(),this.totalShowCount++,this.node_mask.active=!1,this.node.parent.getComponent(cc.Camera).enabled=!1,this._data=t,app.user.addNewGameCount(),this.text_score.string=t.score,app.user.addCoinNum(0,!0),app.user.setScore(t.score),this.entryData&&this.entryData.type==s.EntryType.VS_START&&this.entryData.playerId!=app.platformMgr.getPlayerID()){var e=this.entryData.score,o=t.score,n=this.entryData.photo,i=app.platformMgr.getPlayerPhoto(),r=app.platformMgr.getPlayerName();if(e>o){var a=e;e=o,o=a,a=n,n=i,i=a,r=this.entryData.name}this.entryData=null,c.EVT.emit("showTips",{isShow:!0,tips:"Sending score..."}),Utils.sendMessage("VsResult",{from:"VsResult_stage",type:s.EntryType.VS_RESULT,score1:e,photo1:n,score2:o,photo2:i,cta:"START NEW MATCH",text:r+" won, again?",winName:r,data:{type:s.EntryType.VS_RESULT,score1:e,photo1:n,score2:o,photo2:i}},function(){c.EVT.emit("showTips",{isShow:!0,tips:"Score sent!",duringTime:1})})}else null!=app.platformMgr.getContextID()&&(c.EVT.emit("showTips",{isShow:!0,tips:"Sending score..."}),Utils.sendMessage("VsStart",{from:"VsStart_stage",score:t.score,name:app.platformMgr.getPlayerName(),photo:app.platformMgr.getPlayerPhoto(),playerId:app.platformMgr.getPlayerID(),text:app.platformMgr.getPlayerName()+" has challenged you to a match of Endless Jump !",cta:"CHALLENGE",data:{type:s.EntryType.VS_START,score:t.score,name:app.platformMgr.getPlayerName(),photo:app.platformMgr.getPlayerPhoto(),playerId:app.platformMgr.getPlayerID()}},function(){c.EVT.emit("showTips",{isShow:!0,tips:"Score sent!",duringTime:1})}))},e.prototype.createShortCut=function(t){this.isFirst?app.platformMgr.createShortcutAsync().then(t):t(),this.isFirst=!1},e.prototype.onPlayFriendlyBtnClick=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.logButtonClickEvent("ResultPage_playWithFriend"),this.createShortCut(function(){t.curTime-t._data.time>=l.default.showContinueDialogIntervalTime?(app.platformMgr.logEvent("ResultPage",{type:"vs"}),Utils.challengeFriends2("ResultPage",function(){app.pageMgr.hideDialog("ResultPage"),c.EVT.emit("GameMainPageUIShowStartUI",!1),c.EVT.emit("GameCtrlStartGame"),app.platformMgr.isInterstitialLoad()&&app.platformMgr.showInterstitialAd("result")})):(app.pageMgr.hideDialog("ResultPage"),c.EVT.emit("GameMainPageUIShowStartUI",!1),c.EVT.emit("GameCtrlStartGame"),app.platformMgr.isInterstitialLoad()&&app.platformMgr.showInterstitialAd("result"))})},e.prototype.setRankItemsData=function(t){this.resultList.stopAutoScroll(),this.resultList.setItemsData(t),this.resultList.scrollToIndex(0)},e.prototype.onClickChallengeFriend=function(){null!=this.challengeFriendData&&(app.platformMgr.logButtonClickEvent("ResultPage_playWithFriend"),app.platformMgr.playWithFriend("result",this.challengeFriendData.playerId,function(t){t&&"SAME_CONTEXT"!=t.code?console.log(t):(app.pageMgr.hideDialog("ResultPage"),c.EVT.emit("GameMainPageUIShowStartUI",!1),c.EVT.emit("GameCtrlStartGame"))}))},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("ResultPage"),c.EVT.emit("GameMainPageUIShowStartUI",!0)},e.prototype.onShow=function(){app.pageMgr.showDialog("TopBarDialog",{closeCallBack:this.onClickClose.bind(this),from:"ResultPage"})},e.prototype.onHide=function(){this.node.parent.getComponent(cc.Camera).enabled=!1,app.pageMgr.hideDialog("TopBarDialog")},e.prototype.onClickRank=function(){this.node_mask.active=!0,app.soundMgr.playClick(),app.pageMgr.showDialog("RankPage",{from:"result"}),app.platformMgr.logButtonClickEvent("result_rank")},e.prototype.onClickRoleSkin=function(){this.node_mask.active=!0,app.soundMgr.playClick(),app.pageMgr.showDialog("RoleSkinDialog",{from:"result"}),app.platformMgr.logButtonClickEvent("result_roleSkin")},e.prototype.onClickShop=function(){this.node_mask.active=!0,app.soundMgr.playClick(),app.pageMgr.showDialog("ShopDialog",{from:"result"}),app.platformMgr.logButtonClickEvent("result_shop")},e.prototype.otherPageClose=function(){this.node_mask.active=!1,app.pageMgr.showDialog("TopBarDialog",{closeCallBack:this.onClickClose.bind(this),from:"ResultPage"})},e.prototype.onClickCutScreen=function(){var t=this;app.soundMgr.play(l.default.soundCamera),c.EVT.emit("TopBarDialog_WhiteEffect",function(e){t.sp_avatar.node.active=!0,t.node.y=p.default.cutScreenCamera.y,e.y=p.default.cutScreenCamera.y,app.pageMgr.getMaskNode().y=p.default.cutScreenCamera.y;var o=Utils.getScreenBase64(p.default.cutScreenCamera.x,p.default.cutScreenCamera.y,cc.winSize.width,cc.winSize.height);app.pageMgr.showDialog("ShareScreenDialog",{base64:o,from:"result_camera"}),t.node.y=0,e.y=0,app.pageMgr.getMaskNode().y=0,t.sp_avatar.node.active=!1}),app.platformMgr.logButtonClickEvent("resultPage_shareCutScreen")},e.prototype.onClickChallangeOtherPlayer=function(){app.platformMgr.matchPlayerAsync().then(function(){app.pageMgr.hideDialog("ResultPage"),c.EVT.emit("GameMainPageUIShowStartUI",!1),c.EVT.emit("GameCtrlStartGame"),app.platformMgr.isInterstitialLoad()&&app.platformMgr.showInterstitialAd("result")}).catch(function(){})},r([d(a.default)],e.prototype,"resultList",void 0),r([d(cc.Label)],e.prototype,"text_score",void 0),r([d(cc.Node)],e.prototype,"node_mask",void 0),r([d(cc.Node)],e.prototype,"btn_role",void 0),r([d(cc.Node)],e.prototype,"btn_shop",void 0),r([d(cc.Sprite)],e.prototype,"sp_avatar",void 0),r([d(cc.Node)],e.prototype,"node_tagUp1",void 0),r([d(cc.Node)],e.prototype,"node_tagDown1",void 0),r([d(cc.Node)],e.prototype,"node_continue",void 0),r([d(cc.Node)],e.prototype,"node_otherPlayer",void 0),r([h],e)}(BaseDialog);o.default=f,cc._RF.pop()},{"../GameConstant":"GameConstant","../common/EventMgr":"EventMgr","../common/components/ListView":"ListView","../game/logic/Define":"Define","../game/logic/Global":"Global"}],RewardRoleSkinItem:[function(t,e,o){"use strict";cc._RF.push(e,"92cd09WF+BGgKzu2KqLPd5J","RewardRoleSkinItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/EventMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleIcon=null,e.selectTag=null,e.roleId=0,e}return i(e,t),e.prototype.initItem=function(t){var e=this;return this.roleId=t,cc.loader.loadRes("textures/roles/role"+this.roleId.toString(),cc.SpriteFrame,function(t,o){t?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+e.roleId.toString()):e.roleIcon.spriteFrame=o}),this.selectTag.active=!1,this},e.prototype.onClick=function(){app.soundMgr.playClick(),a.EVT.emit("ShowRewardRoleSkinDialogSelectItem",this.roleId)},e.prototype.getRoleId=function(){return this.roleId},e.prototype.setShowSelectTag=function(t){this.selectTag.active=t},r([l(cc.Sprite)],e.prototype,"roleIcon",void 0),r([l(cc.Node)],e.prototype,"selectTag",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../common/EventMgr":"EventMgr"}],RoleAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"4d7b6lXQN9BcJLzKkimGzTc","RoleAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ROLEANIMATIONTYPE=void 0;var a,s=cc._decorator,c=s.ccclass;s.property,function(t){t[t.FALL=0]="FALL",t[t.ROLL=1]="ROLL",t[t.RUN=2]="RUN",t[t.SLIDE=3]="SLIDE",t[t.NONE=4]="NONE",t[t.DIE=5]="DIE"}(a=o.ROLEANIMATIONTYPE||(o.ROLEANIMATIONTYPE={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curAnimationType=a.NONE,e.armature=null,e.animationState=null,e.isShow=!0,e.completeCallBack=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.armature=this.node.getComponent(dragonBones.ArmatureDisplay),this.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(e){e.type==dragonBones.EventObject.COMPLETE&&null!=t.completeCallBack&&t.completeCallBack(t.animationState)})},e.prototype.palyAnimation=function(t,e){if(void 0===e&&(e=null),this.curAnimationType!=t&&(this.curAnimationType=t,null!=this.armature))switch(t){case a.FALL:this.animationState=this.armature.playAnimation("fall",1);break;case a.SLIDE:this.animationState=this.armature.playAnimation("slide",0);break;case a.RUN:this.animationState=this.armature.playAnimation("run",-1);break;case a.ROLL:this.animationState=this.armature.playAnimation("roll",-1);break;case a.DIE:this.animationState=this.armature.playAnimation("die",1)}},e.prototype.hideAnimasion=function(){this.node.active=!1,this.isShow=!1},e.prototype.showAnimasion=function(){this.node.active=!0,this.isShow=!0},e.prototype.isShowAnimasion=function(){return this.isShow},e.prototype.pauseAnimasion=function(){null!=this.animationState&&(this.animationState.timeScale=0)},e.prototype.resumAnimasion=function(){null!=this.animationState&&(this.animationState.timeScale=1)},e.prototype.changeRoleSkin=function(){var t=this;cc.loader.loadRes("juese18_ske",dragonBones.DragonBonesAsset,function(e,o){e||cc.loader.loadRes("juese18_tex",dragonBones.DragonBonesAtlasAsset,function(e,n){e||(t.armature.dragonAsset=o,t.armature.dragonAtlasAsset=n,t.armature.armatureName="Armature",t.armature.playAnimation("run",-1))})})},e.prototype.setCompleteCallBack=function(t){this.completeCallBack=t},e.prototype.getAnimasionType=function(){return this.curAnimationType},r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],RoleSkinDialog:[function(t,e,o){"use strict";cc._RF.push(e,"ab6e97zdRlIPqfGxE3rhljn","RoleSkinDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/EventMgr"),s=t("./items/RoleSkinItem"),c=t("../game/logic/Define"),l=t("../game/logic/RoleAnimation"),p=t("../game/logic/Global"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_pageview=null,e.node_content=null,e.node_pagetem=null,e.text_fruit=null,e.node_roleRoot=null,e.node_shadow=null,e.node_dots=null,e.node_dot=null,e.btn_video=null,e.btn_coin=null,e.btn_Diamond=null,e.btn_recharge=null,e.node_getTypeLevel=null,e.node_light=null,e.text_videoCount=null,e.text_piece=null,e.text_diamondCount=null,e.text_spendDiamond=null,e.text_getType=null,e.curSelectItem=null,e.spendCoin=200,e.curConfigs=null,e.from="",e}return i(e,t),e.prototype.onLoad=function(){a.EVT.on("RoleSkinDialogSelectItem",this.selectItem,this),cc.systemEvent.on("updateCoinNum",this.updateCoinNum,this);for(var t=0;t<Math.ceil(c.default.maxRoleCount/9);t++)this.node_dots.addChild(cc.instantiate(this.node_dot))},e.prototype.onUpdateData=function(t){if(this.node_dots.getComponent(cc.Layout).updateLayout(),this.from=t.from,this.text_fruit.string=this.spendCoin.toString(),this.node_shadow.active=!1,app.pageMgr.showDialog("TopBarDialog",{closeCallBack:this.onClickClose.bind(this)}),0==this.node_pageview.getPages().length)for(var e=0;e<Math.ceil(c.default.maxRoleCount/9);e++)this.node_pageview.addPage(cc.instantiate(this.node_pagetem));for(this.curConfigs=c.default.roleSkinConfigs,e=0;e<this.node_pageview.getPages().length;e++)this.refreshPageItemsByPageIndex(e);this.refreshDiamondCount(),this.resetSelectCurRole(),this.updateDots(),this.resetTitle()},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("RoleSkinDialog"),"result"==this.from?a.EVT.emit("ResultPageOtherPageClose"):a.EVT.emit("GameMainPageUIShowUI")},e.prototype.onClickVideo=function(){var t=this;app.soundMgr.playClick(),app.platformMgr.showVideoAd("roleSkinDialog",function(){if(null!=t.curSelectItem){var e=t.curSelectItem.getItemData(),o=app.user.addRoleSkinVideoCount(e.roleId,1);t.text_videoCount.string="("+o.toString()+"/"+e.videoCount+")",o>=e.videoCount&&(t.btn_video.active=!1,app.user.addRoleId(t.curSelectItem.getRoleId()),app.user.setUsingRoleId(t.curSelectItem.getRoleId()),t.curSelectItem.resetRoleSkinItem(),t.selectItem(t.curSelectItem),app.platformMgr.logButtonClickEvent("RoleSkinDialog_video_roleId"+t.curSelectItem.getRoleId()))}})},e.prototype.onClickRecharge=function(){var t=this;app.soundMgr.playClick(),app.user.setUsingRoleId(this.curSelectItem.getRoleId()),p.default.recharge(this.curSelectItem.getItemData().productId,function(e){if(1==e){app.user.addRoleId(t.curSelectItem.getItemData().roleId),app.platformMgr.logButtonClickEvent("RoleSkinDialog_recharge_roleId"+t.curSelectItem.getRoleId());for(var o=0;o<t.node_pageview.getPages().length;o++)t.refreshPageItemsByPageIndex(o);null!=t.curSelectItem&&(t.curSelectItem.resetRoleSkinItem(),t.selectItem(t.curSelectItem))}})},e.prototype.onClickCoin=function(){app.soundMgr.playClick(),null!=this.curSelectItem&&this.curSelectItem.getRoleId()>0&&this.curSelectItem.getRoleId()<=c.default.maxRoleCount&&app.user.isCoinEnough(this.spendCoin)&&(app.user.addCoinNum(-1*this.spendCoin),app.user.addRoleId(this.curSelectItem.getRoleId()),app.user.setUsingRoleId(this.curSelectItem.getRoleId()),this.curSelectItem.resetRoleSkinItem(),app.platformMgr.logButtonClickEvent("RoleSkinDialog_coin_roleId"+this.curSelectItem.getRoleId()),this.selectItem(this.curSelectItem))},e.prototype.onClickDiamond=function(){app.soundMgr.playClick(),null!=this.curSelectItem&&this.curSelectItem.getRoleId()>0&&this.curSelectItem.getRoleId()<=c.default.maxRoleCount&&app.user.isDiamondEnough(this.spendCoin)&&(app.user.addDiamondNum(-1*this.spendCoin),app.user.addRoleId(this.curSelectItem.getRoleId()),app.user.setUsingRoleId(this.curSelectItem.getRoleId()),this.curSelectItem.resetRoleSkinItem(),app.platformMgr.logButtonClickEvent("RoleSkinDialog_coin_roleId"+this.curSelectItem.getRoleId()),this.selectItem(this.curSelectItem),this.refreshDiamondCount())},e.prototype.refreshPageItemsByPageIndex=function(t){var e=this.node_content.children[t];if(null!=e)for(var o=0;o<9;o++){var n=this.curConfigs[o+9*t];e.children[o].getComponent(s.default).initItem(n)}},e.prototype.selectItem=function(t){var e=this;this.btn_video.active=!1,this.btn_coin.active=!1,this.btn_recharge.active=!1,this.btn_Diamond.active=!1,0!=t.getRoleId()&&(null==this.curSelectItem?this.curSelectItem=t:(this.curSelectItem.setSelectStatus(!1),this.curSelectItem=t,this.curSelectItem.setSelectStatus(!0)),this.node_shadow.active=!1,this.node_roleRoot.active=!1,this.node_getTypeLevel.active=!1,this.handlerBtn(t),app.user.isOwnRoleById(this.curSelectItem.getRoleId())?(app.user.setUsingRoleId(this.curSelectItem.getRoleId()),this.resetSelectCurRole(),this.lightEffct(!0)):(this.node_shadow.active=!0,cc.loader.loadRes("textures/roles/role"+t.getRoleId().toString(),cc.SpriteFrame,function(o,n){o?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+t.getRoleId().toString()):e.node_shadow.getComponent(cc.Sprite).spriteFrame=n}),this.node_shadow.color=cc.Color.WHITE,this.lightEffct(!1)))},e.prototype.handlerBtn=function(t){if(!app.user.isOwnRoleById(this.curSelectItem.getRoleId())){var e=t.getItemData();if(0==e.getType)this.btn_coin.active=!0,this.spendCoin=e.coinCount,this.text_fruit.string=this.spendCoin.toString(),this.btn_coin.getComponent(cc.Button).interactable=app.user.getCoinNum()>=this.spendCoin,this.changeBntToGray(this.btn_coin,!this.btn_coin.getComponent(cc.Button).interactable);else if(1==e.getType){this.btn_video.active=!0;var o=app.user.getRoleSkinVideoCount(e.roleId);this.text_videoCount.string="("+o.toString()+"/"+e.videoCount+")",this.btn_video.getComponent(cc.Button).interactable=app.platformMgr.isVideoLoad(),this.changeBntToGray(this.btn_video,!this.btn_video.getComponent(cc.Button).interactable)}else 2==e.getType?(this.btn_recharge.active=!0,this.text_piece.string=app.platformMgr.getPrice(e.productId,"$"+e.piece)):3==e.getType?(this.btn_Diamond.active=!0,this.spendCoin=e.coinCount,this.text_spendDiamond.string=this.spendCoin.toString(),this.btn_Diamond.getComponent(cc.Button).interactable=app.user.getDiamondNum()>=this.spendCoin,this.changeBntToGray(this.btn_Diamond,!this.btn_Diamond.getComponent(cc.Button).interactable)):4==e.getType&&(this.node_getTypeLevel.active=!0)}},e.prototype.resetSelectCurRole=function(){this.node_roleRoot.active=!0,this.resetRole(app.user.getUsingRoleId())},e.prototype.resetRole=function(t){var e=this;cc.loader.loadRes("roles/role"+t.toString(),function(o,n){if(o&&console.log("onUpdateData roles/role"+t.toString()+"\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25"),t==app.user.getUsingRoleId()){0!=e.node_roleRoot.children.length&&e.node_roleRoot.removeAllChildren();var i=cc.instantiate(n);i.position=cc.v2(0,-50),e.node_roleRoot.addChild(i),i.getComponent(l.default).palyAnimation(l.ROLEANIMATIONTYPE.RUN)}})},e.prototype.updateDots=function(){for(var t=this.node_pageview.getCurrentPageIndex(),e=0;e<this.node_dots.childrenCount;e++)this.node_dots.children[e].children[0].active=t==e},e.prototype.pageMoveCallBack=function(){this.updateDots(),this.resetTitle()},e.prototype.resetTitle=function(){var t=this.node_pageview.getCurrentPageIndex();this.text_getType.string=c.default.roleTitleDesc[t],this.text_getType.node.color=(new cc.Color).fromHEX(c.default.roleSkinTitleColors[t]),this.text_getType.node.getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX(c.default.roleSkinTitleOutLineColors[t])},e.prototype.updateCoinNum=function(){},e.prototype.changeBntToGray=function(t,e){var o=0;e&&(o=1),t.getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(o))},e.prototype.lightEffct=function(t){t?(this.node_light.stopAllActions(),this.node_light.runAction(cc.rotateBy(.1,-5).repeatForever())):this.node_light.stopAllActions()},e.prototype.refreshDiamondCount=function(){this.text_diamondCount.string=app.user.getDiamondNum().toString()},r([d(cc.PageView)],e.prototype,"node_pageview",void 0),r([d(cc.Node)],e.prototype,"node_content",void 0),r([d(cc.Node)],e.prototype,"node_pagetem",void 0),r([d(cc.Label)],e.prototype,"text_fruit",void 0),r([d(cc.Node)],e.prototype,"node_roleRoot",void 0),r([d(cc.Node)],e.prototype,"node_shadow",void 0),r([d(cc.Node)],e.prototype,"node_dots",void 0),r([d(cc.Node)],e.prototype,"node_dot",void 0),r([d(cc.Node)],e.prototype,"btn_video",void 0),r([d(cc.Node)],e.prototype,"btn_coin",void 0),r([d(cc.Node)],e.prototype,"btn_Diamond",void 0),r([d(cc.Node)],e.prototype,"btn_recharge",void 0),r([d(cc.Node)],e.prototype,"node_getTypeLevel",void 0),r([d(cc.Node)],e.prototype,"node_light",void 0),r([d(cc.Label)],e.prototype,"text_videoCount",void 0),r([d(cc.Label)],e.prototype,"text_piece",void 0),r([d(cc.Label)],e.prototype,"text_diamondCount",void 0),r([d(cc.Label)],e.prototype,"text_spendDiamond",void 0),r([d(cc.Label)],e.prototype,"text_getType",void 0),r([h],e)}(BaseDialog);o.default=f,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Define":"Define","../game/logic/Global":"Global","../game/logic/RoleAnimation":"RoleAnimation","./items/RoleSkinItem":"RoleSkinItem"}],RoleSkinItem:[function(t,e,o){"use strict";cc._RF.push(e,"d8f88BtEWRHVbs8QXFYeUGo","RoleSkinItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../game/logic/Define"),s=t("../../common/EventMgr"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_mark1=null,e.node_select=null,e.node_roleRoot=null,e.roleId=0,e.node_footBg=null,e.data=null,e}return i(e,t),e.prototype.initItem=function(t){this.node_select.active=!1,this.node_footBg.active=!1,this.node_mark1.active=!0,null!=t&&(this.data=t,this.roleId=t.roleId,this.node_mark1.active=!1,1==this.roleId&&(this.node_footBg.x=-10),this.node_roleRoot.children[0].y=-40,this.node_roleRoot.children[0].active=!0,this.resetRoleSkinItem(),this.setSelectStatus(app.user.getUsingRoleId()==this.roleId),app.user.getUsingRoleId()==this.roleId&&s.EVT.emit("RoleSkinDialogSelectItem",this))},e.prototype.onClickItem=function(){app.soundMgr.playClick(),console.log("roleId = "+this.roleId),s.EVT.emit("RoleSkinDialogSelectItem",this)},e.prototype.getRoleId=function(){return this.roleId},e.prototype.resetRoleSkinItem=function(){var t=this;app.user.isOwnRoleById(this.roleId)?(this.node_roleRoot.children[0].color=cc.Color.WHITE,this.node_roleRoot.children[0].opacity=255,this.node_footBg.active=!0,cc.loader.loadRes("textures/roles/role"+this.roleId.toString(),cc.SpriteFrame,function(e,o){e?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+t.roleId.toString()):t.node_roleRoot.children[0].getComponent(cc.Sprite).spriteFrame=o})):(this.node_roleRoot.children[0].color=(new cc.Color).fromHEX(a.default.roleQualityColors[this.data.quality]),this.node_footBg.active=!0,cc.loader.loadRes("textures/roleswhite/role"+this.roleId.toString(),cc.SpriteFrame,function(e,o){e?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"+t.roleId.toString()):t.node_roleRoot.children[0].getComponent(cc.Sprite).spriteFrame=o})),app.user.getUsingRoleId()==this.roleId?this.node_select.active=!0:this.node_select.active=!1},e.prototype.setSelectStatus=function(t){this.node_select.active=t},e.prototype.getItemData=function(){return this.data},r([p(cc.Node)],e.prototype,"node_mark1",void 0),r([p(cc.Node)],e.prototype,"node_select",void 0),r([p(cc.Node)],e.prototype,"node_roleRoot",void 0),r([p(cc.Node)],e.prototype,"node_footBg",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../game/logic/Define":"Define"}],Role:[function(t,e,o){"use strict";cc._RF.push(e,"3acf1wq/e1BU5ct0Holu/BH","Role");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/EventMgr"),s=t("./Brick"),c=t("./elements/BoxBrick"),l=t("../manager/BrickManager"),p=t("./RoleAnimation"),u=t("../manager/BulletManager"),h=t("../manager/MysteryHouseManager"),d=t("./Global"),f=t("./elements/PopupBrick"),g=t("./PopupHelper"),y=t("../manager/EffectManager"),m=t("./Define"),v=t("./elements/BrokenBrick"),_=t("./Behavior"),b=t("./elements/TurntableBrick"),R=t("./elements/FrozenBrick"),C=t("./elements/SwitchBrick"),I=t("../manager/CheckPointManager"),B=t("./elements/ShareBrick"),w=t("./elements/BrokenPowerBrick"),k=t("./elements/HallOfFameBrick"),P=t("./elements/MovieBrick"),S=t("./elements/NeonLightBrick"),M=cc._decorator,O=M.ccclass,D=M.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.behavior=null,e.roleAnimation=null,e.node_camera=null,e.revivePos=cc.Vec2.ZERO,e.isDead=!1,e.curScreenIndex=1,e.lastY=0,e.lastPos=cc.Vec2.ZERO,e.initPos=cc.Vec2.ZERO,e.isGodTag=!1,e.popupHelper=null,e.eventBrick=null,e.popupBrick=null,e.totalTime=0,e.slideEffect=null,e.lastActiton=_.ROLEACTION.NONE,e}return i(e,t),e.prototype.init=function(){this.behavior.collisionCallBack=this.collisionCalllBack.bind(this),this.behavior.actionCallBack=this.actionCallBack.bind(this),this.behavior.changeDirCallBack=this.changeDirCallBack.bind(this),this.revivePos=this.node.position,this.initPos=this.node.position,this.lastY=.5*cc.winSize.height,this.roleAnimation.node.scaleX=-1},e.prototype.updateTime=function(t){if(this.behavior.getCurAction()==_.ROLEACTION.WALKING&&(this.totalTime+=t,this.totalTime>=.5&&(y.default.getInstance().showEffect(m.default.effctRoleRun,this.node.position.add(cc.v2(25,0)),1,1,null,d.default.getNodeRootByIndex(2)),this.totalTime=0)),this.behavior.getMoveDir()==_.WALKDIR.RIGHT){if(this.node.x>this.curScreenIndex*cc.winSize.width){this.curScreenIndex=this.curScreenIndex+1,a.EVT.emit("GameCtrlCameraHorizontalMove",!0);var e=this.getRoleNearDoorBrick(10,!0);if(h.default.getInstance().resetOffsetIndex(1),null!=e){var o=e.getRow();h.default.getInstance().showMysteryHouse(o,!0,e)}}}else this.behavior.getMoveDir()==_.WALKDIR.LEFT&&this.node.x<(this.curScreenIndex-1)*cc.winSize.width&&(this.curScreenIndex=this.curScreenIndex-1,a.EVT.emit("GameCtrlCameraHorizontalMove",!1),e=this.getRoleNearDoorBrick(10,!1),h.default.getInstance().resetOffsetIndex(-1),null!=e&&(o=e.getRow(),h.default.getInstance().showMysteryHouse(o,!1,e)));if(this.node.position.sub(this.lastPos).mag()>=50){this.lastPos=this.node.position,u.default.getInstance().updateCollisionStatus(this.node),l.default.getInstance().updateCollisionStatus();var n=d.default.getRowColByPos(this.node.position);d.default.lastLevel<=0?a.EVT.emit("GameCtrlUpdateLevelInfo",Math.floor(n.row/m.default.mapMaxRow)+1):a.EVT.emit("GameCtrlUpdateLevelInfo",Math.floor(n.row/m.default.mapMaxRow)+d.default.lastLevel),h.default.getInstance().cacheMysteryHoustRes()}l.default.getInstance().updateGroupIndexByPosY(this.node.y,d.default.gameState==m.GAMESTATUS.GAMING),Math.abs(this.node.x)>=3*cc.winSize.width&&!this.isDead&&(this.curScreenIndex=1,this.node.stopAllActions(),this.node.position=this.initPos,this.behavior.setCurAction(_.ROLEACTION.DROPING),d.default.curCameraNode.stopAllActions(),d.default.curCameraNode.x=0,d.default.curCameraNode.y=this.node.y,n=d.default.getRowColByPos(this.node.position),app.platformMgr.logEvent("outScreen",{level:Math.floor(n.row/m.default.mapMaxRow)+d.default.lastLevel,row:n.row,col:n.col,mapStyle:app.user.getMapStyleIndex()})),this.behavior.checckCreviceDie()},e.prototype.getRoleNearDoorBrick=function(t,e){for(var o=d.default.getRowColByPos(this.node.position).row,n=o+t,i=o-t;i<n;i++){var r=l.default.getInstance().getBrickByRowCol(i,e?m.default.brickCol:0,!1);if(null!=r&&r.getTypeId()==l.BRICKTYPE.DOORBRICK)return r}return null},e.prototype.jump=function(){d.default.isCanJump&&(this.isDead||(null==this.popupBrick?this.behavior.jump()&&(0==this.behavior.getJumpCount()?y.default.getInstance().showEffect(m.default.effectRoleDoubleJump,this.node.position):1==this.behavior.getJumpCount()&&this.behavior.getLastAction()==_.ROLEACTION.WALKING&&(y.default.getInstance().showEffect(m.default.effectRoleJump1,this.node.position.add(cc.v2(25,10)),1,.8,null,d.default.getNodeRootByIndex(3)),y.default.getInstance().showEffect(m.default.effectRoleJump,this.node.position.add(cc.v2(25,50)),1,this.behavior.getMoveDir(),null,d.default.getNodeRootByIndex(3)))):this.popupBrick.fire()))},e.prototype.droping=function(){this.behavior.setCurAction(_.ROLEACTION.DROPING)},e.prototype.initRolePos=function(){d.default.lastLevel>0&&(this.resetRevivePos(69),this.node.position=this.revivePos)},e.prototype.move=function(){},e.prototype.collisionCalllBack=function(t,e){if(!this.isDead){var o=e.getComponent(s.default);if(o.isCanCollect()){app.soundMgr.play(m.default.soundCollect),y.default.getInstance().showEffect(m.default.effectCollectProp,o.node.position).scale=e.scale,1==this.curScreenIndex?(l.default.getInstance().pushCollectPropInfo(o.getRow(),o.getCol()),l.default.getInstance().removeBrickByRowCol(o.getRow(),o.getCol())):h.default.getInstance().removeBrickByRowCol(o.getRow(),o.getCol());var n=o;n.isDiamond()?app.user.addDiamondNum(n.getRewardNum(),!1):app.user.addCoinNum(n.getRewardNum(),!1)}else{if(o.isPopupBrick()){var i=e.getComponent(f.default);if(this.popupBrick==i)return;return null!=this.popupBrick&&this.popupFinish(),this.popupBrick=i,this.popupBrick.setPopupNode(this.node),this.roleAnimation.node.active=!1,void this.behavior.setCurAction(_.ROLEACTION.POPUP)}if(o.getTypeId()==l.BRICKTYPE.BROKENBRICK){var r=e.getComponent(v.default);if(r.getBrokenType()==v.BROKENTYPE.BODY)return r.brcokenEffect(),void l.default.getInstance().removeBrickByRowCol(o.getRow(),o.getCol())}switch(t){case 0:this.footCollision(e);break;case 1:this.headCollision(e);break;case 2:this.bodyCollision(e)}}}},e.prototype.headCollision=function(t){var e=t.getComponent(s.default);if(null!=e)if(e.getTypeId()==l.BRICKTYPE.BOXBRICK)t.getComponent(c.default).openBox();else if(e.getTypeId()==l.BRICKTYPE.BROKENBRICK){var o=t.getComponent(v.default);o.getBrokenType()==v.BROKENTYPE.HEAD&&(o.brcokenEffect(),l.default.getInstance().removeBrickByRowCol(e.getRow(),e.getCol()))}else e.getTypeId()==l.BRICKTYPE.TURNTABLEBRICK?t.getComponent(b.default).spin():e.getTypeId()==l.BRICKTYPE.FROZENBRICK?t.getComponent(R.default).unfrozen():e.getTypeId()==l.BRICKTYPE.SWITCHBRICK?t.getComponent(C.default).changeStatus():e.getTypeId()==l.BRICKTYPE.SHAREBRICK?t.getComponent(B.default).share():e.getTypeId()==l.BRICKTYPE.BROKENPOWERBRICK?t.getComponent(w.default).power():e.getTypeId()==l.BRICKTYPE.HALLOFFAMEBRICK?t.getComponent(k.default).share():e.getTypeId()==l.BRICKTYPE.MOVIEBRICK?t.getComponent(P.default).share():e.getTypeId()==l.BRICKTYPE.NEONLIGHTBRICK?t.getComponent(S.default).share():e.isHurt()&&(e.isBullet()&&u.default.getInstance().removeBullet(e,!0),console.log("\u73a9\u5bb6\u6b7b\u4ea1"),a.EVT.emit("GameCtrlRoleDead"))},e.prototype.footCollision=function(t){var e=t.getComponent(s.default);if(null!=e)if(this.changeBrickState(e.getRow(),10,l.BRICKTYPE.HALLOFFAMEBRICK),this.changeBrickState(e.getRow(),10,l.BRICKTYPE.BROKENPOWERBRICK),this.changeBrickState(e.getRow(),10,l.BRICKTYPE.MOVIEBRICK),this.changeBrickState(e.getRow(),10,l.BRICKTYPE.NEONLIGHTBRICK),e.getTypeId()==l.BRICKTYPE.BROKENBRICK){var o=t.getComponent(v.default);o.getBrokenType()==v.BROKENTYPE.FOOT&&(o.brcokenEffect(),l.default.getInstance().removeBrickByRowCol(e.getRow(),e.getCol()))}else if(e.getTypeId()==l.BRICKTYPE.CLOUDBRICK){var n=l.default.getInstance().getBrickByRowCol(e.getRow()+1,5);null!=n&&n.getTypeId()==l.BRICKTYPE.EVENTBRICK&&(this.eventBrick=n,l.default.getInstance().openDoor(this.eventBrick.getRow())),(e.getRow()-57)%m.default.mapMaxRow==0&&I.default.getInstance().hanlderOpenCheckkPoint(e.getRow()+18)}else e.isHurt()&&(e.isCanStampDeath()?e.isBullet()?(u.default.getInstance().removeBullet(e,!0),this.behavior.minJump()):(console.log("\u73a9\u5bb6\u8e29\u6b7b\u602a\u7269"),e.getTypeId()==l.BRICKTYPE.MONSTER_TYPE2&&(app.soundMgr.play(m.default.soundMonsterDead),y.default.getInstance().showEffect(m.default.effectMonsterDeath,e.node.position),l.default.getInstance().removeBrickByRowCol(e.getRow(),e.getCol()),this.behavior.minJump())):(e.isBullet()&&u.default.getInstance().removeBullet(e,!0),console.log("\u73a9\u5bb6\u6b7b\u4ea1"),a.EVT.emit("GameCtrlRoleDead")))},e.prototype.bodyCollision=function(t){var e=t.getComponent(s.default);null!=e&&e.isHurt()&&(e.isBullet()&&u.default.getInstance().removeBullet(e,!0),console.log("\u73a9\u5bb6\u6b7b\u4ea1"),a.EVT.emit("GameCtrlRoleDead"))},e.prototype.actionCallBack=function(t){var e=this;if(!this.isDead&&this.curAction!=t)switch(this.popupFinish(),this.curAction=t,null!=this.slideEffect&&(this.slideEffect.active=!1),this.unscheduleAllCallbacks(),this.roleAnimation.node.position=cc.v2(25,-5),t){case _.ROLEACTION.WALKING:this.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.RUN);break;case _.ROLEACTION.JUMPING:this.roleAnimation.node.position=cc.v2(25,10),this.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.ROLL),this.behavior.getLastAction()==_.ROLEACTION.GLIDEDROPING&&y.default.getInstance().showEffect(m.default.effctRoleGlideDroping,this.node.position.add(cc.v2(25,60)),1,this.roleAnimation.node.scaleX,null,d.default.getNodeRootByIndex(3));break;case _.ROLEACTION.DROPING:case _.ROLEACTION.VERTICAL_DROPING:this.roleAnimation.getAnimasionType()==p.ROLEANIMATIONTYPE.RUN?this.scheduleOnce(function(){e.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.FALL)},.3):this.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.FALL);break;case _.ROLEACTION.GLIDEDROPING:this.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.SLIDE),null!=this.slideEffect?this.setSlideEffectPos():(this.slideEffect=y.default.getInstance().showEffect(m.default.effctRoleSlide,cc.v2(0,120),-1,1,null,this.node),this.slideEffect.setSiblingIndex(0),this.setSlideEffectPos())}},e.prototype.setSlideEffectPos=function(){this.slideEffect.active=!0;var t=20;this.roleAnimation.node.scaleX>0&&(t=0),this.slideEffect.x=t},e.prototype.changeDirCallBack=function(t){this.isDead||(this.roleAnimation.node.scaleX=t)},e.prototype.getCurScaleX=function(){return this.roleAnimation.node.scaleX},e.prototype.dead=function(t,e){var o=this;if(void 0===e&&(e=!1),!this.isDead){app.soundMgr.play(m.default.soundRoleDead);var n=d.default.getRowColByPos(this.node.position);e||app.platformMgr.logEvent("roleDead",{level:t,row:n.row,col:n.col,mapStyle:app.user.getMapStyleIndex()}),this.roleAnimation.pauseAnimasion(),this.behavior.setCurAction(_.ROLEACTION.NONE),this.behavior.setCollisionStatus(!1),this.scheduleOnce(function(){y.default.getInstance().showEffect(m.default.effectRoleDeath,o.node.position.add(cc.v2(.5*o.node.width,.5*o.node.height))),o.roleAnimation.resumAnimasion(),o.roleAnimation.hideAnimasion()},.2),this.isDead=!0}},e.prototype.revive=function(t,e){var o=this,n=this.revivePos;t&&(n=this.getContinuePos());var i=Math.max(3e-4*(this.node.y-n.y),.1);this.node.runAction(cc.moveTo(i,n)),this.scheduleOnce(function(){o.node.position=n,y.default.getInstance().showEffect(m.default.effectRoleRevive,o.node.position.add(cc.v2(.5*o.node.width,.5*o.node.height)),1,1,function(){o.isDead=!1,o.behavior.clearAll(),o.roleAnimation.showAnimasion(),o.behavior.setCollisionStatus(!0),null!=e&&e(),app.soundMgr.play(m.default.soundRoleRevive),o.behavior.setCurAction(_.ROLEACTION.DROPING),I.default.getInstance().resetCheckPoint()})},i)},e.prototype.setRoleInitPos=function(t){this.revivePos=t},e.prototype.resetRevivePos=function(t){this.revivePos=d.default.getBirckPos(t-10,6).addSelf(cc.v2(5,0))},e.prototype.setRoleAnimation=function(t){var e=this.roleAnimation.isShowAnimasion();this.roleAnimation=t;var o=this.curAction;this.curAction=_.ROLEACTION.NONE,this.actionCallBack(o),e?this.roleAnimation.showAnimasion():this.roleAnimation.hideAnimasion()},e.prototype.pause=function(t){this.behavior.pause(t)},e.prototype.setGodStatus=function(){},e.prototype.isGod=function(){return this.isGodTag},e.prototype.popup=function(t,e,o){this.roleAnimation.node.active=!0,this.roleAnimation.palyAnimation(p.ROLEANIMATIONTYPE.ROLL),null==this.popupHelper&&(this.popupHelper=this.node.addComponent(g.default)),this.popupHelper.initPopup(t,e,o,this.popupFinish.bind(this)),0!=t.x&&this.behavior.setMoveDir(t.x>0?1:-1)},e.prototype.popupFinish=function(){null!=this.popupHelper&&(this.popupHelper.destroy(),this.popupHelper=null,this.popupBrick=null,this.behavior.setCurAction(_.ROLEACTION.DROPING))},e.prototype.getContinuePos=function(){var t=d.default.getRowColByPos(this.node.position.add(cc.v2(0,.5*this.node.height))),e=l.default.getInstance().getGroupIndexByRow(t.row),o=l.default.getInstance().getGroupIndexMinRowByGroupIndex(e);return(o-67)%m.default.mapMaxRow==0&&(e=l.default.getInstance().getGroupIndexByRow(o-1),o=l.default.getInstance().getGroupIndexMinRowByGroupIndex(e)),o=Math.max(o,6),d.default.getBirckPos(o+1,6).add(cc.v2(0,.5*m.default.brickWidth))},e.prototype.updateUsingRole=function(){this.slideEffect=null},e.prototype.changeBrickState=function(t,e,o){for(var n=t+1;n<=t+e;n++){var i=l.default.getInstance().getBrickByRowCol(n,6);if(null!=i)if(i.getTypeId()==o)l.BRICKTYPE.BROKENPOWERBRICK==o?i.changeState():l.BRICKTYPE.HALLOFFAMEBRICK==o?i.changeState():l.BRICKTYPE.MOVIEBRICK==o?i.changeState():l.BRICKTYPE.NEONLIGHTBRICK==o&&i.changeState();else if(i.getTypeId()!=l.BRICKTYPE.PROPBRICK)break}},r([D(_.default)],e.prototype,"behavior",void 0),r([D(p.default)],e.prototype,"roleAnimation",void 0),r([O],e)}(cc.Component);o.default=T,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../manager/BrickManager":"BrickManager","../manager/BulletManager":"BulletManager","../manager/CheckPointManager":"CheckPointManager","../manager/EffectManager":"EffectManager","../manager/MysteryHouseManager":"MysteryHouseManager","./Behavior":"Behavior","./Brick":"Brick","./Define":"Define","./Global":"Global","./PopupHelper":"PopupHelper","./RoleAnimation":"RoleAnimation","./elements/BoxBrick":"BoxBrick","./elements/BrokenBrick":"BrokenBrick","./elements/BrokenPowerBrick":"BrokenPowerBrick","./elements/FrozenBrick":"FrozenBrick","./elements/HallOfFameBrick":"HallOfFameBrick","./elements/MovieBrick":"MovieBrick","./elements/NeonLightBrick":"NeonLightBrick","./elements/PopupBrick":"PopupBrick","./elements/ShareBrick":"ShareBrick","./elements/SwitchBrick":"SwitchBrick","./elements/TurntableBrick":"TurntableBrick"}],RollNumber:[function(t,e,o){"use strict";cc._RF.push(e,"64502AaJv5CLZp2Km2AAXPE","RollNumber");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameCallBack=null,e.endCallBack=null,e.isRolling=!1,e.minNum=0,e.maxNum=0,e.curNum=0,e.duringTime=1,e.totalTime=0,e}return i(e,t),e.prototype.update=function(t){if(this.isRolling){this.totalTime=this.totalTime+t;var e=this.totalTime/this.duringTime;e>=1&&(e=1,this.isRolling=!1,null!=this.endCallBack&&this.endCallBack(this.curNum)),this.curNum=this.minNum+(this.maxNum-this.minNum)*e,null!=this.frameCallBack&&this.frameCallBack(Math.floor(this.curNum))}},e.prototype.startRoll=function(t,e,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.duringTime=t,this.minNum=e,this.maxNum=o,this.totalTime=0,this.frameCallBack=n,this.endCallBack=i,this.isRolling=!0},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],RotasionBrick:[function(t,e,o){"use strict";cc._RF.push(e,"143feuPzgBLm5ulBDANrenL","RotasionBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../Define"),c=t("../BrickHurtHelper"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offsetX=0,e.offsetY=0,e.hurtHelper=null,e.delayTime=0,e.dir=0,e.sizeInfo={179:109,180:164},e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),null!=this.hurtHelper&&(this.hurtHelper.removeAllHurts(),this.hurtHelper.destroy(),this.hurtHelper=null),null!=o.extraInfo&&null!=o.extraInfo.hurtInfo&&this.node.addComponent(c.default).initHurts(o.extraInfo.hurtInfo),this.delayTime=o.extraInfo.delayTime,this.dir=o.extraInfo.dir==s.DIR.LEFT?-1:1,this.resetBrick(),this.node.setSiblingIndex(0)},e.prototype.changeStyle=function(){var t=this.icon.node;t.width=this.sizeInfo[this.mapData.gid],t.height=this.sizeInfo[this.mapData.gid],this.node.width=t.width-2,this.node.height=t.height-2,this.node.getComponent(cc.BoxCollider).size.width=this.node.width,this.node.getComponent(cc.BoxCollider).size.height=this.node.height,this.offsetX=.5*(this.node.width-s.default.brickWidth),this.offsetY=.5*(this.node.height-s.default.brickHeight),this.node.x+=this.offsetX,this.node.y+=this.offsetY},e.prototype.resetBrick=function(){for(var t=0;t<this.node.childrenCount;t++)this.node.children[t].stopAllActions(),this.node.children[t].angle=0;this.startAction()},e.prototype.startAction=function(){for(var t=0;t<this.node.childrenCount;t++)this.node.children[t].runAction(cc.sequence(cc.delayTime(this.delayTime),cc.rotateBy(.15,90*this.dir)).repeatForever())},r([p],e)}(a.default));o.default=u,cc._RF.pop()},{"../Brick":"Brick","../BrickHurtHelper":"BrickHurtHelper","../Define":"Define"}],Rotate:[function(t,e,o){"use strict";cc._RF.push(e,"e7b18ucFDtMsor+mzjeExoQ","Rotate");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.node.runAction(cc.rotateBy(1,90).repeatForever())},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ScreenCapture:[function(t,e,o){"use strict";cc._RF.push(e,"1ca6a3eSCJOXJehKwWFtR/F","ScreenCapture");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.getBase64=function(t,e,o,n){this.node.x=t+o/2-cc.winSize.width/2,this.node.y=e+n/2-cc.winSize.height/2,o=Math.floor(o),n=Math.floor(n);var i=this.node.getComponent(cc.Camera);i.enabled=!1,i.cullingMask=4294967295,i.alignWithScreen=!1,i.orthoSize=n/2;var r=new cc.RenderTexture,a=cc.game._renderContext;r.initWithSize(o,n,a.STENCIL_INDEX8),i.targetTexture=r,i.render(cc.director.getScene());var s=r.readPixels(),c=document.createElement("canvas"),l=c.getContext("2d");c.width=r.width,c.height=r.height;for(var p=4*o,u=0;u<n;u++){for(var h=n-1-u,d=l.createImageData(o,1),f=h*o*4,g=0;g<p;g++)d.data[g]=s[f+g];l.putImageData(d,0,u)}return c.toDataURL("image/webp")},r([s,cc._decorator.requireComponent(cc.Camera)],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],SetupDialog:[function(t,e,o){"use strict";cc._RF.push(e,"91ee7is8Y5DULHCqJwg24bL","SetupDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../common/EventMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_sound=null,e.btn_music=null,e.text_url=null,e.from="",e}return i(e,t),e.prototype.onUpdateData=function(t){this.from=t.from,this.changeStatus(this.btn_sound,!1),this.changeStatus(this.btn_music,!1)},e.prototype.onClickClose=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("SetupDialog"),"mainui"==this.from?a.EVT.emit("GameMainPageUIShowUI"):"pause"==this.from&&app.pageMgr.showDialog("PauseDialog")},e.prototype.onClickEvent=function(t){app.soundMgr.playClick();var e=t.target.name;console.log(e),app.soundMgr.playClick(),"btn_sound"==e?(this.changeStatus(this.btn_sound,!0),app.platformMgr.logButtonClickEvent("SetupDialog_sound")):"btn_music"==e&&(this.changeStatus(this.btn_music,!0),app.platformMgr.logButtonClickEvent("SetupDialog_music"))},e.prototype.changeStatus=function(t,e){void 0===e&&(e=!0);var o=t.name,n=!1;e&&("btn_sound"==o?app.soundMgr.setSoundEnabled(!app.soundMgr.isSoundEnable()):"btn_music"==o&&app.soundMgr.setMusicEnabled(!app.soundMgr.isMusicEnable())),"btn_sound"==o?n=app.soundMgr.isSoundEnable():"btn_music"==o&&(n=app.soundMgr.isMusicEnable()),t.children[0].active=n,t.children[1].active=!n},r([l(cc.Node)],e.prototype,"btn_sound",void 0),r([l(cc.Node)],e.prototype,"btn_music",void 0),r([l(cc.Label)],e.prototype,"text_url",void 0),r([c],e)}(BaseDialog);o.default=p,cc._RF.pop()},{"../common/EventMgr":"EventMgr"}],ShareBrick:[function(t,e,o){"use strict";cc._RF.push(e,"682eaNXIBBHzLlvU+2nvfRp","ShareBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=t("../../manager/MysteryHouseManager"),c=t("../Global"),l=t("../Define"),p=t("./WallBrick"),u=t("../../manager/BrickManager"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_startBtn=null,e.collision=null,e.isCanShare=!0,e}return i(e,t),e.prototype.onLoad=function(){null!=this.collision&&this.collision.addComponent(p.default).initBrick(u.brickInfo[u.BRICKTYPE.WALL],new u.MapData(-9999,-9999,u.BRICKTYPE.WALL,0,"",null,0)),this.icon},e.prototype.initBrick=function(e,o){this.isCanShare=!0,this.node_startBtn.stopAllActions(),this.node_startBtn.y=5,t.prototype.initBrick.call(this,e,o),this.node.setSiblingIndex(0)},e.prototype.setCollisionStatus=function(){},e.prototype.changeStyle=function(){},e.prototype.share=function(){this.isCanShare&&(this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){c.default.isCanJump=!1,app.soundMgr.play(l.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),s.default.getInstance().showShareScreen("shareBrick",function(){c.default.isCanJump=!0})},r([f(cc.Node)],e.prototype,"node_startBtn",void 0),r([f(cc.Node)],e.prototype,"collision",void 0),r([d],e)}(a.default);o.default=g,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../../manager/MysteryHouseManager":"MysteryHouseManager","../Brick":"Brick","../Define":"Define","../Global":"Global","./WallBrick":"WallBrick"}],ShareCutScreen:[function(t,e,o){"use strict";cc._RF.push(e,"b131cxfWM9NyKM9IpEcZUux","ShareCutScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_face=null,e.cutScreen=null,e}return i(e,t),e.prototype.initShare=function(t){var e=new Image;e.src=t.base64;var o=new cc.Texture2D;o.initWithElement(e),o.handleLoadedTexture(),this.cutScreen.spriteFrame=new cc.SpriteFrame(o)},e.prototype.getImageDataAsync=function(){var t=this;return new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.sp_face.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([c(cc.Sprite)],e.prototype,"sp_face",void 0),r([c(cc.Sprite)],e.prototype,"cutScreen",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],ShareHeadphone:[function(t,e,o){"use strict";cc._RF.push(e,"7e21cU2Rw5C1I3BkC8m8bWh","ShareHeadphone");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShareBrick"),s=t("../Define"),c=t("../Global"),l=t("../../manager/MysteryHouseManager"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicals=null,e}return i(e,t),e.prototype.initBrick=function(e,o){var n=this;t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.hideLight(),this.unscheduleAllCallbacks(),this.schedule(function(){var t=c.default.getRandom(0,n.musicals.children.length);n.hideLight(),n.musicals.children[t].children[0].active=!0},.1)},e.prototype.hideLight=function(){for(var t=0;t<this.musicals.children.length;t++)this.musicals.children[t].children[0].active=!1},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"headphone"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){c.default.isCanJump=!1,app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),l.default.getInstance().showShareScreen("headphone",function(t){0==t||1==t&&(c.default.isCanJump=!0)})},r([h(cc.Node)],e.prototype,"musicals",void 0),r([u],e)}(a.default);o.default=d,cc._RF.pop()},{"../../manager/MysteryHouseManager":"MysteryHouseManager","../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick"}],ShareHeart:[function(t,e,o){"use strict";cc._RF.push(e,"f04feX32WFEt6jsVlKEZ+FE","ShareHeart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Global"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_bg=null,e.sp_face=null,e.bgs=[],e}return i(e,t),e.prototype.getImageDataAsync=function(){var t=this;return this.sp_bg.spriteFrame=this.bgs[a.default.changeMapStyle(app.user.getMapStyleIndex())-1],new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.sp_face.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([l(cc.Sprite)],e.prototype,"sp_bg",void 0),r([l(cc.Sprite)],e.prototype,"sp_face",void 0),r([l(cc.SpriteFrame)],e.prototype,"bgs",void 0),r([c],e)}(BaseShare);o.default=p,cc._RF.pop()},{"../game/logic/Global":"Global"}],ShareMovie:[function(t,e,o){"use strict";cc._RF.push(e,"61c71JiHz5LiLtlEEJ8qz2E","ShareMovie");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_face=null,e}return i(e,t),e.prototype.getImageDataAsync=function(){var t=this;return new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.sp_face.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([c(cc.Sprite)],e.prototype,"sp_face",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],ShareNeonLightSmall:[function(t,e,o){"use strict";cc._RF.push(e,"e81f3LfBn9FDaYCAjgFYxyb","ShareNeonLightSmall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_face=null,e}return i(e,t),e.prototype.getImageDataAsync=function(){var t=this;return new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.sp_face.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([c(cc.Sprite)],e.prototype,"sp_face",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],ShareNeonLight:[function(t,e,o){"use strict";cc._RF.push(e,"98de8ImLBpGuL8SN9991t31","ShareNeonLight");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manager/MysteryHouseManager"),s=t("../Define"),c=t("../Global"),l=t("./ShareBrick"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicals=null,e}return i(e,t),e.prototype.initBrick=function(e,o){var n=this;t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.hideLight(),this.unscheduleAllCallbacks(),this.schedule(function(){var t=c.default.getRandom(0,n.musicals.children.length);n.hideLight(),n.musicals.children[t].children[0].active=!0},.1)},e.prototype.hideLight=function(){for(var t=0;t<this.musicals.children.length;t++)this.musicals.children[t].children[0].active=!1},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"nenoLight"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){c.default.isCanJump=!1,app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),a.default.getInstance().showShareScreen("nenoLight",function(t){0==t||1==t&&(c.default.isCanJump=!0)})},r([h(cc.Node)],e.prototype,"musicals",void 0),r([u],e)}(l.default);o.default=d,cc._RF.pop()},{"../../manager/MysteryHouseManager":"MysteryHouseManager","../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick"}],ShareRecord:[function(t,e,o){"use strict";cc._RF.push(e,"8d8643EAY5Gb5+4AramzTYu","ShareRecord");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Global"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.headSp=null,e.nodeWallLeft=null,e.nodeWallRight=null,e}return i(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.nodeWallLeft.childrenCount;t++)this.nodeWallLeft.children[t].getComponent(cc.Sprite).spriteFrame=a.default.brickAtlas.getSpriteFrame("brick_1_2");for(t=0;t<this.nodeWallRight.childrenCount;t++)this.nodeWallRight.children[t].getComponent(cc.Sprite).spriteFrame=a.default.brickAtlas.getSpriteFrame("brick_1_1")},e.prototype.getImageDataAsync=function(){var t=this;return this.scoreLabel.string=app.user.getMaxScore().toString(),new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.headSp.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([l(cc.Label)],e.prototype,"scoreLabel",void 0),r([l(cc.Sprite)],e.prototype,"headSp",void 0),r([l(cc.Node)],e.prototype,"nodeWallLeft",void 0),r([l(cc.Node)],e.prototype,"nodeWallRight",void 0),r([c],e)}(BaseShare);o.default=p,cc._RF.pop()},{"../game/logic/Global":"Global"}],ShareScreenDialog:[function(t,e,o){"use strict";cc._RF.push(e,"d5b96D5jn5L/rH4Tmk0+HeU","ShareScreenDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_texture=null,e.node_effect=null,e.nodedmask=null,e.base64=null,e.from="",e}return i(e,t),e.prototype.onUpdateData=function(t){var e=new Image;e.src=t.base64,this.base64=t.base64,this.from=t.from;var o=new cc.Texture2D;o.initWithElement(e),o.handleLoadedTexture(),this.sp_texture.spriteFrame=new cc.SpriteFrame(o),this.sp_texture.node.x=0,"ShareNeonLightSmall"==this.from||("hallOfFame"==this.from?(this.sp_texture.node.scale=1,this.sp_texture.node.y=0):"movie"==this.from?(this.sp_texture.node.scale=1.4,this.sp_texture.node.y=6,this.sp_texture.node.x=-135):"trophy_prefab"==this.from?(this.sp_texture.node.scale=1.4,this.sp_texture.node.y=6,this.sp_texture.node.x=-135):"gamePage_camera_prefab"==this.from?(this.sp_texture.node.scale=1.3,this.sp_texture.node.y=6,this.sp_texture.node.x=-100):"brokenPower_prefab"==this.from||"neonLihgtBrick"==this.from?(this.sp_texture.node.scale=1.4,this.sp_texture.node.y=6,this.sp_texture.node.x=-15):(this.sp_texture.node.scale=.55,this.sp_texture.node.y=-20)),"rankPage_rank"==this.from||"ShareRecord_logo"==this.from||"result_camera"==this.from?this.nodedmask.active=!0:this.nodedmask.active=!1,this.node_effect.stopAllActions(),this.node_effect.angle=-8,this.node_effect.runAction(cc.sequence(cc.rotateTo(1.2,8).easing(cc.easeSineOut()),cc.rotateTo(1.2,-8).easing(cc.easeSineOut())).repeatForever())},e.prototype.onClickShare=function(){var t=this;Utils.shareBase64(this.base64,{from:this.from,text:"hey\uff0c"+app.platformMgr.getPlayerName()+"  is waiting for you\uff01"},function(){t.onClickClose()})},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("ShareScreenDialog")},r([c(cc.Sprite)],e.prototype,"sp_texture",void 0),r([c(cc.Node)],e.prototype,"node_effect",void 0),r([c(cc.Node)],e.prototype,"nodedmask",void 0),r([s],e)}(BaseDialog);o.default=l,cc._RF.pop()},{}],ShareSkin:[function(t,e,o){"use strict";cc._RF.push(e,"6d142LWI95IL7xJEI9HZFf0","ShareSkin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_icon=null,e.sp_face=null,e}return i(e,t),e.prototype.getImageDataAsync=function(t){var e=this;return new Promise(function(o){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(n,i){e.sp_face.spriteFrame=new cc.SpriteFrame(i),cc.loader.loadRes("textures/roles/role"+t.roleId,cc.SpriteFrame,function(t,n){t?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):(e.sp_icon.spriteFrame=n,e.getBase64Data(o))})})})},r([c(cc.Sprite)],e.prototype,"sp_icon",void 0),r([c(cc.Sprite)],e.prototype,"sp_face",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],ShareStage:[function(t,e,o){"use strict";cc._RF.push(e,"63daaJTPbZHgKuLaZweokRO","ShareStage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShareBrick"),s=t("../Define"),c=t("../Global"),l=t("../../manager/MysteryHouseManager"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruit_left=null,e.fruit_right=null,e.text_stage=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.fruit_left.children[0].stopAllActions(),this.fruit_right.children[0].stopAllActions(),this.fruit_left.children[0].runAction(cc.sequence(cc.fadeTo(.5,100),cc.fadeTo(.5,255)).repeatForever()),this.fruit_right.children[0].runAction(cc.sequence(cc.fadeTo(.5,100),cc.fadeTo(.5,255)).repeatForever()),c.default.curLevel>=10?this.text_stage.string="STAGE  "+c.default.curLevel.toString():this.text_stage.string="STAGE 0"+c.default.curLevel.toString(),this.text_stage.node.children[0].getComponent(cc.Label).string=this.text_stage.string},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"light"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){c.default.isCanJump=!1,app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),l.default.getInstance().showShareScreen("light",function(t){0==t||1==t&&(c.default.isCanJump=!0)})},r([h(cc.Node)],e.prototype,"fruit_left",void 0),r([h(cc.Node)],e.prototype,"fruit_right",void 0),r([h(cc.Label)],e.prototype,"text_stage",void 0),r([u],e)}(a.default);o.default=d,cc._RF.pop()},{"../../manager/MysteryHouseManager":"MysteryHouseManager","../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick"}],ShareTV:[function(t,e,o){"use strict";cc._RF.push(e,"731a21scaBGyIQe6VNa7aUk","ShareTV");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShareBrick"),s=t("../Global"),c=t("../Define"),l=t("../../manager/MysteryHouseManager"),p=t("./WallBrick"),u=t("../../manager/BrickManager"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frames=[],e.node_dot=null,e.sp_animation=null,e.collision1=null,e.totalTime=0,e.totalIndex=0,e}return i(e,t),e.prototype.onLoad=function(){null!=this.collision1&&this.collision1.addComponent(p.default).initBrick(u.brickInfo[u.BRICKTYPE.WALL],new u.MapData(-9999,-9999,u.BRICKTYPE.WALL,0,"",null,0)),t.prototype.onLoad.call(this)},e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.x+=.5*c.default.brickWidth,this.icon.node.active=!1,this.node_dot.active=!1,this.sp_animation.node.active=!0},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"TV"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){var t=this;s.default.isCanJump=!1,app.soundMgr.play(c.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),l.default.getInstance().showShareScreen("TV",function(e){0==e?(t.icon.node.active=!0,t.node_dot.active=!0,t.sp_animation.node.active=!1):1==e&&(s.default.isCanJump=!0)})},e.prototype.update=function(t){this.totalTime+=t,this.totalTime>=.1&&(this.totalTime=this.totalTime-.1,this.totalIndex++,this.totalIndex>=this.frames.length&&(this.totalIndex=0),this.sp_animation.spriteFrame=this.frames[this.totalIndex])},r([f(cc.SpriteFrame)],e.prototype,"frames",void 0),r([f(cc.Node)],e.prototype,"node_dot",void 0),r([f(cc.Sprite)],e.prototype,"sp_animation",void 0),r([f(cc.Node)],e.prototype,"collision1",void 0),r([d],e)}(a.default);o.default=g,cc._RF.pop()},{"../../manager/BrickManager":"BrickManager","../../manager/MysteryHouseManager":"MysteryHouseManager","../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick","./WallBrick":"WallBrick"}],ShareTrophy1:[function(t,e,o){"use strict";cc._RF.push(e,"c10eafhaLVIDrNjxYU8fC+V","ShareTrophy1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShareTrophy"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./ShareTrophy":"ShareTrophy"}],ShareTrophyBrick:[function(t,e,o){"use strict";cc._RF.push(e,"7f5fdSdCEhL44JMZEJgxVpp","ShareTrophyBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Define"),s=t("../Global"),c=t("./ShareBrick"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeLeft=null,e.nodeRight=null,e.nodeClose=null,e.nodeOpen=null,e.nodeStars=null,e.trophyId=-1,e.initLeftX=0,e.initRightX=0,e}return i(e,t),e.prototype.onLoad=function(){this.initLeftX=this.nodeLeft.x,this.initRightX=this.nodeRight.x,t.prototype.onLoad.call(this)},e.prototype.initBrick=function(e,o){this.isCanShare=!0,this.node_startBtn.stopAllActions(),this.node_startBtn.y=5,t.prototype.initBrick.call(this,e,o),this.nodeClose.active=!0,this.nodeOpen.active=!0,this.nodeLeft.x=this.initLeftX,this.nodeRight.x=this.initRightX,this.nodeLeft.active=!0,this.nodeRight.active=!0,this.nodeLeft.stopAllActions(),this.nodeRight.stopAllActions(),this.isCanShare=!0;for(var n=0;n<this.nodeStars.childrenCount;n++)this.nodeStars.children[n].stopAllActions(),this.nodeStars.children[n].runAction(cc.sequence(cc.fadeTo(.1*s.default.getRandom(1,5),s.default.getRandom(100,150)),cc.fadeTo(.1*s.default.getRandom(1,5),255),cc.delayTime(.5*s.default.getRandom(1,5))).repeatForever());this.preLoadShare()},e.prototype.setCollisionStatus=function(){},e.prototype.changeStyle=function(){},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"trophy"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){var t=this;s.default.isCanJump=!1,app.soundMgr.play(a.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),this.nodeLeft.runAction(cc.moveBy(1,cc.v2(-500,0))),this.nodeRight.runAction(cc.sequence(cc.moveBy(1,cc.v2(500,0)),cc.callFunc(function(){t.nodeLeft.active=!1,t.nodeRight.active=!1,app.soundMgr.play(a.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){s.default.isCanJump=!0})})))},e.prototype.preLoadShare=function(){1==this.trophyId?cc.loader.loadRes("prefabs/share/ShareTrophy1",function(){}):cc.loader.loadRes("prefabs/share/ShareTrophy",function(){})},r([u(cc.Node)],e.prototype,"nodeLeft",void 0),r([u(cc.Node)],e.prototype,"nodeRight",void 0),r([u(cc.Node)],e.prototype,"nodeClose",void 0),r([u(cc.Node)],e.prototype,"nodeOpen",void 0),r([u(cc.Node)],e.prototype,"nodeStars",void 0),r([u],e.prototype,"trophyId",void 0),r([p],e)}(c.default);o.default=h,cc._RF.pop()},{"../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick"}],ShareTrophy:[function(t,e,o){"use strict";cc._RF.push(e,"94902UDJxxBnYItHqD/BhxG","ShareTrophy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_face=null,e}return i(e,t),e.prototype.getImageDataAsync=function(){var t=this;return new Promise(function(e){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(o,n){t.sp_face.spriteFrame=new cc.SpriteFrame(n),t.getBase64Data(e)})})},r([c(cc.Sprite)],e.prototype,"sp_face",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],ShareWatchTV:[function(t,e,o){"use strict";cc._RF.push(e,"11d07/+onZEWJdtsI3KpjOY","ShareWatchTV");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manager/MysteryHouseManager"),s=t("../Define"),c=t("../Global"),l=t("./ShareBrick"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_dot=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.x+=.5*s.default.brickWidth,this.icon.node.active=!1,this.node_dot.active=!1},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"watchTV"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){var t=this;c.default.isCanJump=!1,app.soundMgr.play(s.default.soundCheckPoint),this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,24))),a.default.getInstance().showShareScreen("watchTV",function(e){0==e?(t.icon.node.active=!0,t.node_dot.active=!0):1==e&&(c.default.isCanJump=!0)})},r([h(cc.Node)],e.prototype,"node_dot",void 0),r([u],e)}(l.default);o.default=d,cc._RF.pop()},{"../../manager/MysteryHouseManager":"MysteryHouseManager","../Define":"Define","../Global":"Global","./ShareBrick":"ShareBrick"}],ShopDialog:[function(t,e,o){"use strict";cc._RF.push(e,"c298083JwJNRZ94wDjfqL8N","ShopDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./items/ShopItem"),s=t("../common/EventMgr"),c=t("../game/logic/Define"),l=t("../game/logic/Global"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_item=null,e.text_roleSkinPiece=null,e.node_itemRoot=null,e.shop_btn=null,e.from="",e}return i(e,t),e.prototype.onLoad=function(){s.EVT.on("ShopDialog_Recharge",this.recharge)},e.prototype.onUpdateData=function(t){this.from=t.from,app.pageMgr.showDialog("TopBarDialog",{closeCallBack:this.onClickClose.bind(this)});for(var e=0;e<this.node_itemRoot.childrenCount;e++)this.node_itemRoot.children[e].getComponent(a.default).initItem(e);this.text_roleSkinPiece.string=app.platformMgr.getPrice(c.default.shopConfigs[c.default.shopRoleSkinId].productId,"$"+c.default.shopConfigs[c.default.shopRoleSkinId].piece),this.setBtnState()},e.prototype.onClickBuyRoleSkin=function(){app.soundMgr.playClick(),this.recharge(c.default.shopRoleSkinId)},e.prototype.recharge=function(t){var e=this;l.default.recharge(c.default.shopConfigs[t].productId,function(o){if(1==o){if(t==c.default.shopRoleSkinId)for(var n=c.default.shopConfigs[t].reward,i=0;i<n.length;i++)app.user.addRoleId(n[i]);else app.user.addCoinNum(c.default.shopConfigs[t].reward,!0,!0);if(t==c.default.shopRoleSkinId)app.pageMgr.showDialog("ShowRewardRoleSkinDialog"),e.scheduleOnce(function(){e.shop_btn.getComponent(cc.Button).interactable=!1,e.changeBntToGray(e.shop_btn,!e.shop_btn.getComponent(cc.Button).interactable)});else{var r=cc.Vec2.ZERO,a=10;0==t?r.x=-230:1==t?a=20:2==t&&(r.x=230,a=30),app.pageMgr.showDialog("FlyGoldEffectDialog",{targetPos:cc.v2(l.default.flyPos.x,l.default.flyPos.y),initPos:r,num:a})}}})},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("ShopDialog"),"result"==this.from?s.EVT.emit("ResultPageOtherPageClose"):"mainui"==this.from&&s.EVT.emit("GameMainPageUIShowUI")},e.prototype.setBtnState=function(){var t=c.default.shopConfigs[c.default.shopRoleSkinId].reward;this.shop_btn.getComponent(cc.Button).interactable=!app.user.isOwnRoleById(t[0]),this.changeBntToGray(this.shop_btn,!this.shop_btn.getComponent(cc.Button).interactable)},e.prototype.changeBntToGray=function(t,e){var o=0;e&&(o=1),t.getComponent(cc.RenderComponent).setMaterial(0,t.getComponent(cc.RenderComponent).getMaterial(o))},r([h(cc.Node)],e.prototype,"node_item",void 0),r([h(cc.Label)],e.prototype,"text_roleSkinPiece",void 0),r([h(cc.Node)],e.prototype,"node_itemRoot",void 0),r([h(cc.Node)],e.prototype,"shop_btn",void 0),r([u],e)}(BaseDialog);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Define":"Define","../game/logic/Global":"Global","./items/ShopItem":"ShopItem"}],ShopItem:[function(t,e,o){"use strict";cc._RF.push(e,"c0393R8fYhAqqn3qoIjd+kP","ShopItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../game/logic/Define"),s=t("../../common/EventMgr"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=-1,e.spendPiece=100,e.text_count=null,e.text_piece=null,e.node_light=null,e.sp_icon=null,e.frames=[],e}return i(e,t),e.prototype.initItem=function(t){this.id=t;var e=a.default.shopConfigs[this.id];this.text_count.string=e.reward,this.text_piece.string=app.platformMgr.getPrice(e.productId,"$"+e.piece),this.sp_icon.spriteFrame=this.frames[this.id],2==this.id&&(this.node_light.scale=.7)},e.prototype.onClickBuy=function(){app.soundMgr.playClick(),s.EVT.emit("ShopDialog_Recharge",this.id)},r([p(cc.Label)],e.prototype,"text_count",void 0),r([p(cc.Label)],e.prototype,"text_piece",void 0),r([p(cc.Node)],e.prototype,"node_light",void 0),r([p(cc.Sprite)],e.prototype,"sp_icon",void 0),r([p(cc.SpriteFrame)],e.prototype,"frames",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../common/EventMgr":"EventMgr","../../game/logic/Define":"Define"}],ShowRewardDialog:[function(t,e,o){"use strict";cc._RF.push(e,"3b867sgWKVLf5sDh3Fwf2XK","ShowRewardDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Global"),s=t("../game/logic/RoleAnimation"),c=t("./widget/RollNumber"),l=t("../common/EventMgr"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_use=null,e.btn_close=null,e.nodeRoot=null,e.nodeLight=null,e.node_coin=null,e.node_diamond=null,e.text_fruitCount=null,e.text_diamondCount=null,e.btn_share=null,e.btn_claim=null,e.btn_video=null,e.materials=[],e.text_rewardCount=null,e.nodeHero=null,e.hideCallBack=null,e.roleId=-9999,e.rollNumber=null,e.rewardCount=0,e.info=null,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on("updateDiamondNum",this.updateDiamondNum,this),cc.systemEvent.on("updateCoinNum",this.updateCoinNum,this),this.rollNumber=this.node.addComponent(c.default)},e.prototype.onUpdateData=function(t){var e=this;this.info=t.info,this.hideCallBack=t.callBack,this.text_fruitCount.string=app.user.getCoinNum().toString(),this.text_diamondCount.string=app.user.getDiamondNum().toString(),this.nodeLight.stopAllActions(),this.nodeLight.runAction(cc.rotateBy(10,360).repeatForever()),this.node_coin.active=!1,this.node_diamond.active=!1,this.text_rewardCount.string="",this.resetBtns(),2==this.info.type?(this.btn_close.active=!0,app.user.isOwnRoleById(this.info.param)||app.user.addRoleId(this.info.param),this.roleId=this.info.param,cc.loader.loadRes("roles/role"+this.info.param,function(t,o){t&&console.log("onUpdateData roles/role"+e.info.param.toString()+"\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25"),null!=e.nodeHero&&(e.nodeHero.destroy(),e.nodeHero=null),e.nodeHero=cc.instantiate(o),e.nodeHero.position=cc.v2(0,270),e.nodeRoot.addChild(e.nodeHero),e.nodeHero.getComponent(s.default).palyAnimation(s.ROLEANIMATIONTYPE.RUN)})):(this.btn_close.active=!1,1==this.info.type?(this.node_diamond.active=!0,app.pageMgr.showDialog("FlyGoldEffectDialog",{targetPos:cc.v2(a.default.flyDiamondPos.x,a.default.flyDiamondPos.y),initPos:cc.v2(0,580),num:20,info:this.info,pause:!0})):(this.node_coin.active=!0,app.pageMgr.showDialog("FlyGoldEffectDialog",{targetPos:cc.v2(a.default.flyPos.x,a.default.flyPos.y),initPos:cc.v2(0,580),num:20,info:this.info,pause:!0})),this.rewardCount=this.info.param,this.text_rewardCount.string="x"+this.rewardCount.toString())},e.prototype.onClickUse=function(){-9999!=this.roleId&&(app.user.setUsingRoleId(this.roleId),this.roleId=-9999),app.pageMgr.hideDialog("ShowRewardDialog"),this.hideCallBack()},e.prototype.onClickShare=function(){Utils.sharePrefab("ShareSkin",{from:"ShareSkin_blue",text:"hey\uff0c"+app.platformMgr.getPlayerName()+"  is waiting for you\uff01",roleId:this.info.param},function(){},function(){})},e.prototype.onClickClaim=function(){this.addReward(this.rewardCount)},e.prototype.onClickVideo=function(){var t=this;app.platformMgr.showVideoAd("showReward",function(){t.addReward(2*t.rewardCount)})},e.prototype.addReward=function(t){var e=this;this.text_rewardCount.string="x"+t.toString(),l.EVT.emit("FlyGoldEffectDialog_FlyGlod"),0==this.info.type?app.user.addCoinNum(t,!0,!0):1==this.info.type&&app.user.addDiamondNum(t,!0,!0),this.scheduleOnce(function(){app.pageMgr.hideDialog("ShowRewardDialog"),e.hideCallBack()},2),this.btn_use.active=!1,this.btn_claim.active=!1,this.btn_share.active=!1,this.btn_video.active=!1},e.prototype.onClickClose=function(){app.pageMgr.hideDialog("ShowRewardDialog"),this.hideCallBack()},e.prototype.onHide=function(){null!=this.nodeHero&&(this.nodeHero.destroy(),this.nodeHero=null)},e.prototype.getMaskOpacity=function(){return 100},e.prototype.updateDiamondNum=function(t){var e=this;if(this.text_diamondCount.node.parent.active=!0,t){var o=Number(this.text_diamondCount.string),n=app.user.getDiamondNum();this.rollNumber.startRoll(.8,o,n,function(t){e.text_diamondCount.string=t.toString()})}else this.text_diamondCount.string=app.user.getDiamondNum().toString();this.text_diamondCount.node.stopAllActions(),this.text_diamondCount.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.text_diamondCount.node.parent.active=!1})))},e.prototype.updateCoinNum=function(t){var e=this;if(t){var o=Number(this.text_fruitCount.string),n=app.user.getCoinNum();this.rollNumber.startRoll(.8,o,n,function(t){e.text_fruitCount.string=t.toString()})}else this.text_fruitCount.string=app.user.getCoinNum().toString()},e.prototype.resetBtns=function(){this.btn_use.active=!1,this.btn_claim.active=!1,this.btn_share.active=!1,this.btn_video.active=!1,0==this.info.type?this.info.param>=50&&app.platformMgr.isVideoLoad()?this.handlerBtnsByStatus(2):this.handlerBtnsByStatus(1):1==this.info.type?app.platformMgr.isVideoLoad()?this.handlerBtnsByStatus(2):this.handlerBtnsByStatus(1):2==this.info.type&&this.handlerBtnsByStatus(3)},e.prototype.handlerBtnsByStatus=function(t){1==t?this.btn_claim.active=!0:2==t?this.btn_claim.active=!0:3==t&&(this.btn_use.active=!0)},r([h(cc.Node)],e.prototype,"btn_use",void 0),r([h(cc.Node)],e.prototype,"btn_close",void 0),r([h(cc.Node)],e.prototype,"nodeRoot",void 0),r([h(cc.Node)],e.prototype,"nodeLight",void 0),r([h(cc.Node)],e.prototype,"node_coin",void 0),r([h(cc.Node)],e.prototype,"node_diamond",void 0),r([h(cc.Label)],e.prototype,"text_fruitCount",void 0),r([h(cc.Label)],e.prototype,"text_diamondCount",void 0),r([h(cc.Node)],e.prototype,"btn_share",void 0),r([h(cc.Node)],e.prototype,"btn_claim",void 0),r([h(cc.Node)],e.prototype,"btn_video",void 0),r([h(cc.Material)],e.prototype,"materials",void 0),r([h(cc.Label)],e.prototype,"text_rewardCount",void 0),r([u],e)}(BaseDialog);o.default=d,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Global":"Global","../game/logic/RoleAnimation":"RoleAnimation","./widget/RollNumber":"RollNumber"}],ShowRewardRoleSkinDialog:[function(t,e,o){"use strict";cc._RF.push(e,"4606eIL/elPCbrVJlhTvv0E","ShowRewardRoleSkinDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../game/logic/Define"),s=t("./items/RewardRoleSkinItem"),c=t("../common/EventMgr"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_items=null,e.items=[],e}return i(e,t),e.prototype.onLoad=function(){c.EVT.on("ShowRewardRoleSkinDialogSelectItem",this.selectItem,this)},e.prototype.onUpdateData=function(){for(var t=a.default.shopConfigs[a.default.shopRoleSkinId].reward,e=0;e<t.length;e++){var o=this.node_items.children[e].getComponent(s.default);o.initItem(t[e]),this.items.push(o)}this.selectItem(t[0])},e.prototype.onClickClose=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("ShowRewardRoleSkinDialog"),app.platformMgr.logButtonClickEvent("ShowRewardRoleSkinDialog_close")},e.prototype.onClickUse=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("ShowRewardRoleSkinDialog"),app.platformMgr.logButtonClickEvent("ShowRewardRoleSkinDialog_use")},e.prototype.selectItem=function(t){for(var e=0;e<this.items.length;e++)this.items[e].setShowSelectTag(this.items[e].getRoleId()==t);app.user.setUsingRoleId(t)},r([u(cc.Node)],e.prototype,"node_items",void 0),r([p],e)}(BaseDialog);o.default=h,cc._RF.pop()},{"../common/EventMgr":"EventMgr","../game/logic/Define":"Define","./items/RewardRoleSkinItem":"RewardRoleSkinItem"}],SlotCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"ce1a6UWb+lNp62vbyzsDcEa","SlotCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./SlotList"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slotAnim=null,e.slotListArr=[],e._sloting=!1,e}return i(e,t),Object.defineProperty(e.prototype,"sloting",{get:function(){return this._sloting},enumerable:!1,configurable:!0}),e.prototype.slotReset=function(){this.slotAnim.play("slotStickDown",.01).wrapMode=cc.WrapMode.Normal,this.slotAnim.sample("slotStickDown"),this.slotAnim.stop(),this.slotListArr.forEach(function(t){t.reset()})},e.prototype.slotExecut=function(t,e){var o=this;void 0===e&&(e=!1),this._sloting=!0,this.slotAnim.play("slotStickDown").wrapMode=cc.WrapMode.Normal,this.slotAnim.once("finished",function(){var n=[],i=a.SlotData.length,r=Utils.randomInt(i);if(Math.random()<.5&&(r=16),e)n=[r,r,r];else{var s=void 0,c=void 0;do{s=Utils.randomInt(i),c=Utils.randomInt(i)}while(r==s||s==c||r==c);n=[r,s,c]}for(var l=function(i){o.slotListArr[i].scorllToIndex(n[i],function(){if(i==o.slotListArr.length-1)if(o.slotAnim.play("slotStickDown").wrapMode=cc.WrapMode.Reverse,e){var n=o.slotListArr[0].getCurrentData().id;o.scheduleOnce(function(){var e="SKIN";n>=200&&(e="COIN"),t({type:e,id:n}),o._sloting=!1},1.5)}else t(),o._sloting=!1},i)},p=0;p<n.length;p++)l(p)})},r([l(cc.Animation)],e.prototype,"slotAnim",void 0),r([l(a.default)],e.prototype,"slotListArr",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./SlotList":"SlotList"}],SlotItem:[function(t,e,o){"use strict";cc._RF.push(e,"49a17patadE5r2Pf//+UA5F","SlotItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ballSprite=null,e._data=null,e.index=0,e}return i(e,t),e.prototype.updateData=function(t,e){this._data=t,this.index=e},r([c(cc.Sprite)],e.prototype,"ballSprite",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SlotList:[function(t,e,o){"use strict";cc._RF.push(e,"2f62a8jnVROooDcnX5Q5UGZ","SlotList");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SlotData=void 0;var a=t("./SlotItem"),s=cc._decorator,c=s.ccclass,l=s.property;o.SlotData=[{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3},{id:200},{id:500},{id:1e3}];var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slotItemPre=null,e.content=null,e.slotItems=[],e.itemHeight=0,e.moveSpeed=0,e.dir=0,e.curIndex=0,e.desY=0,e.finishCb=null,e.isScrolling=!1,e.isIdleScrolling=!1,e}return i(e,t),e.prototype.onLoad=function(){this.slotItems=[],this.itemHeight=this.slotItemPre.data.height,this.moveSpeed=0,this.dir=-1;for(var t=0;t<o.SlotData.length;t++){var e=cc.instantiate(this.slotItemPre);this.content.addChild(e),e.y=-(t-1)*this.itemHeight*this.dir,this.slotItems.push(e.getComponent(a.default)),this.slotItems[t].updateData(o.SlotData[t],t%o.SlotData.length)}},e.prototype.onEnable=function(){this.isScrolling=!1,this.isIdleScrolling=!1},e.prototype.update=function(){if(this.isIdleScrolling||this.isScrolling){if(this.content.y+=this.moveSpeed*this.dir,1==this.dir&&this.slotItems[0].node.y+this.content.y>1.5*this.itemHeight||-1==this.dir&&this.slotItems[0].node.y+this.content.y<1.5*-this.itemHeight){var t=this.slotItems.shift(),e=this.slotItems[this.slotItems.length-1];t.node.y=e.node.y-this.itemHeight*this.dir;var n=(e.index+1)%o.SlotData.length;t.updateData(o.SlotData[n],n),this.slotItems.push(t)}this.isScrolling&&Math.abs(this.content.y-this.desY)<30&&(this.isScrolling=!1,this.content.y=this.desY,this.finishCb())}},e.prototype.setCurrentIndex=function(t){this.curIndex=t,this.content.y=this.itemHeight*t*this.dir;for(var e=0;e<this.slotItems.length;e++){this.slotItems[e].node.y=-(e-1+t)*this.itemHeight*this.dir;var n=(t+e)%o.SlotData.length;this.slotItems[e].updateData(o.SlotData[n],n)}},e.prototype.reset=function(){this.setCurrentIndex(0),this.isScrolling=!1,this.isIdleScrolling=!1},e.prototype.getCurrentData=function(){return o.SlotData[this.curIndex]},e.prototype.getCurrentItem=function(){return this.slotItems[this.curIndex-1]},e.prototype.idleScroll=function(t){this.isIdleScrolling=!0,this.moveSpeed=t||1},e.prototype.scorllToIndex=function(t,e,n){this.curIndex=t,this.moveSpeed=.2*3*this.itemHeight,this.isScrolling=!0,this.isIdleScrolling=!1;var i=1;n&&(i+=n);var r=this.itemHeight*o.SlotData.length,a=Math.floor(this.content.y/r)*r;this.desY=a+this.dir*(i*o.SlotData.length*this.itemHeight+(t-1)*this.itemHeight),this.finishCb=e||function(){}},r([l(cc.Prefab)],e.prototype,"slotItemPre",void 0),r([l(cc.Node)],e.prototype,"content",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./SlotItem":"SlotItem"}],SoundBtn:[function(t,e,o){"use strict";cc._RF.push(e,"9940cI5Xb9PDKd2HXHE3dkc","SoundBtn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offNode=null,e.onNode=null,e}return i(e,t),e.prototype.start=function(){this.offNode=this.node.getChildByName("soundoff"),this.onNode=this.node.getChildByName("soundon"),this.onNode.active=app.soundMgr.isSoundEnable(),this.offNode.active=!app.soundMgr.isSoundEnable()},e.prototype.onClick=function(){app.soundMgr.setSoundEnabled(!app.soundMgr.isSoundEnable()),this.onNode.active=app.soundMgr.isSoundEnable(),this.offNode.active=!app.soundMgr.isSoundEnable(),app.soundMgr.setMusicEnabled(app.soundMgr.isSoundEnable()),app.soundMgr.playClick()},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],SoundMgr:[function(t,e){"use strict";cc._RF.push(e,"de82eVHIAxMaYRcoADlPkn8","SoundMgr");var o="backgroud",n={},i={},r={},a={},s=function(){function t(){}return t.prototype.register=function(t,e){a[t]=e},t.prototype.setSoundEnabled=function(t){if(!t){for(var e in i)this.stop(i[e]);i={}}app.user.soundEnable=t},t.prototype.setMusicEnabled=function(t){app.user.musicEnable=t,t?this.playMusic():this.stopMuisc()},t.prototype.isSoundEnable=function(){return app.user.soundEnable},t.prototype.isMusicEnable=function(){return app.user.musicEnable},t.prototype.preLoad=function(t,e){n[t]||a[t]||(n[t]=!0,cc.loader.loadRes("sounds/"+t,function(o,i){n[t]=!1,o?cc.log(o):a[t]=i,e&&e(o,i)}))},t.prototype.playMusic=function(){},t.prototype.stopMuisc=function(){null!=r[o]&&(cc.audioEngine.stop(r[o]),r[o]=void 0)},t.prototype.playClick=function(){this.play("btn_click")},t.prototype.play=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=1),this.isSoundEnable()&&null!=t&&""!=t&&!n[t]){if(null==e&&(e=!1),a[t])return i[t]=cc.audioEngine.play(a[t],e,o),i[t];n[t]=!0,cc.loader.loadRes("sounds/"+t,function(r,s){n[t]=!1,r?cc.log(r):(a[t]=s,i[t]=cc.audioEngine.play(a[t],e,o))})}},t.prototype.stop=function(t){cc.audioEngine.stop(i[t])},t}();window.SoundMgr=s,cc._RF.pop()},{}],SpecialBrickManager:[function(t,e,o){"use strict";cc._RF.push(e,"19d39PfGlxAV5OxRrKk916O","SpecialBrickManager");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../logic/NodePoolHelper"),r=t("../logic/specialBricks/AvatarBrick"),a=t("../logic/Global"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function t(){this.nodePoolHelper=new i.default,this.specialBrickArr=[]}var e;return e=t,t.getInstance=function(){return this.instance},t.prototype.createAvatarBrick=function(t,e){var o=this;RankUtils.getWorldRankData(function(n){var i=null,s=n.concat(),c=app.platformMgr.getPlayerID();if(-1==e){for(var l=0;l<s.length;l++)if(c==s[l].playerId){i=s[l];break}}else{var p=[];for(l=0;l<s.length;l++)c!=s[l].playerId&&s[l].score==e&&p.push(s[l]);var u=a.default.getRandom(0,p.length);p.length>0&&(i=p[u])}if(null!=i){var h=o.nodePoolHelper.getPool("avatarBrick");if(null==h)cc.loader.loadRes("prefabs/others/avatarBrick",cc.Prefab,function(e,n){if(!e){var a=cc.instantiate(n).getComponent(r.default);a.initAtatarBrick(t,0,i),o.specialBrickArr.push(a)}});else{var d=h.getComponent(r.default);d.initAtatarBrick(t,0,i),o.specialBrickArr.push(d)}}})},t.prototype.removeAvatarBrick=function(t){for(var e=0;e<this.specialBrickArr.length;e++){var o=this.specialBrickArr[e];o.row<t&&(this.nodePoolHelper.putPool(o.node),o.node.removeFromParent())}},t.instance=new e,n([c],t)}());o.default=l,cc._RF.pop()},{"../logic/Global":"Global","../logic/NodePoolHelper":"NodePoolHelper","../logic/specialBricks/AvatarBrick":"AvatarBrick"}],SpecialBrick:[function(t,e,o){"use strict";cc._RF.push(e,"4305afwqflAbrbZkxyXl0/k","SpecialBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e.row=0,e.col=0,e}return i(e,t),r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],SpinItem:[function(t,e,o){"use strict";cc._RF.push(e,"5bf2edxazJFzKFN4bYWSz0D","SpinItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpinItem=void 0;var a=t("../../../game/logic/Global"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countLabel=null,e.icon=null,e.initIconY=0,e}return i(e,t),e.prototype.onLoad=function(){this.initIconY=this.icon.node.y},e.prototype.onUpdateData=function(t){var e=this;2==t.type?(this.countLabel.string="",cc.loader.loadRes("textures/roles/role"+t.param,cc.SpriteFrame,function(t,o){t?console.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):(e.icon.spriteFrame=o,e.icon.node.y=e.initIconY-12)})):3==t.type||4==t.type?(this.countLabel.string="",this.icon.spriteFrame=a.default.commonAtlas.getSpriteFrame(t.res),4==t.type&&(this.icon.node.y=this.initIconY-12,this.icon.node.x=-10)):(this.countLabel.string="x"+t.param,this.icon.spriteFrame=a.default.commonAtlas.getSpriteFrame(t.res))},e.prototype.breathEffect=function(t){this.icon.node.stopAllActions(),this.icon.node.scale=1,this.icon.node.runAction(cc.sequence(cc.scaleTo(.4,1.5,1.5),cc.scaleTo(.4,1,1),cc.callFunc(t)))},r([l(cc.Label)],e.prototype,"countLabel",void 0),r([l(cc.Sprite)],e.prototype,"icon",void 0),r([c],e)}(cc.Component);o.SpinItem=p,cc._RF.pop()},{"../../../game/logic/Global":"Global"}],SpinTurntable:[function(t,e,o){"use strict";cc._RF.push(e,"1fecdiNpANLALh7Lc/kgTi9","SpinTurntable");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./SpinItem"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinItemPrefab=null,e.panRotationNode=null,e.arrowNode=null,e.items=[],e.cfg=null,e.angle=0,e.arrowAngle=0,e.maxSpeed=30,e.duration=2,e.acc=10,e.wheelState=0,e.curSpeed=5,e.spinTime=0,e.defaultAngle=22.5,e.gearAngle=45,e.finalAngle=0,e.targetId=0,e.decAngle=1080,e.spinNodeSpeed=0,e.spinNodeRotationMax=-20,e.spinNodeMoveTm=0,e.lastSpinMoveTm=0,e.spinNodeMoveStatus=!1,e.curDecAngle=0,e.cb=null,e.allWeight=0,e.autoSpeed=10,e}return i(e,t),e.prototype.onLoad=function(){for(var t=0;t<8;t++){var e=cc.instantiate(this.spinItemPrefab);e.angle=360*(t+.5)/8,this.items.push(e.getComponent(a.SpinItem)),this.panRotationNode.addChild(e)}},e.prototype.initRewardCfg=function(t){this.cfg=t;for(var e=0;e<8;e++)this.items[e].onUpdateData(t[e]),this.allWeight+=t[e].weight},e.prototype.spin=function(t){app.platformMgr.logButtonClickEvent("turntable_spin"),this.curDecAngle=this.decAngle,this.wheelState=1,this.curSpeed=5,this.spinTime=0,this.duration=1e6;for(var e=0,o=Math.floor(Math.random()*this.allWeight),n=0,i=0;i<this.cfg.length;i++)if(o<(n+=this.cfg[i].weight)){e=i;break}this.cb=t,this.targetId=e+1,this.finalAngle=(360-this.targetId*this.gearAngle+this.defaultAngle+(40*Math.random()-20))%360},e.prototype.update=function(t){if((this.arrowAngle<0||this.spinNodeSpeed<0)&&(this.spinNodeMoveTm<=0?(this.spinNodeSpeed+=50*t,this.spinNodeMoveTm=0):this.spinNodeMoveTm-=t,this.spinNodeSpeed<-1&&(this.spinNodeSpeed=-1),this.arrowAngle+=this.spinNodeSpeed,this.arrowAngle>0&&(this.arrowAngle=0),this.arrowAngle<-40&&(this.arrowAngle=-40),this.arrowNode.angle=-this.arrowAngle),0!==this.wheelState){if(-1==this.wheelState)return this.angle-=this.autoSpeed*t,void(this.panRotationNode.angle=this.angle);1==this.wheelState?(this.spinTime+=t,this.angle-=this.curSpeed,this.angle<0&&(this.angle+=360),this.curSpeed<=this.maxSpeed?this.curSpeed+=this.acc*t:(this.curSpeed=this.maxSpeed,this.spinTime>=this.duration&&Math.abs(this.angle-this.finalAngle)<=this.maxSpeed+1&&(this.angle=this.finalAngle,this.maxSpeed=this.curSpeed,this.wheelState=2))):2==this.wheelState&&(this.curSpeed=.2*this.curSpeed,this.angle-=this.curSpeed,this.curSpeed<=.1&&(this.curSpeed=0,this.wheelState=0,this.cb&&this.cb())),this.lastSpinMoveTm-=t,Math.floor(this.angle/this.gearAngle)!=Math.floor((this.angle+this.curSpeed)%360/this.gearAngle)?this.lastSpinMoveTm<=0?(this.lastSpinMoveTm=.2,this.spinNodeSpeed=-this.curSpeed,this.spinNodeMoveTm=.15,this.spinNodeMoveStatus=!1):this.spinNodeMoveStatus=!0:this.lastSpinMoveTm<=0&&this.spinNodeMoveStatus&&(this.lastSpinMoveTm=.2,this.spinNodeSpeed=-this.curSpeed,this.spinNodeMoveTm=.15,this.spinNodeMoveStatus=!1),this.panRotationNode.angle=this.angle}},e.prototype.stopSpin=function(){this.curSpeed=0,this.wheelState=0,this.arrowNode.angle=0,this.arrowAngle=0,this.spinNodeSpeed=0;for(var t=0,e=7;e>=0;e--)if(this.angle>360*e/8){t=7-e;break}this.cb&&this.cb(t,this.items[t])},e.prototype.resetTurntable=function(){this.curSpeed=0,this.wheelState=-1,this.arrowNode.angle=0,this.arrowAngle=0,this.spinNodeSpeed=0},e.prototype.getSpinSpeed=function(){return this.curSpeed},r([l(cc.Prefab)],e.prototype,"spinItemPrefab",void 0),r([l(cc.Node)],e.prototype,"panRotationNode",void 0),r([l(cc.Node)],e.prototype,"arrowNode",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./SpinItem":"SpinItem"}],SwitchBrick:[function(t,e,o){"use strict";cc._RF.push(e,"60c6e94kwBP3K1p4nsOLc2o","SwitchBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.checkPoint=null,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o)},e.prototype.setCheckPoint=function(t){this.checkPoint=t},e.prototype.changeStatus=function(){this.checkPoint.gameSave(this.mapData.subType)},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../Brick":"Brick"}],TestButton:[function(t,e,o){"use strict";cc._RF.push(e,"be500lUL/dNlaGiMqA7PQYQ","TestButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onBtnClick=function(){app.pageMgr.showPage("ResultPage",{score:1e3})},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],TestShare:[function(t,e,o){"use strict";cc._RF.push(e,"fc9ecXvzBJHG6oqsvt9rv8T","TestShare");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},r([s],e)}(BaseShare));o.default=c,cc._RF.pop()},{}],TopBarDialog:[function(t,e,o){"use strict";cc._RF.push(e,"bb22b+E19hC0qAt2QRIZRP3","TopBarDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./widget/RollNumber"),s=t("../common/EventMgr"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text_fruitCount=null,e.node_icon=null,e.node_up=null,e.node_down=null,e.node_whiteEffect=null,e.closeCallBack=null,e.rollNumber=null,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on("updateCoinNum",this.updateCoinNum,this),this.rollNumber=this.text_fruitCount.node.addComponent(a.default),s.EVT.on("TopBarDialog_WhiteEffect",this.whiteEffect,this)},e.prototype.onUpdateData=function(t){this.node_whiteEffect.active=!1,null!=t&&(this.closeCallBack=t.closeCallBack,"ResultPage"==t.from?(this.node_down.children[0].active=!1,this.node_down.children[1].active=!1):(this.node_down.children[0].active=!0,this.node_down.children[1].active=!1)),this.text_fruitCount.string=app.user.getCoinNum().toString()},e.prototype.onClickClose=function(){app.soundMgr.playClick(),app.pageMgr.hideDialog("TopBarDialog"),null!=this.closeCallBack&&this.closeCallBack()},e.prototype.updateCoinNum=function(t){var e=this;if(this.node.active)if(t){var o=Number(this.text_fruitCount.string),n=app.user.getCoinNum();this.rollNumber.startRoll(2,o,n,function(t){e.text_fruitCount.string=t})}else this.text_fruitCount.string=app.user.getCoinNum().toString()},e.prototype.whiteEffect=function(t){var e=this;this.node_whiteEffect.active=!0,this.node_whiteEffect.opacity=0,this.node_whiteEffect.stopAllActions(),this.node_whiteEffect.runAction(cc.sequence(cc.fadeIn(.15),cc.fadeOut(.15),cc.callFunc(function(){t(e.node),e.node_whiteEffect.active=!1})))},r([p(cc.Label)],e.prototype,"text_fruitCount",void 0),r([p(cc.Node)],e.prototype,"node_icon",void 0),r([p(cc.Node)],e.prototype,"node_up",void 0),r([p(cc.Node)],e.prototype,"node_down",void 0),r([p(cc.Node)],e.prototype,"node_whiteEffect",void 0),r([l],e)}(BaseDialog);o.default=u,cc._RF.pop()},{"../common/EventMgr":"EventMgr","./widget/RollNumber":"RollNumber"}],TopHallOfFameBrick:[function(t,e,o){"use strict";cc._RF.push(e,"4e1d381E/JBQ7+kutJPI10A","TopHallOfFameBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Define"),s=t("./ShareBrick"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_lights=null,e.avatats=null,e}return i(e,t),e.prototype.initBrick=function(e,o){var n=this;t.prototype.initBrick.call(this,e,o),this.node.x+=.5*a.default.brickWidth,this.node_startBtn.y=-30,RankUtils.getWorldRankData(function(t){for(var e=t.concat(),o=0;o<n.avatats.childrenCount;o++)n.avatats.children[o].active=!1;n.avatats.children[0].active=!0;for(var i=1,r=function(t){var o=e[t];if(o.playerId==app.platformMgr.getPlayerID())return"continue";var r=n.avatats.children[i];if(i++,null==r)return"break";r.active=!0,o.photo&&cc.loader.load(o.photo,function(t,e){r.children[0].children[0].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)})},a=0;a<e.length&&"break"!==r(a);a++);})},e.prototype.share=function(){this.isCanShare&&(app.platformMgr.logEvent("headCamera",{from:"topHallOfFame"}),this.isCanShare=!1,this.startBtnAction())},e.prototype.startBtnAction=function(){this.node_startBtn.runAction(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-10))),app.soundMgr.play(a.default.soundCamera),app.pageMgr.whiteScreenEffect(function(){})},r([p(cc.Node)],e.prototype,"node_lights",void 0),r([p(cc.Node)],e.prototype,"avatats",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../Define":"Define","./ShareBrick":"ShareBrick"}],TournamentDialog:[function(t,e,o){"use strict";cc._RF.push(e,"8eafb/DslhLopBYUGO1Vz8+","TournamentDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ranks=[],e.contentNode=null,e.createNode=null,e.shareNode=null,e.headSp=null,e.head1Sp=null,e.nameLabel=null,e.scoreLabel=null,e.itemNodes=[],e.headSps=[],e.rankLabels=[],e.nameLabels=[],e.scoreLabels=[],e}return i(e,t),e.prototype.onEnable=function(){this.contentNode.opacity=0,this.contentNode.y=-50,this.contentNode.stopAllActions(),this.contentNode.runAction(cc.fadeIn(.25)),this.contentNode.runAction(cc.moveTo(.25,cc.v2()))},e.prototype.onUpdateData=function(t){var e=this,o=t.rankData;if(this.createNode.active=!0,this.shareNode.active=!1,this.ranks=[],1==o.length)this.createNode.active=!0,this.shareNode.active=!1,this.ranks.push(o[0]),this.nameLabel.string=o[0].nickName,this.scoreLabel.string=o[0].score,cc.loader.load(o[0].photo,function(t,o){e.headSp.spriteFrame=new cc.SpriteFrame(o),e.head1Sp.spriteFrame=new cc.SpriteFrame(o)});else{if(this.createNode.active=!1,this.shareNode.active=!0,o.length<=4)this.ranks=o;else{var n=0,i=o.length-1,r=o.findIndex(function(t){return t.playerId==app.platformMgr.getPlayerID()});(n=r+3<=i?r:i-3)<0&&(n=0);for(var a=0;a<4;a++)this.ranks.push(t.rankData[n+a])}var s=function(t){var o=t<c.ranks.length;c.itemNodes[t].active=o,o&&(c.rankLabels[t].string=c.ranks[t].rank,c.nameLabels[t].string=c.ranks[t].nickName,c.scoreLabels[t].string=c.ranks[t].score,cc.loader.load(c.ranks[t].photo||"1",function(o,n){e.headSps[t].spriteFrame=new cc.SpriteFrame(n)}))},c=this;for(a=0;a<4;a++)s(a)}},e.prototype.onShare=function(){var t=this;app.platformMgr.logEvent("tournament_share"),Utils.sharePrefab("TournamentShare",{from:"result_tournament",text:"hey\uff0c"+app.platformMgr.getPlayerName()+"  is waiting for you\uff01",ranks:this.ranks,score:1,photo:"1"},function(){},function(){t.onClose()})},e.prototype.onClose=function(){app.pageMgr.hideDialog("TournamentDialog")},r([c(cc.Node)],e.prototype,"contentNode",void 0),r([c(cc.Node)],e.prototype,"createNode",void 0),r([c(cc.Node)],e.prototype,"shareNode",void 0),r([c(cc.Sprite)],e.prototype,"headSp",void 0),r([c(cc.Sprite)],e.prototype,"head1Sp",void 0),r([c(cc.Label)],e.prototype,"nameLabel",void 0),r([c(cc.Label)],e.prototype,"scoreLabel",void 0),r([c([cc.Node])],e.prototype,"itemNodes",void 0),r([c([cc.Sprite])],e.prototype,"headSps",void 0),r([c([cc.Label])],e.prototype,"rankLabels",void 0),r([c([cc.Label])],e.prototype,"nameLabels",void 0),r([c([cc.Label])],e.prototype,"scoreLabels",void 0),r([s],e)}(BaseDialog);o.default=l,cc._RF.pop()},{}],TournamentShare:[function(t,e,o){"use strict";cc._RF.push(e,"33d0eOxoWJFl4GXJOzZZuUy","TournamentShare");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headSp=null,e.itemNodes=[],e.headSps=[],e.nameLabels=[],e.rankLabels=[],e.scoreLabels=[],e}return i(e,t),e.prototype.getImageDataAsync=function(t){var e=this;return new Promise(function(o){cc.loader.load(app.platformMgr.getPlayerPhoto(),function(n,i){e.headSp.spriteFrame=new cc.SpriteFrame(i);var r=t.ranks,a=0;console.log("rankDatas",r);for(var s=function(t){var n=t<r.length;e.itemNodes[t].active=n,n&&(e.rankLabels[t].string=r[t].rank,e.nameLabels[t].string=r[t].nickName,e.scoreLabels[t].string=r[t].score,cc.loader.load(r[t].photo||"1",function(n,i){e.headSps[t].spriteFrame=new cc.SpriteFrame(i),a++,console.log(a,r.length),a===r.length&&e.getBase64Data(o)}))},c=0;c<4;c++)s(c)})})},r([c(cc.Sprite)],e.prototype,"headSp",void 0),r([c([cc.Node])],e.prototype,"itemNodes",void 0),r([c([cc.Sprite])],e.prototype,"headSps",void 0),r([c([cc.Label])],e.prototype,"nameLabels",void 0),r([c([cc.Label])],e.prototype,"rankLabels",void 0),r([c([cc.Label])],e.prototype,"scoreLabels",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],TurnTableCfg:[function(t,e,o){"use strict";cc._RF.push(e,"0a291TtOE5DxJWgRNHl5SeN","TurnTableCfg"),Object.defineProperty(o,"__esModule",{value:!0}),o.TurnTableCfg=void 0,o.TurnTableCfg={1:{cost:50,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:10,weight:10,res:"turntable_diamondMore"},2:{type:2,param:1,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:100,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:100,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},2:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:0,param:200,weight:10,res:"turntable_bananaMore"},2:{type:0,param:10,weight:10,res:"turntable_carrot"},3:{type:1,param:2,weight:10,res:"turntable_diamond"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:0,param:2,weight:10,res:"turntable_banana"},6:{type:0,param:20,weight:10,res:"turntable_peach"},7:{type:1,param:20,weight:10,res:"turntable_diamondMore"}}},3:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:43,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},4:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:20,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},21:{cost:50,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:10,weight:10,res:"turntable_diamondMore"},2:{type:2,param:47,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:100,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:100,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},22:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:0,param:200,weight:10,res:"turntable_bananaMore"},2:{type:0,param:10,weight:10,res:"turntable_carrot"},3:{type:1,param:2,weight:10,res:"turntable_diamond"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:0,param:2,weight:10,res:"turntable_banana"},6:{type:0,param:20,weight:10,res:"turntable_peach"},7:{type:1,param:20,weight:10,res:"turntable_diamondMore"}}},23:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:44,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},24:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:16,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},31:{cost:50,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:10,weight:10,res:"turntable_diamondMore"},2:{type:2,param:29,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:100,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:100,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},32:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:0,param:200,weight:10,res:"turntable_bananaMore"},2:{type:0,param:10,weight:10,res:"turntable_carrot"},3:{type:1,param:2,weight:10,res:"turntable_diamond"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:0,param:2,weight:10,res:"turntable_banana"},6:{type:0,param:20,weight:10,res:"turntable_peach"},7:{type:1,param:20,weight:10,res:"turntable_diamondMore"}}},33:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:46,weight:10,res:"turntable_diamondMore"},2:{type:2,param:29,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},34:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:32,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},41:{cost:50,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:10,weight:10,res:"turntable_diamondMore"},2:{type:2,param:33,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:100,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:100,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},42:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:0,param:200,weight:10,res:"turntable_bananaMore"},2:{type:0,param:10,weight:10,res:"turntable_carrot"},3:{type:1,param:2,weight:10,res:"turntable_diamond"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:0,param:2,weight:10,res:"turntable_banana"},6:{type:0,param:20,weight:10,res:"turntable_peach"},7:{type:1,param:20,weight:10,res:"turntable_diamondMore"}}},43:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:45,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},44:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:38,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},51:{cost:50,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:10,weight:10,res:"turntable_diamondMore"},2:{type:2,param:9,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:100,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:100,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},52:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:0,param:200,weight:10,res:"turntable_bananaMore"},2:{type:0,param:10,weight:10,res:"turntable_carrot"},3:{type:1,param:2,weight:10,res:"turntable_diamond"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:0,param:2,weight:10,res:"turntable_banana"},6:{type:0,param:20,weight:10,res:"turntable_peach"},7:{type:1,param:20,weight:10,res:"turntable_diamondMore"}}},53:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:40,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}},54:{cost:100,data:{0:{type:4,param:0,weight:10,res:"turntable_door"},1:{type:1,param:20,weight:10,res:"turntable_diamondMore"},2:{type:2,param:14,weight:10,res:""},3:{type:0,param:10,weight:10,res:"turntable_banana"},4:{type:0,param:200,weight:10,res:"turntable_peachMore"},5:{type:1,param:2,weight:10,res:"turntable_diamond"},6:{type:0,param:200,weight:10,res:"turntable_bananaMore"},7:{type:0,param:10,weight:10,res:"turntable_carrot"}}}},cc._RF.pop()},{}],TurntableBrick:[function(t,e,o){"use strict";cc._RF.push(e,"e7c3bUk5B1L/aVLnZPK9vNw","TurntableBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../Brick"),c=t("../../../common/components/turntable/SpinTurntable"),l=t("../../../data/TurnTableCfg"),p=t("../Define"),u=t("../Global"),h=t("../../../common/EventMgr"),d=t("../../manager/MysteryHouseManager"),f=cc._decorator,g=f.ccclass,y=f.property;(function(t){t[t.NONE=0]="NONE",t[t.ROLLING=1]="ROLLING",t[t.ROLLEND=2]="ROLLEND"})(a||(a={}));var m=function(){function t(){this.lightNode=null,this.isLight=!1,this.intervalTime=.05,this.toltalTime=0}return t.prototype.initLightEffect=function(t,e){this.lightNode=t,this.isLight=e,this.toltalTime=0,this.intervalTime=.2,this.resetLight()},t.prototype.updateTime=function(t){this.toltalTime+=t,this.toltalTime>=this.intervalTime&&(this.toltalTime=this.toltalTime-this.intervalTime,this.isLight=!this.isLight,this.resetLight())},t.prototype.resetLight=function(){this.lightNode.children[0].active=!this.isLight,this.lightNode.children[1].active=this.isLight},t.prototype.setIntervalTime=function(t){this.intervalTime=t},t}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_startBtn=null,e.node_light=null,e.node_lightRoot=null,e.node_stopTag=null,e.node_startTag=null,e.node_fruit=null,e.node_video=null,e.text_spend=null,e.node_curLight=null,e.sp_avatar=null,e.curStatus=a.NONE,e.spinTurntable=null,e.lightEffects=[],e.lightIndex=0,e.isCanStrike=!1,e.posX=-9999,e.datas=[],e.spendCoin=0,e.isVideoTag=!1,e.totalTime=0,e.intervalTime=.2,e.circleRadius=215,e}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o),this.node.setSiblingIndex(0),this.spinTurntable=this.node.getComponent(c.default),this.resetTturntableBrick(o.extraInfo),this.sp_avatar.node.parent.active=!1},e.prototype.resetTturntableBrick=function(t){this.mapData.extraInfo=t,this.curStatus=a.NONE,this.datas=l.TurnTableCfg[this.mapData.extraInfo.subType].data,this.spendCoin=l.TurnTableCfg[this.mapData.extraInfo.subType].cost,this.isVideoTag=!1,this.text_spend.string=this.spendCoin.toString(),this.spinTurntable.initRewardCfg(this.datas),this.node.x=this.node.x+.5*p.default.brickWidth,this.node_curLight.active=!0,this.createLights(),this.lightIndex=this.lightEffects.length-1,this.node_curLight.position=this.lightEffects[this.lightIndex].lightNode.position,this.isCanStrike=!0,this.updateShowStatus(!1),this.spinTurntable.resetTurntable()},e.prototype.setCollisionStatus=function(){},e.prototype.changeStyle=function(){},e.prototype.update=function(t){for(var e=0;e<this.lightEffects.length;e++)this.lightEffects[e].updateTime(t);this.totalTime+=t*this.spinTurntable.getSpinSpeed()*.3,this.totalTime>=this.intervalTime&&(this.lightIndex--,this.lightIndex<0&&(this.lightIndex=this.lightEffects.length-1),this.totalTime=this.totalTime-this.intervalTime,this.node_curLight.position=this.lightEffects[this.lightIndex].lightNode.position)},e.prototype.spin=function(){var t=this;this.isCanStrike&&(this.curStatus!=a.ROLLING?this.isVideoTag?app.platformMgr.isVideoLoad()?(app.platformMgr.logEvent("turntable",{type:"video"}),app.platformMgr.showVideoAd("turntable",function(){t.startRoll()})):h.EVT.emit("showPrompt","Video load failed"):this.curStatus==a.NONE&&(app.user.isCoinEnough(this.spendCoin)?(app.user.addCoinNum(-1*this.spendCoin),this.startRoll(),app.platformMgr.logEvent("turntable",{type:"coin"})):(h.EVT.emit("showPrompt","Not have enough coin"),this.node_startBtn.stopAllActions(),this.node_startBtn.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-15)),cc.moveTo(.1,cc.v2(this.node_startBtn.x,-44)))))):this.stopRoll())},e.prototype.startRoll=function(){var t=this;app.soundMgr.play(p.default.soundCheckPoint),this.startBtnAction(),this.curStatus==a.NONE&&(this.curStatus=a.ROLLING,this.isCanStrike=!1,this.spinTurntable.spin(function(e,o){u.default.isCanJump=!1,t.curStatus=a.NONE;var n=t.datas[e].type;if(2==n&&app.user.isOwnRoleById(t.datas[e].param))return h.EVT.emit("showPrompt","Already has the role!"),void(u.default.isCanJump=!0);o.breathEffect(function(){t.scheduleOnce(function(){3==n?(t.sp_avatar.node.parent.active=!0,app.platformMgr.logEvent("turntableCamera",{id:t.mapData.extraInfo.subType}),d.default.getInstance().shareCutScreen("turntable",function(){t.sp_avatar.node.parent.active=!1}),u.default.isCanJump=!0):4==n?(d.default.getInstance().getHouseState()!=d.MYSTERUYHOUSE_STATUS.MIDDLE?d.default.getInstance().changeToMiddleStatus():h.EVT.emit("showPrompt","The door is open!"),u.default.isCanJump=!0):app.pageMgr.showDialog("ShowRewardDialog",{info:t.datas[e],callBack:function(){u.default.isCanJump=!0}})},.5)})}))},e.prototype.stopRoll=function(){app.platformMgr.logEvent("turntableStop"),app.soundMgr.play(p.default.soundCheckPoint),this.startBtnAction(),this.spinTurntable.stopSpin(),this.curStatus,a.NONE},e.prototype.createLights=function(){if(0==this.node_lightRoot.childrenCount)for(var t=0;t<16;t++){var e=Math.PI/180*360/16*t,o=this.circleRadius*Math.cos(e),n=this.circleRadius*Math.sin(e),i=cc.instantiate(this.node_light);this.node_lightRoot.addChild(i),i.position=cc.v2(o,n);var r=new m;r.initLightEffect(i,t%2==0),this.lightEffects.push(r)}},e.prototype.startBtnAction=function(){var t=this;this.node_startBtn.stopAllActions(),this.node_startBtn.runAction(cc.sequence(cc.moveTo(.1,cc.v2(this.node_startBtn.x,-15)),cc.delayTime(1),cc.moveTo(.1,cc.v2(this.node_startBtn.x,-44)),cc.callFunc(function(){t.isCanStrike=!0,t.updateShowStatus(!0)})))},e.prototype.updateShowStatus=function(t){this.curStatus==a.NONE?(this.node_startTag.active=!0,this.node_stopTag.active=!1,t&&(this.isVideoTag=!this.isVideoTag),this.isVideoTag||app.user.isCoinEnough(this.spendCoin)||(this.isVideoTag=!0),this.isVideoTag&&!app.platformMgr.isVideoLoad()&&(this.isVideoTag=!1),this.isVideoTag=!1,this.node_fruit.active=!0,this.node_video.active=!1):(this.node_startTag.active=!1,this.node_stopTag.active=!0)},r([y(cc.Node)],e.prototype,"node_startBtn",void 0),r([y(cc.Node)],e.prototype,"node_light",void 0),r([y(cc.Node)],e.prototype,"node_lightRoot",void 0),r([y(cc.Node)],e.prototype,"node_stopTag",void 0),r([y(cc.Node)],e.prototype,"node_startTag",void 0),r([y(cc.Node)],e.prototype,"node_fruit",void 0),r([y(cc.Node)],e.prototype,"node_video",void 0),r([y(cc.Label)],e.prototype,"text_spend",void 0),r([y(cc.Node)],e.prototype,"node_curLight",void 0),r([y(cc.Sprite)],e.prototype,"sp_avatar",void 0),r([g],e)}(s.default);o.default=v,cc._RF.pop()},{"../../../common/EventMgr":"EventMgr","../../../common/components/turntable/SpinTurntable":"SpinTurntable","../../../data/TurnTableCfg":"TurnTableCfg","../../manager/MysteryHouseManager":"MysteryHouseManager","../Brick":"Brick","../Define":"Define","../Global":"Global"}],User:[function(t,e){"use strict";cc._RF.push(e,"9ef7cgF/+JKt4BZltNF2vcL","User");var o=Math.floor((Date.now()/1e3-1577088e3)/604800),n=Date.now(),i={name:"instant game",createTime:n,lastLoginTime:n,isNewUser:!0,soundEnable:!0,musicEnable:!0,lastSendFriendsTime:0,guide:{},groupContexts:[],aabb:!1,payInfo:{},knifeAdInfo:{},shotcutCreated:!1,maxScore:0,coinNum:0,diamondNum:0,skins:[1],usingSkin:1,roleIds:[7],usingRoleId:7,roleVideoInfo:{1:0},giftLv:0,giftProfress:0,mapStyleIndex:1,testMapStyleIndex:-1,dayKey:"",guideFinish:!1,newGameCount:0,weeklyData:{index:o,score:0},passedLevelInfo:{mapStyleIndex:1,level:0,state:0},maps:[1],useMap:1,levelInfo:{1:0}};console.log("weekindex =======",Date.now(),o);var r=0,a=Date.now(),s=function(){function t(t){this.app=t}return t.prototype.get=function(t){return i[t]},t.prototype.set=function(t,e){i[t]=e,this.save()},Object.defineProperty(t.prototype,"soundEnable",{get:function(){return this.get("soundEnable")},set:function(t){this.set("soundEnable",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"musicEnable",{get:function(){return this.get("musicEnable")},set:function(t){this.set("musicEnable",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shotcutCreated",{get:function(){return this.get("shotcutCreated")},set:function(t){this.set("shotcutCreated",t)},enumerable:!1,configurable:!0}),t.prototype.onUserDataLoad=function(){i.createTime!=i.lastLoginTime&&Date.now()-i.lastLoginTime<432e5&&app.platformMgr.logEvent("login12",{hour:Math.ceil((Date.now()-i.lastLoginTime)/36e5)}),a=i.lastLoginTime,i.lastLoginTime=Date.now(),this.save()},t.prototype.loadDataAsync=function(){var t=this;return new Promise(function(e,o){t.app.platformMgr.getDataAsync("data_"+GameName).then(function(o){Object.keys(o).forEach(function(t){i[t]=o[t]}),t.onUserDataLoad(),e()}).catch(function(t){console.log("loadDataAsync err",t),o()})})},t.prototype.saveDataAsync=function(){var t=this;return new Promise(function(e,o){t.app.platformMgr.setDataAsync("data_"+GameName,i).then(function(){e()}).catch(function(t){console.log("saveDataAsync err",t),o()})})},t.prototype.clearDataAsync=function(){var t=this;return new Promise(function(e,o){t.app.platformMgr.setDataAsync("data_"+GameName,{}).then(function(){e()}).catch(function(t){console.log("clearDataAsync err",t),o()})})},t.prototype.markRemoveAd=function(){i.aabb=!0,this.save()},t.prototype.isAdRemoved=function(){return i.aabb},t.prototype.save=function(){this.saveDataAsync()},t.prototype.getVersion=function(){var t=0;if(!this.app.platformMgr.isFB)return t;var e=this.app.platformMgr.getPlayerID();try{t=parseInt(e.substring(e.length-2,e.length))}catch(o){return t}return t},t.prototype.isNewUser=function(){return Date.now()-i.createTime<6e5},t.prototype.getKnifeAdNumber=function(t){var e=t+"";return i.knifeAdInfo[e]?i.knifeAdInfo[e]:0},t.prototype.setKnifeAdNumber=function(t){i.knifeAdInfo[t]?i.knifeAdInfo[t]++:i.knifeAdInfo[t]=1,this.save()},t.prototype.canDailyDateSend=function(){return Date.now()-i.lastSendFriendsTime>864e5&&(i.lastSendFriendsTime=Date.now(),this.save(),!0)},t.prototype.getLoginDayCount=function(){return Math.floor((Date.now()-i.createTime)/864e5)},t.prototype.getCreateTime=function(){return i.createTime},t.prototype.getGroupContexts=function(){return i.groupContexts},t.prototype.addGroupId=function(t){i.groupContexts.indexOf(t)>=0||(i.groupContexts.push(t),this.save())},t.prototype.getMaxScore=function(){return i.maxScore},t.prototype.getLastLoginTime=function(){return a},t.prototype.resetSessionScore=function(){r=0},t.prototype.setScore=function(t){console.log("setScore  maxScore ================================= "+t),window.lastScore=t,t>r&&(app.platformMgr.postSessionScore(t),r=t,app.startContextTick()),i.weeklyData.index<o&&(i.weeklyData.index=o,i.weeklyData.score=0);var e=!1;RankUtils.updateScore(t,{usingSkin:i.usingRoleId}),t>i.maxScore&&(i.maxScore=t,e=!0),e&&this.save()},t.prototype.getCoinNum=function(){return i.coinNum},t.prototype.setCoinNum=function(t){i.coinNum=t,cc.systemEvent.emit("updateCoinNum"),this.save()},t.prototype.addCoinNum=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),i.coinNum+=t,cc.systemEvent.emit("updateCoinNum",o),e&&this.save()},t.prototype.isCoinEnough=function(t){return i.coinNum>=t},t.prototype.getDiamondNum=function(){return i.diamondNum},t.prototype.setDiamondNum=function(t){i.diamondNum=t,cc.systemEvent.emit("updateDiamondNum"),this.save()},t.prototype.addDiamondNum=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),i.diamondNum+=t,cc.systemEvent.emit("updateDiamondNum",o),e&&this.save()},t.prototype.isDiamondEnough=function(t){return i.diamondNum>=t},t.prototype.addSkins=function(t){i.skins.push(t),this.save()},t.prototype.getSkins=function(){return i.skins},t.prototype.isOwnSkin=function(t){for(var e=0;e<i.skins.length;e++)if(t==i.skins[e])return!0;return!1},t.prototype.addRoleId=function(t){i.roleIds.push(t),this.save()},t.prototype.getRoleIds=function(){return i.roleIds},t.prototype.isOwnRoleById=function(t){for(var e=0;e<i.roleIds.length;e++)if(t==i.roleIds[e])return!0;return!1},t.prototype.setUsingRoleId=function(t){var e=i.usingRoleId;i.usingRoleId=t,i.usingRoleId!=e&&cc.systemEvent.emit("updateUsingRole"),this.save()},t.prototype.getUsingRoleId=function(){return i.usingRoleId},t.prototype.checkSkinOwn=function(t){return-1!=i.skins.indexOf(t)},t.prototype.setUsingSkin=function(t){var e=i.usingSkin;i.usingSkin=t,i.usingSkin!=e&&cc.systemEvent.emit("updateUsingSkin"),this.save()},t.prototype.getUsingSkin=function(){return i.usingSkin},t.prototype.addNewGameCount=function(){i.newGameCount++},t.prototype.getNewGameCount=function(){return i.newGameCount},t.prototype.getRecordByType=function(t){var e=0;switch(t){case 1:e=i.maxScore;break;case 2:e=i.newGameCount;break;case 3:e=this.getLoginDayCount()}return e},t.prototype.updatePassedLevel=function(t,e){i.passedLevelInfo.level=t,i.passedLevelInfo.state=e,this.save()},t.prototype.getLastLevel=function(){return i.passedLevelInfo.mapStyleIndex!=i.mapStyleIndex&&(i.passedLevelInfo.level=0,i.passedLevelInfo.state=0,i.passedLevelInfo.mapStyleIndex=i.mapStyleIndex),i.passedLevelInfo.level},t.prototype.getLastLevelInfo=function(){return i.passedLevelInfo},t.prototype.guideFinish=function(){i.guideFinish=!0,this.save()},t.prototype.isGuideFinished=function(){return i.guideFinish},t.prototype.getGiftLv=function(){return i.giftLv},t.prototype.setGiftLv=function(t){i.giftLv=t,i.giftProfress=0,this.save()},t.prototype.getGiftProgress=function(){return i.giftProfress},t.prototype.setGiftProgress=function(t){i.giftProfress=t,this.save()},t.prototype.isOwnMapById=function(t){for(var e=0;e<i.maps.length;e++)if(i.maps[e]==t)return!0;return!1},t.prototype.addNewMapId=function(t){i.maps.push(t),this.save()},t.prototype.getUseMapId=function(){return i.useMap},t.prototype.setUseMapId=function(t){i.useMap=t,this.save()},t.prototype.getLevelPlayRow=function(t){for(var e in i.levelInfo)if(Number(e)==t)return i.levelInfo[e];return 0},t.prototype.setLevelPlayRow=function(t,e){i.levelInfo[t]=e,this.save()},t.prototype.getMapStyleIndex=function(){return i.mapStyleIndex<1||i.mapStyleIndex>5?(console.log("setMapStyleIndex data.mapStyleIndex error "+i.mapStyleIndex),1):i.mapStyleIndex},t.prototype.setMapStyleIndex=function(t){t<1||t>5?console.log("setMapStyleIndex mapStyleIndex error "+t):(i.mapStyleIndex=t,this.save())},t.prototype.getTestMapStyleIndex=function(){return i.testMapStyleIndex},t.prototype.setTestMapStyleIndex=function(t){i.testMapStyleIndex=t,this.save()},t.prototype.getDayKey=function(){return i.dayKey},t.prototype.setDayKey=function(t){i.dayKey=t,this.save()},t.prototype.getRoleSkinVideoCount=function(t){for(var e in i.levelInfo)if(Number(e)==t)return i.levelInfo[e];return 0},t.prototype.addRoleSkinVideoCount=function(t,e){void 0===e&&(e=1);var o=this.getRoleSkinVideoCount(t);return o=e+o,i.levelInfo[t]=o,this.save(),o},t}();window.User=s,cc._RF.pop()},{}],Utils:[function(t,e){"use strict";cc._RF.push(e,"e71dayzzuBGVbfkGiUSsJ29","Utils");var o={},n=[],i=0,r=function(){function t(){}return t.randomInt=function(t){return Math.floor(Math.random()*t)},t.getRandom=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t.getSystemTime=function(){return(new Date).getTime()},t.randomSelectOne=function(t,e){if(void 0===e&&(e=!1),e){var o=this.randomInt(t.length);return t.splice(o,1)[0]}return t[this.randomInt(t.length)]},t.formatTime=function(t){var e=t%60<10?":0"+t%60:":"+t%60;return e=((t=Math.floor(t/60))%60<10?":0"+t%60:":"+t%60)+e,((t=Math.floor(t/60))<10?"0"+t:t)+e},t.formatTimeHMS=function(t){var e="";return t>=3600&&(e+=Math.floor(t/3600).toString()+"h"),t>=60&&(e+=Math.floor(t%3600/60).toString()+"m"),e+(Math.floor(t%60).toString()+"s")},t.formatTimeMS=function(t){var e=t%60<10?":0"+t%60:":"+t%60;return((t=Math.floor(t/60))%60<10?"0"+t%60:""+t%60)+e},t.sendMessage=function(t,e,n){console.log("sendMessage"),cc.loader.loadRes("prefabs/share/"+t,function(i,r){if(i)return console.log(i),void(n&&n());var a=o[t];a||(a=cc.instantiate(r)),a.getComponent(t).getImageDataAsync(e).then(function(t){e.image=t,app.platformMgr.sendMessageToFriend(e,function(t){console.log("sendMessage===",t),n&&n(t)})}).catch(function(t){cc.director.getScene().removeChild(a),console.log(t)})})},t.shareImage=function(t,e,o){var n=document.createElement("canvas");n.id="captureCanvas",cc.loader.loadRes(t,function(t,i){if(t)o&&o();else{var r=i.getHtmlElementObj();n.width=r.width,n.height=r.height,n.getContext("2d").drawImage(r,0,0,r.width,r.height);var a=n.toDataURL("image/webp");e.image=a,app.platformMgr.shareGame(e,function(t){o&&o(t)})}})},t.sharePrefab=function(t,e,n,i){console.log("sharePrefab",t),cc.loader.loadRes("prefabs/share/"+t,function(r,a){if(r)return console.log(r),void(n&&n());var s=o[t];s||(s=cc.instantiate(a)),s.getComponent(t).getImageDataAsync(e).then(function(t){e.image=t,i&&i(),app.platformMgr.shareGame(e,function(t){n&&n(t)})}).catch(function(t){cc.director.getScene().removeChild(s),console.log(t)})})},t.sharePrefab1=function(t,e,n,i,r){void 0===r&&(r=null),console.log("sharePrefab",t),cc.loader.loadRes("prefabs/share/"+t,function(i,a){if(i)return console.log(i),void(n&&n());var s=o[t];s||(s=cc.instantiate(a)),s.getComponent(t).initShare(r),s.getComponent(t).getImageDataAsync(e).then(function(t){app.pageMgr.showDialog("ShareScreenDialog",{base64:t,from:e.from})}).catch(function(t){cc.director.getScene().removeChild(s),console.log(t)})})},t.shareNode=function(t,e,o,n){console.log("shareNode");var i=cc.instantiate(t),r=i.getComponent("BaseShare");null==r&&(r=i.addComponent(BaseShare)),r.getImageDataAsync(e).then(function(t){console.log("s000000"),console.log(t),e.image=t,n&&n(),app.platformMgr.shareGame(e,function(t){o&&o(t)})}).catch(function(t){cc.director.getScene().removeChild(i),console.log(t)})},t.shareNodeNew=function(t,e,o,n,i,r,a){void 0===i&&(i=!0),void 0===r&&(r=0),void 0===a&&(a=0);var s=t.getComponent(cc.Camera);s.enabled=!1,s.cullingMask=4294967295;var c=new cc.RenderTexture,l=cc.game._renderContext,p=Math.floor(t.width),u=Math.floor(t.height);c.initWithSize(p,u,l.STENCIL_INDEX8),s.targetTexture=c,s.render(t.parent);var h=c.readPixels(),d=document.createElement("canvas"),f=d.getContext("2d");d.width=c.width,d.height=c.height;for(var g=4*p,y=r;y<u-a;y++){for(var m=u-1-y,v=f.createImageData(p,1),_=m*p*4,b=0;b<g;b++)v.data[b]=h[_+b];f.putImageData(v,0,y)}var R=d.toDataURL("image/webp");return e.image=R,i&&app.platformMgr.shareGame(e,function(t){o&&o(t)}),R},t.shareBase64=function(t,e,o){e.image=t,app.platformMgr.shareGame(e,function(t){o&&o(t)}),console.log(t)},t.getScreenPicture=function(t){var e=t.getComponent(cc.Camera);e.enabled=!1,e.cullingMask=4294967295;var o=new cc.RenderTexture,n=cc.game._renderContext,i=Math.floor(t.width),r=Math.floor(t.height);return o.initWithSize(i,r,n.STENCIL_INDEX8),o},t.getScreenBase64=function(t,e,o,n){var i=cc.find("Canvas/ScreenCapture");return console.log(i),i.getComponent("ScreenCapture").getBase64(t,e,o,n)},t.challengeFriends=function(t,e){var o=app.pageMgr,n=app.platformMgr;o.showLoading();var i=app.user.getGroupContexts(),r=function(t){o.hideLoading(),e(t)},a=function(e){e?n.chooseFriends(t,r):r(e)};n.getConnectedPlayersAsync().then(function(e){console.log(e);var o=e.length;if(o+i.length==0)n.chooseFriends(t,r);else if(Math.floor(Math.random()*(i.length+o))<i.length){var s=i[Math.floor(Math.random()*i.length)];n.playWithGroup(t,s,r)}else{var c=e[Math.floor(Math.random()*e.length)];"SOLO"!=FBInstant.context.getType()&&e.length>1?app.platformMgr.getContextPlayers(function(o){for(var i=null,r=0;r<o.length;r++)if(o[r].getID()!=FBInstant.player.getID()){i=o[r].getID();break}for(;i&&i==c.getID()&&e.length>1;)c=e[Math.floor(Math.random()*e.length)];n.playWithFriend(t,c.getID(),a)}):n.playWithFriend(t,c.getID(),a)}})},t.challengeFriends2=function(e,o){var r=this;if(app.isInTournament)o();else{var a=app.pageMgr,s=app.platformMgr;a.showLoading();var c=function(t){a.hideLoading(),o(t)},l=function(t){t&&"SAME_CONTEXT"!=t.code?s.chooseFriends(e,c):c(t)};if(n.length>0){var p=n[i];++i>=n.length&&(i=0),"empty"==p.type?s.chooseFriends(e,c):"tournament"==p.type?s.playWithGroup(e,p.id,function(t){l(t)}):"friend"==p.type&&s.playWithFriend(e,p.id,l)}else n.push({type:"tournament",id:"3527252963986574"}),s.getConnectedPlayersAsync().then(function(i){var a=i.length,s=app.user.getGroupContexts();if(a+s.length==0)n.push({type:"empty"}),n.push({type:"empty"});else{for(var c=[],l=[],p=0;p<a;p++)c.push({type:"friend",id:i[p].getID()});for(p=0;p<s.length;p++)"3527252963986574"!=s[p]&&l.push({type:"tournament",id:s[p]});for(;c.length+l.length>0;)c.length>0&&n.push(t.randomSelectOne(c,!0)),l.length>0&&n.push(t.randomSelectOne(l,!0))}r.challengeFriends2(e,o)})}},t.challengeFriends3=function(e,o){var r=this;if(app.isInTournament)o();else{var a=app.pageMgr,s=app.platformMgr;a.showLoading();var c=function(t){a.hideLoading(),o(t)},l=function(t){c(t)};if(n.length>0){var p=n[i];++i>=n.length&&(i=0),"empty"==p.type?s.chooseFriends(e,c):"tournament"==p.type?s.playWithGroup(e,p.id,function(t){l(t)}):"friend"==p.type&&s.playWithFriend(e,p.id,l)}else n.push({type:"tournament",id:"3527252963986574"}),s.getConnectedPlayersAsync().then(function(i){var a=i.length,s=app.user.getGroupContexts();if(a+s.length==0)n.push({type:"empty"}),n.push({type:"empty"});else{for(var c=[],l=[],p=0;p<a;p++)c.push({type:"friend",id:i[p].getID()});for(p=0;p<s.length;p++)"3527252963986574"!=s[p]&&l.push({type:"tournament",id:s[p]});for(;c.length+l.length>0;)c.length>0&&n.push(t.randomSelectOne(c,!0)),l.length>0&&n.push(t.randomSelectOne(l,!0))}r.challengeFriends3(e,o)})}},t.getRaceRound=function(){return 3},t.checkIsHand=function(t){return!(t>300)},t.formatMoney=function(t){return t<1e3?t.toString():(t/1e3).toFixed(3).replace(".",",")},t}();window.Utils=r,cc._RF.pop()},{}],VsResult:[function(t,e,o){"use strict";cc._RF.push(e,"ecfe5/tl+VFgpnnHdQlTaUQ","VsResult");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headSp1=null,e.score1=null,e.headSp2=null,e.score2=null,e.guan1Node=null,e.guan2Node=null,e.winName=null,e}return i(e,t),e.prototype.getImageDataAsync=function(t){var e=this;return this.winName.string=t.winName,new Promise(function(o){t.score1>t.score2?cc.loader.load(t.photo1,function(t,n){e.headSp1.spriteFrame=new cc.SpriteFrame(n),e.getBase64Data(o)}):cc.loader.load(t.photo2,function(t,n){e.headSp1.spriteFrame=new cc.SpriteFrame(n),e.getBase64Data(o)})})},r([c(cc.Sprite)],e.prototype,"headSp1",void 0),r([c(cc.Label)],e.prototype,"score1",void 0),r([c(cc.Sprite)],e.prototype,"headSp2",void 0),r([c(cc.Label)],e.prototype,"score2",void 0),r([c(cc.Node)],e.prototype,"guan1Node",void 0),r([c(cc.Node)],e.prototype,"guan2Node",void 0),r([c(cc.Label)],e.prototype,"winName",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],VsStart:[function(t,e,o){"use strict";cc._RF.push(e,"7bc92t/Lp9GcqC3pFHXsBj6","VsStart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headSp=null,e.scoreLabel=null,e.nameLabel=null,e}return i(e,t),e.prototype.getImageDataAsync=function(t){var e=this;return this.scoreLabel.string=t.score,this.nameLabel.string=app.platformMgr.getPlayerName(),new Promise(function(o){null!=t.photo?cc.loader.load(t.photo,function(t,n){e.headSp.spriteFrame=new cc.SpriteFrame(n),e.getBase64Data(o)}):e.getBase64Data(o)})},r([c(cc.Sprite)],e.prototype,"headSp",void 0),r([c(cc.Label)],e.prototype,"scoreLabel",void 0),r([c(cc.Label)],e.prototype,"nameLabel",void 0),r([s],e)}(BaseShare);o.default=l,cc._RF.pop()},{}],WXHelper:[function(t,e){"use strict";cc._RF.push(e,"11cea6TSBRLd5fu/ZJbJmOZ","WXHelper");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});t("PlatHelper");var i=window.wx_banner_id,r=null,a=window.wx_video_id,s=null,c=!1,l=window.wx,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){},e.prototype.loadAsync=function(){},e.prototype.isInterstitialLoad=function(){return!1},e.prototype.showInterstitialAd=function(){},e.prototype.loadVideoAsync=function(t,e){return void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),console.log("WXHelper loadVideoAsync",a),null==s&&(console.log("wx.createRewardedVideoAd",{adUnitId:a}),(s=l.createRewardedVideoAd({adUnitId:a})).onLoad(function(){c=!0,t&&t(),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")})),c||(console.log("rewardedVideoAd.load(",{adUnitId:a}),s.load().then(function(){console.log("rewardedVideoAd.load(",{adUnitId:a}),c=!0})),c},e.prototype.isVideoLoad=function(){return c},e.prototype.showVideoAd=function(t,e,o){var n=this;void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),s.onClose(function(t){t&&t.isEnded||void 0===t?(e&&e(),e=null):(o&&o(),o=null)}),s.show().then(function(){return c=!1}).catch(function(){s.load().then(function(){return n.loadVideoAsync()})})},e.prototype.isBannerLoad=function(){return!1},e.prototype.showBannerAd=function(t,e,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===o&&(o=null);var n=window.wx.getSystemInfoSync();r||(r=l.createBannerAd({adUnitId:i,style:{left:t||40,top:e||n.windowHeight-100,width:o||n.windowWidth-80}})),r.show()},e.prototype.hideBannerAd=function(){r&&(r.destroy(),r=null)},e.prototype.autoShowAd=function(){},e.prototype.logEvent=function(t,e,o){void 0===e&&(e={}),void 0===o&&(o=1),l.aldSendEvent&&l.aldSendEvent(t,e)},e.prototype.getDataAsync=function(t){return new Promise(function(e){var o=cc.sys.localStorage.getItem(t);e(o?JSON.parse(o):{})})},e.prototype.setDataAsync=function(t,e){return new Promise(function(o){cc.sys.localStorage.setItem(t,JSON.stringify(e)),o()})},e}(PlatHelper);window.WXHelper=p,cc._RF.pop()},{PlatHelper:"PlatHelper"}],WallBrick:[function(t,e,o){"use strict";cc._RF.push(e,"629a9QJTLhJQaCsWn383j2D","WallBrick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Brick"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initBrick=function(e,o){t.prototype.initBrick.call(this,e,o)},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../Brick":"Brick"}],ZhuanpanBtn:[function(t,e,o){"use strict";cc._RF.push(e,"9738946yoZKkp5LjAth56RR","ZhuanpanBtn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.node.on("click",this.onOpen.bind(this))},e.prototype.onOpen=function(){this.node.active=!1},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],md5:[function(require,module,exports){(function(process,global){"use strict";cc._RF.push(module,"ddd8bMHAjdPgJvb37qRFeH7","md5"),function(){function t(t){if(t)d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d,this.buffer8=l;else if(a){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var r="input is invalid type",e="object"==typeof window,i=e?window:{};i.JS_MD5_NO_WINDOW&&(e=!1);var s=!e&&"object"==typeof self,h=!i.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;h?i=global:s&&(i=self);var f=!i.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,o="function"==typeof define&&define.amd,a=!i.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,n="0123456789abcdef".split(""),u=[128,32768,8388608,-2147483648],y=[0,8,16,24],c=["hex","array","digest","buffer","arrayBuffer","base64"],p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),d=[],l;if(a){var A=new ArrayBuffer(68);l=new Uint8Array(A),d=new Uint32Array(A)}!i.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!a||!i.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var b=function(e){return function(o){return new t(!0).update(o)[e]()}},v=function(){var e=b("hex");h&&(e=w(e)),e.create=function(){return new t},e.update=function(t){return e.create().update(t)};for(var o=0;o<c.length;++o){var n=c[o];e[n]=b(n)}return e},w=function w(t){var e=eval("require('crypto')"),i=eval("require('buffer').Buffer"),s=function(o){if("string"==typeof o)return e.createHash("md5").update(o,"utf8").digest("hex");if(null==o)throw r;return o.constructor===ArrayBuffer&&(o=new Uint8Array(o)),Array.isArray(o)||ArrayBuffer.isView(o)||o.constructor===i?e.createHash("md5").update(new i(o)).digest("hex"):t(o)};return s};t.prototype.update=function(t){if(!this.finalized){var e,o=typeof t;if("string"!==o){if("object"!==o)throw r;if(null===t)throw r;if(a&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||a&&ArrayBuffer.isView(t)))throw r;e=!0}for(var n,i,s=0,c=t.length,l=this.blocks,p=this.buffer8;s<c;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)if(a)for(i=this.start;s<c&&i<64;++s)p[i++]=t[s];else for(i=this.start;s<c&&i<64;++s)l[i>>2]|=t[s]<<y[3&i++];else if(a)for(i=this.start;s<c&&i<64;++s)(n=t.charCodeAt(s))<128?p[i++]=n:n<2048?(p[i++]=192|n>>6,p[i++]=128|63&n):n<55296||n>=57344?(p[i++]=224|n>>12,p[i++]=128|n>>6&63,p[i++]=128|63&n):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),p[i++]=240|n>>18,p[i++]=128|n>>12&63,p[i++]=128|n>>6&63,p[i++]=128|63&n);else for(i=this.start;s<c&&i<64;++s)(n=t.charCodeAt(s))<128?l[i>>2]|=n<<y[3&i++]:n<2048?(l[i>>2]|=(192|n>>6)<<y[3&i++],l[i>>2]|=(128|63&n)<<y[3&i++]):n<55296||n>=57344?(l[i>>2]|=(224|n>>12)<<y[3&i++],l[i>>2]|=(128|n>>6&63)<<y[3&i++],l[i>>2]|=(128|63&n)<<y[3&i++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),l[i>>2]|=(240|n>>18)<<y[3&i++],l[i>>2]|=(128|n>>12&63)<<y[3&i++],l[i>>2]|=(128|n>>6&63)<<y[3&i++],l[i>>2]|=(128|63&n)<<y[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=u[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},t.prototype.hash=function(){var t,e,o,n,i,r,a=this.blocks;this.first?e=((e=((t=((t=a[0]-680876937)<<7|t>>>25)-271733879<<0)^(o=((o=(-271733879^(n=((n=(-1732584194^2004318071&t)+a[1]-117830708)<<12|n>>>20)+t<<0)&(-271733879^t))+a[2]-1126478375)<<17|o>>>15)+n<<0)&(n^t))+a[3]-1316259209)<<22|e>>>10)+o<<0:(t=this.h0,e=this.h1,o=this.h2,e=((e+=((t=((t+=((n=this.h3)^e&(o^n))+a[0]-680876936)<<7|t>>>25)+e<<0)^(o=((o+=(e^(n=((n+=(o^t&(e^o))+a[1]-389564586)<<12|n>>>20)+t<<0)&(t^e))+a[2]+606105819)<<17|o>>>15)+n<<0)&(n^t))+a[3]-1044525330)<<22|e>>>10)+o<<0),e=((e+=((t=((t+=(n^e&(o^n))+a[4]-176418897)<<7|t>>>25)+e<<0)^(o=((o+=(e^(n=((n+=(o^t&(e^o))+a[5]+1200080426)<<12|n>>>20)+t<<0)&(t^e))+a[6]-1473231341)<<17|o>>>15)+n<<0)&(n^t))+a[7]-45705983)<<22|e>>>10)+o<<0,e=((e+=((t=((t+=(n^e&(o^n))+a[8]+1770035416)<<7|t>>>25)+e<<0)^(o=((o+=(e^(n=((n+=(o^t&(e^o))+a[9]-1958414417)<<12|n>>>20)+t<<0)&(t^e))+a[10]-42063)<<17|o>>>15)+n<<0)&(n^t))+a[11]-1990404162)<<22|e>>>10)+o<<0,e=((e+=((t=((t+=(n^e&(o^n))+a[12]+1804603682)<<7|t>>>25)+e<<0)^(o=((o+=(e^(n=((n+=(o^t&(e^o))+a[13]-40341101)<<12|n>>>20)+t<<0)&(t^e))+a[14]-1502002290)<<17|o>>>15)+n<<0)&(n^t))+a[15]+1236535329)<<22|e>>>10)+o<<0,e=((e+=((n=((n+=(e^o&((t=((t+=(o^n&(e^o))+a[1]-165796510)<<5|t>>>27)+e<<0)^e))+a[6]-1069501632)<<9|n>>>23)+t<<0)^t&((o=((o+=(t^e&(n^t))+a[11]+643717713)<<14|o>>>18)+n<<0)^n))+a[0]-373897302)<<20|e>>>12)+o<<0,e=((e+=((n=((n+=(e^o&((t=((t+=(o^n&(e^o))+a[5]-701558691)<<5|t>>>27)+e<<0)^e))+a[10]+38016083)<<9|n>>>23)+t<<0)^t&((o=((o+=(t^e&(n^t))+a[15]-660478335)<<14|o>>>18)+n<<0)^n))+a[4]-405537848)<<20|e>>>12)+o<<0,e=((e+=((n=((n+=(e^o&((t=((t+=(o^n&(e^o))+a[9]+568446438)<<5|t>>>27)+e<<0)^e))+a[14]-1019803690)<<9|n>>>23)+t<<0)^t&((o=((o+=(t^e&(n^t))+a[3]-187363961)<<14|o>>>18)+n<<0)^n))+a[8]+1163531501)<<20|e>>>12)+o<<0,e=((e+=((n=((n+=(e^o&((t=((t+=(o^n&(e^o))+a[13]-1444681467)<<5|t>>>27)+e<<0)^e))+a[2]-51403784)<<9|n>>>23)+t<<0)^t&((o=((o+=(t^e&(n^t))+a[7]+1735328473)<<14|o>>>18)+n<<0)^n))+a[12]-1926607734)<<20|e>>>12)+o<<0,e=((e+=((r=(n=((n+=((i=e^o)^(t=((t+=(i^n)+a[5]-378558)<<4|t>>>28)+e<<0))+a[8]-2022574463)<<11|n>>>21)+t<<0)^t)^(o=((o+=(r^e)+a[11]+1839030562)<<16|o>>>16)+n<<0))+a[14]-35309556)<<23|e>>>9)+o<<0,e=((e+=((r=(n=((n+=((i=e^o)^(t=((t+=(i^n)+a[1]-1530992060)<<4|t>>>28)+e<<0))+a[4]+1272893353)<<11|n>>>21)+t<<0)^t)^(o=((o+=(r^e)+a[7]-155497632)<<16|o>>>16)+n<<0))+a[10]-1094730640)<<23|e>>>9)+o<<0,e=((e+=((r=(n=((n+=((i=e^o)^(t=((t+=(i^n)+a[13]+681279174)<<4|t>>>28)+e<<0))+a[0]-358537222)<<11|n>>>21)+t<<0)^t)^(o=((o+=(r^e)+a[3]-722521979)<<16|o>>>16)+n<<0))+a[6]+76029189)<<23|e>>>9)+o<<0,e=((e+=((r=(n=((n+=((i=e^o)^(t=((t+=(i^n)+a[9]-640364487)<<4|t>>>28)+e<<0))+a[12]-421815835)<<11|n>>>21)+t<<0)^t)^(o=((o+=(r^e)+a[15]+530742520)<<16|o>>>16)+n<<0))+a[2]-995338651)<<23|e>>>9)+o<<0,e=((e+=((n=((n+=(e^((t=((t+=(o^(e|~n))+a[0]-198630844)<<6|t>>>26)+e<<0)|~o))+a[7]+1126891415)<<10|n>>>22)+t<<0)^((o=((o+=(t^(n|~e))+a[14]-1416354905)<<15|o>>>17)+n<<0)|~t))+a[5]-57434055)<<21|e>>>11)+o<<0,e=((e+=((n=((n+=(e^((t=((t+=(o^(e|~n))+a[12]+1700485571)<<6|t>>>26)+e<<0)|~o))+a[3]-1894986606)<<10|n>>>22)+t<<0)^((o=((o+=(t^(n|~e))+a[10]-1051523)<<15|o>>>17)+n<<0)|~t))+a[1]-2054922799)<<21|e>>>11)+o<<0,e=((e+=((n=((n+=(e^((t=((t+=(o^(e|~n))+a[8]+1873313359)<<6|t>>>26)+e<<0)|~o))+a[15]-30611744)<<10|n>>>22)+t<<0)^((o=((o+=(t^(n|~e))+a[6]-1560198380)<<15|o>>>17)+n<<0)|~t))+a[13]+1309151649)<<21|e>>>11)+o<<0,e=((e+=((n=((n+=(e^((t=((t+=(o^(e|~n))+a[4]-145523070)<<6|t>>>26)+e<<0)|~o))+a[11]-1120210379)<<10|n>>>22)+t<<0)^((o=((o+=(t^(n|~e))+a[2]+718787259)<<15|o>>>17)+n<<0)|~t))+a[9]-343485551)<<21|e>>>11)+o<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=o-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+o<<0,this.h3=this.h3+n<<0)},t.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,o=this.h2,i=this.h3;return n[t>>4&15]+n[15&t]+n[t>>12&15]+n[t>>8&15]+n[t>>20&15]+n[t>>16&15]+n[t>>28&15]+n[t>>24&15]+n[e>>4&15]+n[15&e]+n[e>>12&15]+n[e>>8&15]+n[e>>20&15]+n[e>>16&15]+n[e>>28&15]+n[e>>24&15]+n[o>>4&15]+n[15&o]+n[o>>12&15]+n[o>>8&15]+n[o>>20&15]+n[o>>16&15]+n[o>>28&15]+n[o>>24&15]+n[i>>4&15]+n[15&i]+n[i>>12&15]+n[i>>8&15]+n[i>>20&15]+n[i>>16&15]+n[i>>28&15]+n[i>>24&15]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,o=this.h2,n=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},t.prototype.buffer=t.prototype.arrayBuffer,t.prototype.base64=function(){for(var t,e,o,n="",i=this.array(),r=0;r<15;)t=i[r++],e=i[r++],o=i[r++],n+=p[t>>>2]+p[63&(t<<4|e>>>4)]+p[63&(e<<2|o>>>6)]+p[63&o];return t=i[r],n+(p[t>>>2]+p[t<<4&63]+"==")};var _=v();f?module.exports=_:(i.md5=_,o&&define(function(){return _}))}(),cc._RF.pop()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],use_reversed_rotateTo:[function(t,e){"use strict";cc._RF.push(e,"d2b1fx0F4xMCL5soE8pUAmY","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["EngineConfig","GameConfig","GameConstant","ProjectStarter","App","EventMgr","NetHelper","PageMgr","PlatfomMgr","Queue","RankMgr","SoundMgr","User","Utils","BackgroundAdapter","BaseDialog","BasePage","BaseShare","Breath","Ios14Fix","JumpGame","JumpGameLocalData","ListItem","ListView","Rotate","ScreenCapture","SlotCtrl","SlotItem","SlotList","SpinItem","SpinTurntable","md5","DefaultHelper","FBHelper","PlatHelper","WXHelper","TurnTableCfg","Behavior","BehaviorHelper","Brick","BrickCollisionGroup","BrickCollisionGroupHelper","BrickHurtHelper","BrickMapDataHelper","Bullet","BulletBehaviorMove","CameraMove","CheckBrickCollider","CheckCollision","CheckPoint","CheckPointFlagEffect","Define","GameCtrl","Global","Hero","Loop","MapBgLoop","MovingBrickHelper","MysteryHouse","NodePoolHelper","PointMoveHelper","PopupHelper","Role","RoleAnimation","BrokenBrickEffect","DragonBoneEffect","Effect","FrameEffect","AdornBrick","BoxBrick","BrokenBrick","BrokenPowerBrick","CloudBrick","CollectBrick","DoorBrick","EventBrick","FrozenBrick","HallOfFameBrick","HurtBrick","LifterBrick","MovieBrick","MovingBrick","MovingHurtBrick","NeonLightBrick","PopupBrick","RandomDirMoveBrick","RotasionBrick","ShareBrick","ShareHeadphone","ShareNeonLight","ShareStage","ShareTV","ShareTrophyBrick","ShareWatchTV","SwitchBrick","TopHallOfFameBrick","TurntableBrick","WallBrick","Hedgehog","Monster","MonsterBehaviorMove","MonsterFireBullet","MonsterHelper","MonsterPathMove","AvatarBrick","SpecialBrick","BrickManager","BulletManager","CheckPointManager","EffectManager","GuideManager","MapDataManager","MysteryHouseManager","SpecialBrickManager","ContinueDialog","FlyGoldEffectDialog","GameMainPage","GameMainPageUI","LevelCompleteDialog","LoadingDialog","PauseDialog","RankPage","RecordDialog","ResultPage","RoleSkinDialog","SetupDialog","ShareScreenDialog","ShopDialog","ShowRewardDialog","ShowRewardRoleSkinDialog","TopBarDialog","TournamentDialog","FriendInfoItem","RankItem","RecordItem","ResultItem","RewardRoleSkinItem","RoleSkinItem","ShopItem","SoundBtn","ZhuanpanBtn","AnimationFrame","RankDataMgr","RollNumber","ShareCutScreen","ShareHeart","ShareMovie","ShareNeonLightSmall","ShareRecord","ShareSkin","ShareTrophy","ShareTrophy1","TestShare","TournamentShare","VsResult","VsStart","Hand","TestButton","use_reversed_rotateTo"]);